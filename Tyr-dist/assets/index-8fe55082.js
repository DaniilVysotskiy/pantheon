var Os=Object.defineProperty;var _s=(e,t,n)=>t in e?Os(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var E=(e,t,n)=>(_s(e,typeof t!="symbol"?t+"":t,n),n);import{r as h,j as a,c as C,d as Ui,B as T,a as g,b as Is,e as Fi,v as Ns,f as Ss,P as L,g as Ts,h as gs,i as Es,k as Us}from"./vendor-e16c9312.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const Gn="INIT_STATE",jn="RESET_STATE",Yi="STARTUP_WITH_AUTH",on="START_NEW_GAME",Kn="GO_TO_CURRENT_GAME",zi="GO_TO_DONATE",Fn="GOTO_EVENT_SELECT",Wi="SEARCH_PLAYER",Yn="SHOW_LAST_RESULTS",zn="SHOW_GAME_LOG",ys="SHOW_OTHER_TABLES_LIST",ms="SHOW_OTHER_TABLE",Wn="OPEN_SETTINGS",de="GOTO_NEXT_SCREEN",G="GOTO_PREV_SCREEN",Vi="SET_DORA_COUNT",$i="SET_FU_COUNT",ln="ADD_YAKU",Ji="INIT_REQUIRED_YAKU",Vn="REMOVE_YAKU",Zi="TOGGLE_RIICHI",qi="TOGGLE_WINNER",Xi="TOGGLE_LOSER",Qi="TOGGLE_PAO",er="TOGGLE_DEADHAND",tr="TOGGLE_NAGASHI",Ze="LOGIN_INIT",cn="LOGIN_SUCCESS",$n="LOGIN_FAIL",qe="RESET_LOGIN_ERROR",me="SET_CREDENTIALS",ue="UPDATE_CURRENT_GAMES_INIT",Jn="UPDATE_CURRENT_GAMES_SUCCESS",Zn="UPDATE_CURRENT_GAMES_FAIL",he="GET_GAME_OVERVIEW_INIT",qn="GET_GAME_OVERVIEW_SUCCESS",Xn="GET_GAME_OVERVIEW_FAIL",nr="GET_USERINFO_INIT",Qn="GET_USERINFO_SUCCESS",ir="GET_USERINFO_FAIL",Se="FORCE_LOGOUT",pt="GET_OTHER_TABLES_LIST_INIT",rr="GET_OTHER_TABLES_LIST_RELOAD",ei="GET_OTHER_TABLES_LIST_SUCCESS",ti="GET_OTHER_TABLES_LIST_FAIL",Ot="GET_OTHER_TABLE_INIT",ni="GET_OTHER_TABLE_RELOAD",ii="GET_OTHER_TABLE_SUCCESS",ri="GET_OTHER_TABLE_FAIL",_t="GET_ALL_ROUNDS_INIT",sr="GET_ALL_ROUNDS_SUCCESS",ar="GET_ALL_ROUNDS_FAIL",or="SET_TIMER",_e="UPDATE_TIMER_DATA",It="GET_CHANGES_OVERVIEW_INIT",lr="GET_CHANGES_OVERVIEW_SUCCESS",si="GET_CHANGES_OVERVIEW_FAIL",We="GET_LAST_RESULTS_INIT",cr="GET_LAST_RESULTS_SUCCESS",ur="GET_LAST_RESULTS_FAIL",Xe="GET_ALL_PLAYERS_INIT",un="GET_ALL_PLAYERS_SUCCESS",ai="GET_ALL_PLAYERS_FAIL",dn="START_GAME_INIT",dr="START_GAME_SUCCESS",oi="START_GAME_FAIL",hn="ADD_GAME_INIT",li="ADD_GAME_SUCCESS",Hn="ADD_GAME_FAIL",ci="EVENTS_GET_LIST_INIT",hr="EVENTS_GET_LIST_SUCCESS",fr="EVENTS_GET_LIST_FAIL",Qe="SELECT_EVENT",pr="INIT_BLANK_OUTCOME",Ae="SELECT_MULTIRON_WINNER",Or="RANDOMIZE_NEWGAME_PLAYERS",_r="CLEAR_NEWGAME_PLAYERS",Ir="SET_NEWGAME_PLAYERS",Nr="SELECT_NEWGAME_PLAYER_EAST",Sr="SELECT_NEWGAME_PLAYER_SOUTH",Tr="SELECT_NEWGAME_PLAYER_WEST",gr="SELECT_NEWGAME_PLAYER_NORTH",Er="TOGGLE_OVERVIEW_DIFFBY",Ur="TOGGLE_ADDITIONAL_TABLE_INFO",yr="TABLE_ROTATE_COUNTERCLOCKWISE",mr="TABLE_ROTATE_CLOCKWISE",fn="SETTINGS_SAVE_THEME",Ve="SETTINGS_SAVE_LANG",pn="SETTINGS_SAVE_SINGLE_DEVICE_MODE",Ar="UPDATE_STATE_SETTINGS",Cr="SET_STATE_SETTINGS",Ce="SET_SELECT_HAND_TAB",As="TRACK_ARBITRARY_EVENT",Cs="TRACK_SCREEN_ENTER",ui="HISTORY_INIT";const k=h.createContext(null),wr=e=>h.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},h.createElement("path",{d:"M22.5417 4.33337V10.0834H16.7917",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),h.createElement("path",{d:"M1.45831 19.6666V13.9166H7.20831",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),h.createElement("path",{d:"M3.86373 9.12505C4.34977 7.75155 5.17582 6.52356 6.2648 5.55566C7.35379 4.58776 8.67022 3.91149 10.0913 3.58997C11.5123 3.26844 12.9916 3.31213 14.3912 3.71696C15.7908 4.12179 17.065 4.87457 18.095 5.90505L22.5416 10.0834M1.45831 13.9167L5.90498 18.0951C6.93495 19.1255 8.20917 19.8783 9.60875 20.2831C11.0083 20.688 12.4877 20.7317 13.9087 20.4101C15.3297 20.0886 16.6462 19.4123 17.7352 18.4444C18.8241 17.4765 19.6502 16.2485 20.1362 14.8751",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),Rr=e=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e},h.createElement("circle",{cx:12,cy:12,r:3}),h.createElement("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})),ws=e=>h.createElement("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",...e},h.createElement("path",{fill:"currentColor",d:"M 16 3 C 10.486 3 6 7.486 6 13 C 6 18.514 10.486 23 16 23 C 21.514 23 26 18.514 26 13 C 26 7.486 21.514 3 16 3 z M 16 5 C 20.411 5 24 8.589 24 13 C 24 17.411 20.411 21 16 21 C 11.589 21 8 17.411 8 13 C 8 8.589 11.589 5 16 5 z M 15 7 L 15 8.1894531 C 14.855 8.2419531 14.714063 8.3061133 14.580078 8.3789062 C 14.446094 8.4516992 14.318203 8.5338281 14.197266 8.625 C 14.076328 8.7161719 13.963281 8.8161914 13.857422 8.9238281 C 13.645703 9.1391016 13.465391 9.3846484 13.326172 9.6542969 C 13.256562 9.7891211 13.196875 9.930625 13.148438 10.076172 C 13.051562 10.367266 13 10.6775 13 11 C 13 11.205 13.022109 11.405469 13.0625 11.599609 C 13.143281 11.987891 13.300547 12.350391 13.517578 12.669922 C 13.626094 12.829688 13.748516 12.978984 13.884766 13.115234 C 14.157266 13.387734 14.481719 13.608594 14.839844 13.761719 C 15.197969 13.914844 15.59 14 16 14 C 16.1425 14 16.276016 14.026953 16.396484 14.076172 C 16.516953 14.125391 16.623516 14.197734 16.712891 14.287109 C 16.802266 14.376484 16.874609 14.483047 16.923828 14.603516 C 16.973047 14.723984 17 14.8575 17 15 C 17 15.4275 16.757891 15.776172 16.396484 15.923828 C 16.276016 15.973047 16.1425 16 16 16 C 15.8575 16 15.723984 15.973047 15.603516 15.923828 C 15.483047 15.874609 15.376484 15.802266 15.287109 15.712891 C 15.108359 15.534141 15 15.285 15 15 L 13 15 C 13 15.16125 13.013828 15.320254 13.039062 15.474609 C 13.064297 15.628965 13.1 15.778281 13.148438 15.923828 C 13.196875 16.069375 13.256562 16.210879 13.326172 16.345703 C 13.395781 16.480527 13.475703 16.608281 13.564453 16.730469 C 13.653203 16.852656 13.751563 16.968535 13.857422 17.076172 C 13.963281 17.183809 14.076328 17.283828 14.197266 17.375 C 14.318203 17.466172 14.446094 17.548301 14.580078 17.621094 C 14.714062 17.693887 14.855 17.758047 15 17.810547 L 15 19 L 17 19 L 17 17.810547 C 18.015 17.443047 18.784297 16.555098 18.960938 15.474609 C 18.986172 15.320254 19 15.16125 19 15 C 19 14.795 18.977891 14.594531 18.9375 14.400391 C 18.897109 14.20625 18.838281 14.018906 18.761719 13.839844 C 18.685156 13.660781 18.590937 13.489844 18.482422 13.330078 C 18.373906 13.170312 18.251484 13.021016 18.115234 12.884766 C 17.978984 12.748516 17.829687 12.626094 17.669922 12.517578 C 17.510156 12.409063 17.339219 12.314844 17.160156 12.238281 C 16.981094 12.161719 16.79375 12.102891 16.599609 12.0625 C 16.405469 12.022109 16.205 12 16 12 C 15.8575 12 15.723984 11.973047 15.603516 11.923828 C 15.483047 11.874609 15.376484 11.802266 15.287109 11.712891 C 15.197734 11.623516 15.125391 11.516953 15.076172 11.396484 C 15.026953 11.276016 15 11.1425 15 11 C 15 10.8575 15.026953 10.723984 15.076172 10.603516 C 15.125391 10.483047 15.197734 10.376484 15.287109 10.287109 C 15.376484 10.197734 15.483047 10.125391 15.603516 10.076172 C 15.723984 10.026953 15.8575 10 16 10 C 16.57 10 17 10.43 17 11 L 19 11 C 19 10.83875 18.986172 10.679746 18.960938 10.525391 C 18.935703 10.371035 18.9 10.221719 18.851562 10.076172 C 18.560938 9.2028906 17.87 8.5044531 17 8.1894531 L 17 7 L 15 7 z M 2 21 L 2 29 L 4 29 L 4 23 L 9.3808594 23 C 8.5298594 22.435 7.7610781 21.758 7.0800781 21 L 2 21 z M 24.919922 21 C 24.238922 21.758 23.470141 22.435 22.619141 23 L 28 23 L 28 29 L 30 29 L 30 21 L 24.919922 21 z M 6 25 L 6 27 L 26 27 L 26 25 L 6 25 z"})),br=e=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e},h.createElement("line",{x1:12,y1:3,x2:12,y2:21}),h.createElement("line",{x1:3,y1:12,x2:21,y2:12})),Rs=e=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e},h.createElement("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),h.createElement("polyline",{points:"15 3 21 3 21 9"}),h.createElement("line",{x1:10,y1:14,x2:21,y2:3})),ot=h.memo(function(e){const{caption:t,isVisible:n,isActive:r,isBordered:s,icon:o,isIconRight:l,onClick:c}=e;return n?a.jsx("div",{className:C("page-home__button",{"page-home__button--active":r,"page-home__button--bordered":s}),onClick:c,children:a.jsxs("div",{className:"page-home__button-content",children:[o&&a.jsx("div",{className:C("icon",{"icon--right":l}),children:o}),t]})}):null}),bs=h.memo(function(t){const n=h.useContext(k),{eventName:r,canStartGame:s,hasStartedGame:o,hasPrevGame:l,canSeeOtherTables:c,hasStat:u,showDonate:f,onDonateClick:_,onSettingClick:I,onRefreshClick:p,onOtherTablesClick:S,onPrevGameClick:O,onNewGameClick:N,onCurrentGameClick:U,onStatClick:y}=t;return a.jsxs("div",{className:"page-home",children:[a.jsxs("div",{className:"top-panel top-panel--between",children:[a.jsx("div",{className:"svg-button svg-button--small",onClick:p,children:a.jsx(wr,{})}),a.jsx("div",{className:"svg-button svg-button--small",onClick:I,children:a.jsx(Rr,{})})]}),a.jsx("div",{className:"page-home__title",children:r}),a.jsxs("div",{className:"page-home__bottom",children:[f?a.jsx("div",{className:"svg-button",style:{margin:"16px"},onClick:_,children:a.jsx(ws,{})}):null,a.jsx(ot,{caption:n._t("New game"),isVisible:s,isActive:!0,icon:a.jsx(br,{}),onClick:N}),a.jsx(ot,{caption:n._t("Current game"),isVisible:o,isActive:!0,onClick:U}),a.jsx(ot,{caption:n._t("Previous game"),isVisible:l,isBordered:!s&&!o,onClick:O}),a.jsx(ot,{caption:n._t("Other playing tables"),isVisible:c,isBordered:!s&&!o||l,onClick:S}),a.jsx(ot,{caption:n._t("Statistics"),isVisible:u,isBordered:!s&&!o||l||c,icon:a.jsx(Rs,{}),isIconRight:!0,onClick:y})]})]})});function Te(){return a.jsx("div",{className:"inline-preloader"})}const kr=e=>e.loading.overview||e.loading.addRound||e.loading.games;class Hr extends h.PureComponent{onSettingClick(){this.props.dispatch({type:Wn})}onRefreshClick(){this.props.dispatch({type:ue})}onOtherTablesClick(){this.props.dispatch({type:pt})}onPrevGameClick(){this.props.dispatch({type:Yn})}onNewGameClick(){this.props.dispatch({type:on})}onCurrentGameClick(){const{dispatch:t}=this.props;t({type:ue}),t({type:Kn})}onStatClick(){const{gameConfig:t}=this.props.state;t&&window.open(`${(t.eventStatHost.startsWith("https://")||t.eventStatHost.startsWith("http://localhost:")?t.eventStatHost:"https://"+t.eventStatHost).replace(/\/info$/,"/order/rating")}`)}onDonateClick(){const{dispatch:t}=this.props;t({type:zi})}componentDidMount(){if(this.props.state.currentEventId){const{dispatch:t}=this.props;t({type:ue})}}render(){const{state:t}=this.props,n=this.context;if(!t.gameConfig||kr(t))return a.jsx(Te,{});const r=t.gameConfig.eventTitle||n._t("Event title"),s=this.props.state.settings.currentLang==="ru"&&(window.location.host.startsWith("localhost")||window.location.host==="assist.riichimahjong.org");return a.jsx(bs,{eventName:r,canStartGame:!t.gameConfig.autoSeating&&!t.currentSessionHash&&!t.gameConfig.isPrescripted,hasStartedGame:!!t.currentSessionHash&&t.gameOverviewReady,hasPrevGame:!0,canSeeOtherTables:!0,showDonate:s,hasStat:!!t.gameConfig.eventStatHost,onDonateClick:this.onDonateClick.bind(this),onSettingClick:this.onSettingClick.bind(this),onRefreshClick:this.onRefreshClick.bind(this),onOtherTablesClick:this.onOtherTablesClick.bind(this),onPrevGameClick:this.onPrevGameClick.bind(this),onNewGameClick:this.onNewGameClick.bind(this),onCurrentGameClick:this.onCurrentGameClick.bind(this),onStatClick:this.onStatClick.bind(this)})}}E(Hr,"contextType",k);const ks=h.memo(function(e){const{onChange:t,value:n}=e,r=h.useCallback(()=>{t(!n)},[n,t]);return a.jsxs("div",{className:"switch",onClick:r,children:[a.jsx("div",{className:"switch__box"+(n?" switch__box--on":"")}),a.jsx("div",{className:"switch__button"+(n?" switch__button--on":"")})]})});function Hs(e,t){const[n,r]=h.useState(e);return h.useEffect(()=>{const s=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(s)}},[e]),n}const Mr=e=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e},h.createElement("line",{x1:18,y1:6,x2:6,y2:18}),h.createElement("line",{x1:6,y1:6,x2:18,y2:18})),Ms=h.memo(function(e){const{onChange:t}=e,[n,r]=h.useState(""),s=Hs(n,500);return h.useEffect(()=>{s&&t(s)},[s]),a.jsx(vr,{onChange:o=>r(o),onClear:()=>t("")})});class vr extends h.Component{constructor(){super(...arguments);E(this,"state",{searchValue:""})}onInputChange(n){const r=n.target.value;this.setState({searchValue:r}),this.props.onChange(r)}onClearClick(){this.setState({searchValue:""}),this.props.onClear()}render(){const{searchValue:n}=this.state,r=this.context;return a.jsxs(a.Fragment,{children:[a.jsx("input",{value:n,placeholder:r._t("type to find someone"),onChange:this.onInputChange.bind(this)}),!!n&&a.jsx("div",{onClick:this.onClearClick.bind(this),children:a.jsx(Mr,{})})]})}}E(vr,"contextType",k);const di=e=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e},h.createElement("line",{x1:19,y1:12,x2:5,y2:12}),h.createElement("polyline",{points:"12 19 5 12 12 5"})),Nt=h.memo(function(e){const{showSearch:t,onBackClick:n,onSearchChange:r}=e;return a.jsxs("div",{className:"top-panel",children:[a.jsx("div",{className:"svg-button",onClick:n,children:a.jsx(di,{})}),t&&r&&a.jsx("div",{className:"top-panel__search",children:a.jsx(Ms,{onChange:r})})]})}),vs=h.memo(function(e){const t=h.useContext(k),{playerName:n,supportedLanguages:r,currentLanguage:s,supportedThemes:o,currentTheme:l,singleDeviceMode:c,onLogout:u,onBackClick:f,onSingleDeviceModeChange:_,onLangChange:I,onThemeSelect:p,onEventSelect:S}=e;return a.jsxs("div",{className:"flex-container page-setting",children:[a.jsxs("div",{className:"flex-container__content",children:[a.jsx(Nt,{onBackClick:f}),a.jsx("div",{className:"page-setting__name",children:n}),a.jsx("div",{className:"page-setting__section",children:a.jsx("a",{className:"flat-btn flat-btn--large",style:{width:"100%"},target:"_blank",href:"https://manage.riichimahjong.org/profile/manage",children:t._t("Go to personal area")})}),a.jsxs("div",{className:"page-setting__section",children:[a.jsx("div",{className:"page-setting__section-title",children:t._t("Language")}),a.jsx("div",{className:"page-setting__section-content",children:r.map(O=>a.jsx("div",{className:C("radio-btn radio-btn--small",{"radio-btn--active":O===s}),onClick:()=>I(O),children:O},O))})]}),a.jsxs("div",{className:"page-setting__section",children:[a.jsx("div",{className:"page-setting__section-title",children:t._t("Theme")}),a.jsx("div",{className:"page-setting__section-content",children:o.map(O=>a.jsxs("div",{className:C("theme",{"theme--selected":O.name===l}),children:[a.jsx("div",{className:"theme__visual",onClick:()=>p(O.name),children:a.jsxs("div",{className:"theme__visual-inner",style:{backgroundColor:O.backgroundColor},children:[a.jsx("div",{className:"theme__secondary-color",style:{backgroundColor:O.secondaryColor}}),a.jsx("div",{className:"theme__text-color",style:{backgroundColor:O.textColor}}),a.jsx("div",{className:"theme__primary-color",style:{backgroundColor:O.primaryColor}})]})}),a.jsx("div",{className:"theme__name",children:O.name})]},O.name))})]}),a.jsx("div",{className:"page-setting__section",children:a.jsx("div",{className:"page-setting__section-content",children:a.jsx("button",{className:"flat-btn flat-btn--large",style:{width:"100%"},onClick:()=>S(),children:t._t("Select another event")})})}),a.jsx("div",{className:"page-setting__section",children:a.jsxs("div",{className:"switch-setting",children:[a.jsx(ks,{value:c,onChange:_}),a.jsxs("div",{className:"switch-setting__description",children:[a.jsx("div",{className:"switch-setting__caption",children:t._t("Single device mode")}),a.jsx("div",{className:"switch-setting__info",children:t._t("Turn on if you use a single device for all players")})]})]})})]}),a.jsx("div",{className:"flex-container__bottom page-setting__bottom",onClick:u,children:a.jsx("div",{className:"link",children:t._t("Log out")})})]})}),xs={projectIdVersion:"PROJECT VERSION",reportMsgidBugsTo:"",potCreationDate:"2023-06-07 09:55+0300",poRevisionDate:"2023-04-16 21:56+0300",languageTeam:"",language:"ru_RU",mimeVersion:"1.0",contentType:"text/plain; charset=UTF-8",contentTransferEncoding:"8bit",pluralForms:"nplurals=3; plural=(n%10==1 && n%100!=11 ? 0 : n%10>=2 && n%10<=4 && (n%100<10 || n%100>=20) ? 1 : 2);",generatedBy:"i18n-json2po"},Ds=[{type:"plural",entry:["%1 deal left","%1 deals left"],translations:["Осталась %1 раздача","Осталось %1 раздачи","Осталось %1 раздач"]},{type:"single",entry:"%1 han",translation:"%1 хан"},{type:"single",entry:"%1 han %2 fu",translation:"%1 хан, %2 фу"},{type:"single",entry:"%1 ← %2",translation:"%1 ← %2"},{type:"single",entry:"Abort",translation:"Абортивная ничья"},{type:"single",entry:"Abortive draw",translation:"Абортивная ничья"},{type:"single",entry:"Chankan",translation:"Чанкан"},{type:"single",entry:"Chanta",translation:"Чанта"},{type:"single",entry:"Chiihou",translation:"Чихо"},{type:"single",entry:"Chiitoitsu",translation:"Чиитойцу"},{type:"single",entry:"Chinitsu",translation:"Чиницу"},{type:"single",entry:"Chinroutou",translation:"Чинрото"},{type:"single",entry:"Chombo",translation:"Чомбо"},{type:"single",entry:"Chuuren poutou",translation:"Чууренпото"},{type:"single",entry:"Clear players",translation:"Очистить"},{type:"single",entry:"Current game",translation:"Текущая игра"},{type:"single",entry:"Daburu",translation:"Дабури"},{type:"single",entry:"Daburu riichi",translation:"Дабл-риичи"},{type:"single",entry:"Daisangen",translation:"Дайсанген"},{type:"single",entry:"Daisuushii",translation:"Дайсуши"},{type:"single",entry:"Dora",translation:"Дора"},{type:"single",entry:"Draw",translation:"Ничья"},{type:"single",entry:"E-mail is not registered in Pantheon database (%1)",translation:"E-mail не зарегистрирован в базе данных Pantheon (%1)"},{type:"single",entry:"Email",translation:"Email"},{type:"single",entry:"Event title",translation:"Название события"},{type:"single",entry:"Exhaustive draw",translation:"Ничья"},{type:"single",entry:"Forgot password?",translation:"Забыли пароль?"},{type:"single",entry:"Fu",translation:"Фу"},{type:"single",entry:"Game log",translation:"Лог игры"},{type:"single",entry:"Go to personal area",translation:"В личный кабинет"},{type:"single",entry:"Haitei",translation:"Хайтей"},{type:"single",entry:"Han from yaku",translation:"Хан из яку"},{type:"single",entry:"Honba: %1",translation:"Хонба: %1"},{type:"single",entry:"Honitsu",translation:"Хоницу"},{type:"single",entry:"Honroutou",translation:"Хонрото"},{type:"single",entry:"Houtei",translation:"Хотей"},{type:"single",entry:"Houtei raoyui",translation:"Хотей раоюй"},{type:"single",entry:"If in doubt, contact the tournament administrator for further instructions.",translation:"Обратитесь к администратору турнира для дальнейших инструкций."},{type:"single",entry:"If you want to select a riichi, return back and press riichi button for the winner",translation:"Если вы хотите выбрать яку риичи, вернитесь назад и отметьте ставку риичи для выигравшего"},{type:"single",entry:"Iipeikou",translation:"Иипейко"},{type:"single",entry:"Ippatsu",translation:"Иппацу"},{type:"single",entry:"Ittsu",translation:"Иццу"},{type:"single",entry:"Junchan",translation:"Джунчан"},{type:"single",entry:"Kokushi musou",translation:"Кокушимусо"},{type:"single",entry:"Language",translation:"Язык"},{type:"single",entry:"Log in",translation:"Вход"},{type:"single",entry:"Log out",translation:"Выйти из системы"},{type:"single",entry:"Login attempt has failed. Possible reasons are:",translation:"Попытка входа в систему не удалась. Возможные причины:"},{type:"single",entry:"Loser",translation:"Проигравший"},{type:"single",entry:"Menzentsumo",translation:"Мензенцумо"},{type:"single",entry:"Multiron, from %1",translation:"Мультирон с %1"},{type:"single",entry:"Nagashi",translation:"Нагаши манган"},{type:"single",entry:"Nagashi mangan",translation:"Нагаши манган"},{type:"single",entry:"New game",translation:"Новая игра"},{type:"single",entry:"No games found",translation:"Игры не найдены"},{type:"single",entry:"No results found",translation:"Результаты отсутствуют"},{type:"single",entry:"No tables are playing right now",translation:"На данный момент ни один стол не играет"},{type:"single",entry:"OK",translation:"ОК"},{type:"single",entry:"Open riichi",translation:"Опен риичи"},{type:"single",entry:"Opened hand",translation:"Открытая рука"},{type:"single",entry:"Other playing tables",translation:"Другие столы"},{type:"single",entry:"Pantheon",translation:"Pantheon"},{type:"single",entry:"Pantheon: log in",translation:"Pantheon: вход в систему"},{type:"single",entry:"Pao from: %1",translation:"Пао с: %1"},{type:"single",entry:"Password",translation:"Пароль"},{type:"single",entry:"Password check has failed",translation:"Пароль введен некорректно"},{type:"single",entry:"Penalty",translation:"Штраф"},{type:"single",entry:"Pinfu",translation:"Пин-фу"},{type:"single",entry:"Player name",translation:"Имя игрока"},{type:"single",entry:"Previous game",translation:"Предыдущая игра"},{type:"single",entry:"Red fives",translation:"Акадоры"},{type:"single",entry:"Renhou",translation:"Ренхо"},{type:"single",entry:"Riichi",translation:"Риичи"},{type:"single",entry:"Riichi bets: %1",translation:"Ставок риичи: %1"},{type:"single",entry:"Rinshan",translation:"Риншан"},{type:"single",entry:"Rinshan kaihou",translation:"Риншан кайхо"},{type:"single",entry:"Ron",translation:"Рон"},{type:"single",entry:"Ron, %1",translation:"Рон, %1"},{type:"single",entry:"Ryanpeikou",translation:"Рянпейко"},{type:"single",entry:"Ryuuiisou",translation:"Рюисо"},{type:"single",entry:"Sanankou",translation:"Сананко"},{type:"single",entry:"Sankantsu",translation:"Санканцу"},{type:"single",entry:"Sanshoku",translation:"Саншоку"},{type:"single",entry:"Sanshoku doukou",translation:"Саншоку доко"},{type:"single",entry:"Select another event",translation:"Выбрать другое событие"},{type:"single",entry:"Select event",translation:"Выбрать событие"},{type:"single",entry:"Select pao",translation:"Выбрать пао"},{type:"single",entry:"Select tempai",translation:"Выбрать темпай"},{type:"single",entry:"Shousangen",translation:"Шосанген"},{type:"single",entry:"Shousuushii",translation:"Шосуши"},{type:"single",entry:"Shuffle players",translation:"Перемешать"},{type:"single",entry:"Sign up",translation:"Регистрация"},{type:"single",entry:"Single device mode",translation:"Режим одного устройства"},{type:"single",entry:"Start game",translation:"Начать игру"},{type:"single",entry:"Statistics",translation:"Статистика"},{type:"single",entry:"Suuankou",translation:"Сууанко"},{type:"single",entry:"Suukantsu",translation:"Сууканцу"},{type:"single",entry:"Table #%1",translation:"Стол №%1"},{type:"single",entry:"Tanyao",translation:"Тан-яо"},{type:"single",entry:"Tempai: %1",translation:"Темпай: %1"},{type:"single",entry:"Tenhou",translation:"Тенхо"},{type:"single",entry:"Theme",translation:"Оформление"},{type:"single",entry:"There is no events you participate in right now",translation:"На данный момент нет активных событий, в которых вы участвуете"},{type:"single",entry:"Toitoi",translation:"Тойтой"},{type:"single",entry:"Tsumo",translation:"Цумо"},{type:"single",entry:"Tsumo, %1",translation:"Цумо, %1"},{type:"single",entry:"Tsuuiisou",translation:"Цуисо"},{type:"single",entry:"Turn on if you use a single device for all players",translation:"Включите, если вы используете одно устройство для всех игроков"},{type:"single",entry:"Unexpected server error",translation:"Неожиданная ошибка сервера"},{type:"single",entry:"Ura dora",translation:"Урадора"},{type:"single",entry:"Winner",translation:"Победитель"},{type:"single",entry:"Yakuhai",translation:"Якухай"},{type:"single",entry:"Yakuhai x1",translation:"Якухай 1"},{type:"single",entry:"Yakuhai x2",translation:"Якухай 2"},{type:"single",entry:"Yakuhai x3",translation:"Якухай 3"},{type:"single",entry:"Yakuhai x4",translation:"Якухай 4"},{type:"single",entry:"Yakuman",translation:"Якуман"},{type:"single",entry:"dora %1",translation:"дора %1"},{type:"single",entry:"empty outcome",translation:"пустой исход"},{type:"single",entry:"name",translation:"имя"},{type:"single",entry:"register",context:"Name of registration link",translation:"регистрация"},{type:"single",entry:"select player",translation:"выбрать игрока"},{type:"single",entry:"something goes wrong, please contact your administrator",translation:"что-то пошло не так, свяжитесь с администратором системы"},{type:"single",entry:"type to find someone",translation:"начните вводить чтобы найти игроков"},{type:"single",entry:"wrong outcome for paoSelect",translation:"неверный исход для выбора пао"},{type:"single",entry:"x2",translation:"х2"},{type:"single",entry:"x3",translation:"х3"},{type:"single",entry:"x4",translation:"х4"},{type:"single",entry:"yakuman",translation:"якуман"}],Ps={meta:xs,items:Ds},Ls={projectIdVersion:"PROJECT VERSION",reportMsgidBugsTo:"",potCreationDate:"2022-01-15 01:02+0300",poRevisionDate:"2022-01-23 15:42+0100",languageTeam:"",mimeVersion:"1.0",contentType:"text/plain; charset=UTF-8",contentTransferEncoding:"8bit",generatedBy:"i18n-json2po",pluralForms:"nplurals=2; plural=(n != 1);",language:"de_DE"},Bs=[{type:"single",entry:"select player",translation:"Spieler auswählen"},{type:"single",entry:"something goes wrong, please contact your administrator",translation:"Etwas ist schiefgelaufen, bitte kontaktiere den Administrator"},{type:"single",entry:"type to find someone",translation:"Spieler suchen"},{type:"single",entry:"name",translation:"Name"},{type:"single",entry:"Select event",translation:"Event auswählen"},{type:"single",entry:"There is no events you participate in right now",translation:"Du nimmst gerade an keinem Event teil"},{type:"single",entry:"No games found",translation:"Keine Spiele gefunden"},{type:"single",entry:"Event title",translation:"Eventname"},{type:"single",entry:"New game",translation:"Neues Spiel"},{type:"single",entry:"Current game",translation:"Laufendes Spiel"},{type:"single",entry:"Previous game",translation:"Letztes Spiel"},{type:"single",entry:"Other playing tables",translation:"Andere laufende Spiele"},{type:"single",entry:"Statistics",translation:"Statistiken"},{type:"single",entry:"No results found",translation:"Keine Ergebnisse"},{type:"single",entry:"Game log",translation:"Spielaufzeichung"},{type:"single",entry:"yakuman"},{type:"single",entry:"%1 han"},{type:"single",entry:"%1 han %2 fu"},{type:"single",entry:"Pao from: %1",translation:"Pao von: %1"},{type:"single",entry:"Honba: %1"},{type:"single",entry:"Tempai: %1",translation:"Tenpai: %1"},{type:"single",entry:"Riichi bets: %1",translation:"Richieinsätze: %1"},{type:"single",entry:"dora %1"},{type:"single",entry:"Ron, %1"},{type:"single",entry:"%1 ← %2"},{type:"single",entry:"Multiron, from %1",translation:"Multiron, von %1"},{type:"single",entry:"Tsumo, %1"},{type:"single",entry:"Exhaustive draw",translation:"Unentschieden"},{type:"single",entry:"Abortive draw"},{type:"single",entry:"Chombo"},{type:"single",entry:"Nagashi mangan"},{type:"single",entry:"Pantheon: log in",translation:"Pantheon: Mobile App"},{type:"single",entry:"Email"},{type:"single",entry:"Password",translation:"Passwort"},{type:"single",entry:"Sign up",translation:"Registrieren"},{type:"single",entry:"Log in",translation:"Anmelden"},{type:"single",entry:"register",context:"Name of registration link"},{type:"single",entry:"Pantheon"},{type:"single",entry:"Login attempt has failed. Possible reasons are:",translation:"Anmeldeversuch fehlgeschlagen. Mögliche Ursachen:"},{type:"single",entry:"E-mail is not registered in Pantheon database (%1)",translation:"E-mail ist nicht registriert (%1)"},{type:"single",entry:"Password check has failed",translation:"Passwort falsch"},{type:"single",entry:"Unexpected server error",translation:"Unerwarteter Fehler"},{type:"single",entry:"If in doubt, contact the tournament administrator for further instructions.",translation:"Bei Fragen kontaktiere bitte den Turnierleiter"},{type:"single",entry:"OK"},{type:"single",entry:"Han from yaku",translation:"Han von Baku"},{type:"single",entry:"Dora"},{type:"single",entry:"Ura dora"},{type:"single",entry:"Red fives",translation:"Rote Fünfen"},{type:"single",entry:"Fu"},{type:"single",entry:"Yakuman"},{type:"single",entry:"Player name",translation:"Spielername"},{type:"single",entry:"Language",translation:"Sprache"},{type:"single",entry:"Theme",translation:"Design"},{type:"single",entry:"Select another event",translation:"Event auswählen"},{type:"single",entry:"Log out",translation:"Abmelden"},{type:"plural",entry:["%1 deal left","%1 deals left"],translations:["Noch %1 Hand ","Noch %1 Hände"]},{type:"single",entry:"Table #%1",translation:"Tisch #%1"},{type:"single",entry:"Ron"},{type:"single",entry:"Tsumo"},{type:"single",entry:"Penalty",translation:"Strafe"},{type:"single",entry:"empty outcome",translation:"Leeres Ergebnis"},{type:"single",entry:"Winner",translation:"Gewinner"},{type:"single",entry:"Loser",translation:"Verlierer"},{type:"single",entry:"wrong outcome for paoSelect",translation:"Falsches Ergebnis für paoSelect"},{type:"single",entry:"Select pao",translation:"Pao auswählen"},{type:"single",entry:"Select tempai",translation:"Tenpai auswählen"},{type:"single",entry:"Draw",translation:"Unentschieden"},{type:"single",entry:"Abort",translation:"Abbruch"},{type:"single",entry:"Nagashi"},{type:"single",entry:"Opened hand",translation:"Offene Hand"},{type:"single",entry:"Toitoi"},{type:"single",entry:"Honroutou"},{type:"single",entry:"Sanankou"},{type:"single",entry:"Sankantsu"},{type:"single",entry:"Suukantsu"},{type:"single",entry:"Suuankou"},{type:"single",entry:"Pinfu"},{type:"single",entry:"Iipeikou"},{type:"single",entry:"Ryanpeikou"},{type:"single",entry:"Sanshoku"},{type:"single",entry:"Sanshoku doukou"},{type:"single",entry:"Ittsu"},{type:"single",entry:"Yakuhai x1"},{type:"single",entry:"Yakuhai"},{type:"single",entry:"Yakuhai x2"},{type:"single",entry:"x2"},{type:"single",entry:"Yakuhai x3"},{type:"single",entry:"x3"},{type:"single",entry:"Yakuhai x4"},{type:"single",entry:"x4"},{type:"single",entry:"Shousangen"},{type:"single",entry:"Daisangen"},{type:"single",entry:"Shousuushii"},{type:"single",entry:"Daisuushii"},{type:"single",entry:"Tsuuiisou"},{type:"single",entry:"Tanyao"},{type:"single",entry:"Chanta"},{type:"single",entry:"Junchan"},{type:"single",entry:"Chinroutou"},{type:"single",entry:"Honitsu"},{type:"single",entry:"Chinitsu"},{type:"single",entry:"Chuuren poutou"},{type:"single",entry:"Ryuuiisou"},{type:"single",entry:"Chiitoitsu"},{type:"single",entry:"Kokushi musou"},{type:"single",entry:"Riichi"},{type:"single",entry:"Daburu riichi"},{type:"single",entry:"Daburu"},{type:"single",entry:"Ippatsu"},{type:"single",entry:"Menzentsumo"},{type:"single",entry:"Haitei"},{type:"single",entry:"Rinshan kaihou"},{type:"single",entry:"Rinshan"},{type:"single",entry:"Tenhou"},{type:"single",entry:"Chiihou"},{type:"single",entry:"Houtei raoyui"},{type:"single",entry:"Houtei"},{type:"single",entry:"Chankan"},{type:"single",entry:"Renhou"},{type:"single",entry:"Open riichi"},{type:"single",entry:"If you want to select a riichi, return back and press riichi button for the winner",translation:"Bei Riichi bitte einen Schritt zurück und riichi Button für den Gewinner markieren"},{type:"single",entry:"Games overview",translation:"Spielübersicht"},{type:"single",entry:"Loading...",translation:"Laden…"}],Gs={meta:Ls,items:Bs},Mn=["en","ru","de"],yi={ru:Ps,de:Gs};class js{constructor(t){E(this,"i18nController");E(this,"i18n");this.storage=t,this.i18nController=new Ui.TranslationController((n,r)=>{switch(n){case"ru":r(n,JSON.stringify(yi[n]));break;case"de":r(n,JSON.stringify(yi[n]));break;case"en":default:r("en",JSON.stringify({items:[],meta:{projectIdVersion:"1",reportMsgidBugsTo:"",potCreationDate:"",poRevisionDate:"",lastTranslator:{name:"",email:""},language:"en",languageTeam:"",pluralForms:"nplurals=1; plural=(n==1 ? 0 : 1)",mimeVersion:"",contentType:"",contentTransferEncoding:"",generatedBy:""}}));break}},(n,r)=>{console.error(`Failed i18n substitution: ${n}`,r)},n=>n==1?0:1),this.i18n=new Ui.TranslationProvider(this.i18nController)}init(t,n){const r=this.storage.getLang();if(r)if(!Mn.includes(r))this.storage.deleteLang();else{this.i18nController.setLocale(r,t,n);return}for(const s of window.navigator.languages)if(Mn.includes(s)){this.i18nController.setLocale(s,t,n);return}this.i18nController.setLocale("en",t,n)}get _t(){return this.i18n._t}get _pt(){return this.i18n._pt}get _nt(){return this.i18n._nt}get _npt(){return this.i18n._npt}get _gg(){return this.i18n._gg}get _ngg(){return this.i18n._ngg}get _pgg(){return this.i18n._pgg}get _npgg(){return this.i18n._npgg}}const Ks={name:"day",backgroundColor:"#F4F5F7",primaryColor:"#1565C0",secondaryColor:"#B8C0D1",textColor:"#000000"},Fs={name:"night",backgroundColor:"#282C34",primaryColor:"#1565C0",secondaryColor:"#37445C",textColor:"#E6E6E6"},Ys=[Ks,Fs];class xr extends h.PureComponent{onBackClick(){const{dispatch:t}=this.props;t({type:G})}onLogout(){const{dispatch:t}=this.props;t({type:Se,payload:void 0}),t({type:qe})}onSingleDeviceModeChange(t){const{dispatch:n}=this.props;n({type:pn,payload:t})}onLangChange(t){const{dispatch:n}=this.props,r=this.context;n({type:Ve,payload:t}),r.init(s=>{n({type:Ve,payload:s})},s=>console.error(s))}onThemeSelect(t){const{dispatch:n}=this.props;n({type:fn,payload:t})}onEventSelect(){const{dispatch:t}=this.props;t({type:Fn})}render(){const{state:t}=this.props,n=this.context,r=t.currentPlayerDisplayName??n._t("Player name");return a.jsx(vs,{playerName:r,supportedLanguages:Mn,currentLanguage:t.settings.currentLang||"en",supportedThemes:Ys,currentTheme:t.settings.currentTheme||"day",singleDeviceMode:t.settings.singleDeviceMode||!1,onBackClick:this.onBackClick.bind(this),onLogout:this.onLogout.bind(this),onSingleDeviceModeChange:this.onSingleDeviceModeChange.bind(this),onLangChange:this.onLangChange.bind(this),onThemeSelect:this.onThemeSelect.bind(this),onEventSelect:this.onEventSelect.bind(this)})}}E(xr,"contextType",k);class ct extends h.Component{render(){const{playerName:t,wind:n,onPlayerClick:r}=this.props,s=this.context;return a.jsxs("div",{className:"player-dropdown",children:[a.jsx("div",{className:"player-dropdown",children:n}),a.jsxs("div",{className:"player-dropdown__player",onClick:r,children:[!!t&&a.jsx("div",{className:"player-dropdown__player-name",children:t}),!t&&a.jsx("div",{className:"player-dropdown__placeholder",children:s._t("select player")})]})]})}}E(ct,"contextType",k);const zs=e=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e},h.createElement("polyline",{points:"16 3 21 3 21 8"}),h.createElement("line",{x1:4,y1:20,x2:21,y2:3}),h.createElement("polyline",{points:"21 16 21 21 16 21"}),h.createElement("line",{x1:15,y1:15,x2:21,y2:21}),h.createElement("line",{x1:4,y1:4,x2:9,y2:9})),ft=e=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e},h.createElement("polyline",{points:"20 6 9 17 4 12"})),Ws=h.memo(function(e){const t=h.useContext(k),{east:n,south:r,west:s,north:o,canSave:l,onBackClick:c,onShuffleClick:u,onSaveClick:f,onClearClick:_,onPlayerClick:I}=e;return a.jsxs("div",{className:"page-new-game",children:[a.jsx(Nt,{onBackClick:c}),a.jsx("div",{className:"page-new-game__inner",children:a.jsxs("div",{className:"page-new-game__players",children:[a.jsx(ct,{wind:"東",playerName:n,onPlayerClick:()=>I("東")}),a.jsx(ct,{wind:"南",playerName:r,onPlayerClick:()=>I("南")}),a.jsx(ct,{wind:"西",playerName:s,onPlayerClick:()=>I("西")}),a.jsx(ct,{wind:"北",playerName:o,onPlayerClick:()=>I("北")}),a.jsxs("div",{className:"page-new-game__buttons",children:[a.jsxs("div",{className:"flat-btn",onClick:_,children:[a.jsx(Mr,{}),a.jsx("label",{children:t._t("Clear players")})]}),a.jsxs("div",{className:"flat-btn",onClick:u,children:[a.jsx(zs,{}),a.jsx("label",{children:t._t("Shuffle players")})]}),a.jsxs("div",{className:C("flat-btn",{"flat-btn--disabled":!l}),onClick:f,children:[a.jsx(ft,{}),a.jsx("label",{children:t._t("Start game")})]})]})]})})]})});class Vs extends h.PureComponent{onBackClick(){this.props.dispatch({type:G})}onShuffleClick(){this.props.dispatch({type:Or})}onSaveClick(){const{dispatch:t,state:n}=this.props;this.canSave&&n.newGameSelectedUsers&&t({type:dn,payload:n.newGameSelectedUsers.map(r=>r.id)})}onPlayerClick(t){this.props.dispatch({type:Wi,payload:t})}onClearClick(){this.props.dispatch({type:_r})}get canSave(){const{state:t}=this.props;return t.newGameSelectedUsers?t.newGameSelectedUsers.every(n=>n.id!==-1):!1}render(){const{state:t}=this.props;return!t.newGameSelectedUsers||t.newGameSelectedUsers.length!==4||t.loading.players?a.jsx(Te,{}):a.jsx(Ws,{east:t.newGameSelectedUsers[0].title,south:t.newGameSelectedUsers[1].title,west:t.newGameSelectedUsers[2].title,north:t.newGameSelectedUsers[3].title,canSave:this.canSave,onBackClick:this.onBackClick.bind(this),onShuffleClick:this.onShuffleClick.bind(this),onSaveClick:this.onSaveClick.bind(this),onClearClick:this.onClearClick.bind(this),onPlayerClick:this.onPlayerClick.bind(this)})}}class $s extends h.PureComponent{constructor(t){super(t),this.state={foundUsers:t.users}}onSearchChange(t){const n=this.props.users.filter(r=>r.title.toLocaleLowerCase().includes(t.toLocaleLowerCase()));this.setState({foundUsers:n})}render(){const{onUserClick:t,onBackClick:n}=this.props,{foundUsers:r}=this.state;return a.jsxs("div",{className:"page-search-player",children:[a.jsx(Nt,{onBackClick:n,showSearch:!0,onSearchChange:this.onSearchChange.bind(this)}),a.jsx("div",{className:"page-search-player__content",children:r.map(s=>a.jsx("div",{className:"page-search-player__name",onClick:()=>t(s),children:s.title},s.id))})]})}}const Js=Object.assign;function Zs(e){const t=e+"",n=t.indexOf("...");return n>=0&&(n<t.indexOf(")")||t.includes("arguments"))}function B(e,t){t||(t={});let n=t.vargs||Zs(e),r=Object.create(null),s=[],o=[],l=new WeakMap,c=function(O,N,U){return setTimeout(function(){if(U){N.splice(O,1),U.splice(O,1);return}N instanceof WeakMap?N.delete(O):delete N[O]},t.maxAge)},u=t.maxAge>0&&t.maxAge<1/0?c:0,f=t.equals?t.equals:function(O,N){return O===N},_=t.maxArgs,I=t.serializer,p,S;return e.length===1&&!t.equals&&!n?(p=function(O){const N=typeof O;if(!I&&(N==="object"&&O||N==="function")){let y;return l.get(O)||(!u||u(O,l),l.set(O,y=e.call(this,O)),y)}const U=N==="number"||N==="boolean"||O==null?O:N==="string"?JSON.stringify(O):I(O);return r[U]||(!u||u(U,r),r[U]=e.call(this,O))}.bind(this),S=1):p=function(){let O=_||arguments.length,N;for(N=s.length-1;N>=0;N--)if(!(!_&&s[N].length!==O)){for(let U=O-1;U>=0&&f(s[N][U],arguments[U]);U--)if(U===0)return o[N]}return N=s.length-(N+1),!u||u(N,o,s),o[N]=e.apply(this,s[N]=arguments)}.bind(this),p.clear=function(){l=new WeakMap,r=Object.create(null),s=[],o=[]},p.keys=function(){return S?null:s.slice()},p.values=function(){return S?null:o.slice()},p.keyValues=function(){return S?{primitives:Js({},r),objects:l}:null},p}const qs=-1,W={id:qs,title:"",tenhouId:"",ignoreSeating:!1};function Xs(e){var o;const t=[...e.allPlayers??[]],n=t.findIndex(l=>l.id==e.currentPlayerId),r=t.splice(n,1),s=t.filter(l=>e.newGameSelectedUsers&&!e.newGameSelectedUsers.map(c=>c.id).includes(l.id)).sort((l,c)=>l==c?0:l.title<c.title?-1:1);return[W,...r.length>0&&((o=e.newGameSelectedUsers)!=null&&o.map(l=>l.id).includes(r[0].id))?[]:r,...s]}const Qs=B(Xs);class ea extends h.Component{onUserClick(t){const{dispatch:n,state:r}=this.props;if(r.newGameSelectedPlayerSide){let s="";switch(r.newGameSelectedPlayerSide){case"東":s=Nr;break;case"南":s=Sr;break;case"西":s=Tr;break;case"北":s=gr;break}n({type:s,payload:t.id})}n({type:G})}onBackClick(){this.props.dispatch({type:G})}componentDidMount(){this.props.dispatch({type:Xe})}render(){const{state:t}=this.props,n=Qs(t)||[];return a.jsx($s,{users:n,onUserClick:this.onUserClick.bind(this),onBackClick:this.onBackClick.bind(this)})}}function ta(e,t,n,r,s,o,l){let c=[].concat(r),u=["東","南","西","北"];for(let O=1;O<e;O++)u=[u.pop()].concat(u);let f=0;for(;f<4+(t||0)&&c[0].id!==n;f++)c=c.slice(1).concat(c[0]),u=u.slice(1).concat(u[0]);const _=[!1,!1,!1,!1],I=(s??[]).map(O=>parseInt(O,10));c.forEach((O,N)=>{_[N]=I.includes(O.id)});const p=[!1,!1,!1,!1];c.forEach((O,N)=>{p[N]=o===O.id});const S=[!1,!1,!1,!1];return c.forEach((O,N)=>{S[N]=l===O.id}),{players:c,seating:u,roundOffset:f,riichi:_,chombo:p,pao:S}}const na=B(ta);var i=(e=>(e[e.__OPENHAND=-1]="__OPENHAND",e[e.TOITOI=1]="TOITOI",e[e.HONROTO=2]="HONROTO",e[e.SANANKOU=3]="SANANKOU",e[e.SANSHOKUDOUKOU=4]="SANSHOKUDOUKOU",e[e.SANKANTSU=5]="SANKANTSU",e[e.SUUKANTSU=6]="SUUKANTSU",e[e.SUUANKOU=7]="SUUANKOU",e[e.PINFU=8]="PINFU",e[e.IIPEIKOU=9]="IIPEIKOU",e[e.RYANPEIKOU=10]="RYANPEIKOU",e[e.SANSHOKUDOUJUN=11]="SANSHOKUDOUJUN",e[e.ITTSU=12]="ITTSU",e[e.YAKUHAI1=13]="YAKUHAI1",e[e.YAKUHAI2=14]="YAKUHAI2",e[e.YAKUHAI3=15]="YAKUHAI3",e[e.YAKUHAI4=16]="YAKUHAI4",e[e.SHOSANGEN=18]="SHOSANGEN",e[e.DAISANGEN=19]="DAISANGEN",e[e.SHOSUUSHII=20]="SHOSUUSHII",e[e.DAISUUSHII=21]="DAISUUSHII",e[e.TSUUIISOU=22]="TSUUIISOU",e[e.TANYAO=23]="TANYAO",e[e.CHANTA=24]="CHANTA",e[e.JUNCHAN=25]="JUNCHAN",e[e.CHINROTO=26]="CHINROTO",e[e.HONITSU=27]="HONITSU",e[e.CHINITSU=28]="CHINITSU",e[e.CHUURENPOUTO=29]="CHUURENPOUTO",e[e.RYUUIISOU=30]="RYUUIISOU",e[e.CHIITOITSU=31]="CHIITOITSU",e[e.KOKUSHIMUSOU=32]="KOKUSHIMUSOU",e[e.RIICHI=33]="RIICHI",e[e.DOUBLERIICHI=34]="DOUBLERIICHI",e[e.IPPATSU=35]="IPPATSU",e[e.MENZENTSUMO=36]="MENZENTSUMO",e[e.HAITEI=37]="HAITEI",e[e.RINSHANKAIHOU=38]="RINSHANKAIHOU",e[e.TENHOU=39]="TENHOU",e[e.CHIHOU=40]="CHIHOU",e[e.HOUTEI=41]="HOUTEI",e[e.CHANKAN=42]="CHANKAN",e[e.RENHOU=43]="RENHOU",e[e.OPENRIICHI=44]="OPENRIICHI",e))(i||{});const A=[{id:-1,yakuman:!1,name:e=>e._t("Opened hand"),shortName:e=>e._t("Opened hand")},{id:1,yakuman:!1,name:e=>e._t("Toitoi"),shortName:e=>e._t("Toitoi")},{id:2,yakuman:!1,name:e=>e._t("Honroutou"),shortName:e=>e._t("Honroutou")},{id:3,yakuman:!1,name:e=>e._t("Sanankou"),shortName:e=>e._t("Sanankou")},{id:5,yakuman:!1,name:e=>e._t("Sankantsu"),shortName:e=>e._t("Sankantsu")},{id:6,yakuman:!0,name:e=>e._t("Suukantsu"),shortName:e=>e._t("Suukantsu")},{id:7,yakuman:!0,name:e=>e._t("Suuankou"),shortName:e=>e._t("Suuankou")},{id:8,yakuman:!1,name:e=>e._t("Pinfu"),shortName:e=>e._t("Pinfu")},{id:9,yakuman:!1,name:e=>e._t("Iipeikou"),shortName:e=>e._t("Iipeikou")},{id:10,yakuman:!1,name:e=>e._t("Ryanpeikou"),shortName:e=>e._t("Ryanpeikou")},{id:11,yakuman:!1,name:e=>e._t("Sanshoku"),shortName:e=>e._t("Sanshoku")},{id:4,yakuman:!1,name:e=>e._t("Sanshoku doukou"),shortName:e=>e._t("Sanshoku doukou")},{id:12,yakuman:!1,name:e=>e._t("Ittsu"),shortName:e=>e._t("Ittsu")},{id:13,yakuman:!1,name:e=>e._t("Yakuhai x1"),shortName:e=>e._t("Yakuhai")},{id:14,yakuman:!1,name:e=>e._t("Yakuhai x2"),shortName:e=>e._t("x2")},{id:15,yakuman:!1,name:e=>e._t("Yakuhai x3"),shortName:e=>e._t("x3")},{id:16,yakuman:!1,name:e=>e._t("Yakuhai x4"),shortName:e=>e._t("x4")},{id:18,yakuman:!1,name:e=>e._t("Shousangen"),shortName:e=>e._t("Shousangen")},{id:19,yakuman:!0,name:e=>e._t("Daisangen"),shortName:e=>e._t("Daisangen")},{id:20,yakuman:!0,name:e=>e._t("Shousuushii"),shortName:e=>e._t("Shousuushii")},{id:21,yakuman:!0,name:e=>e._t("Daisuushii"),shortName:e=>e._t("Daisuushii")},{id:22,yakuman:!0,name:e=>e._t("Tsuuiisou"),shortName:e=>e._t("Tsuuiisou")},{id:23,yakuman:!1,name:e=>e._t("Tanyao"),shortName:e=>e._t("Tanyao")},{id:24,yakuman:!1,name:e=>e._t("Chanta"),shortName:e=>e._t("Chanta")},{id:25,yakuman:!1,name:e=>e._t("Junchan"),shortName:e=>e._t("Junchan")},{id:26,yakuman:!0,name:e=>e._t("Chinroutou"),shortName:e=>e._t("Chinroutou")},{id:27,yakuman:!1,name:e=>e._t("Honitsu"),shortName:e=>e._t("Honitsu")},{id:28,yakuman:!1,name:e=>e._t("Chinitsu"),shortName:e=>e._t("Chinitsu")},{id:29,yakuman:!0,name:e=>e._t("Chuuren poutou"),shortName:e=>e._t("Chuuren poutou")},{id:30,yakuman:!0,name:e=>e._t("Ryuuiisou"),shortName:e=>e._t("Ryuuiisou")},{id:31,yakuman:!1,name:e=>e._t("Chiitoitsu"),shortName:e=>e._t("Chiitoitsu")},{id:32,yakuman:!0,name:e=>e._t("Kokushi musou"),shortName:e=>e._t("Kokushi musou")},{id:33,yakuman:!1,name:e=>e._t("Riichi"),shortName:e=>e._t("Riichi")},{id:34,yakuman:!1,name:e=>e._t("Daburu riichi"),shortName:e=>e._t("Daburu")},{id:35,yakuman:!1,name:e=>e._t("Ippatsu"),shortName:e=>e._t("Ippatsu")},{id:36,yakuman:!1,name:e=>e._t("Menzentsumo"),shortName:e=>e._t("Menzentsumo")},{id:37,yakuman:!1,name:e=>e._t("Haitei"),shortName:e=>e._t("Haitei")},{id:38,yakuman:!1,name:e=>e._t("Rinshan kaihou"),shortName:e=>e._t("Rinshan")},{id:39,yakuman:!0,name:e=>e._t("Tenhou"),shortName:e=>e._t("Tenhou")},{id:40,yakuman:!0,name:e=>e._t("Chiihou"),shortName:e=>e._t("Chiihou")},{id:41,yakuman:!1,name:e=>e._t("Houtei raoyui"),shortName:e=>e._t("Houtei")},{id:42,yakuman:!1,name:e=>e._t("Chankan"),shortName:e=>e._t("Chankan")},{id:43,yakuman:!1,name:e=>e._t("Renhou"),shortName:e=>e._t("Renhou")},{id:44,yakuman:!1,name:e=>e._t("Open riichi"),shortName:e=>e._t("Open riichi")}],Dr={};A.forEach(e=>Dr[e.id]=e);var ut=(e=>(e[e.Combines=1]="Combines",e[e.Suppresses=2]="Suppresses",e[e.IsSuppressed=3]="IsSuppressed",e))(ut||{});class ia{constructor(){E(this,"_nodes",{});E(this,"_edges",{})}_edgeId(t,n){return`${t}->${n}`}addNode(t){return this._nodes[t.id.toString()]||(this._nodes[t.id.toString()]=t),this}getNodeById(t){return this._nodes[t.toString()]||null}addBiEdge(t,n,r){return this.addEdge(t,n,r),this.addEdge(n,t,r),this}addEdge(t,n,r){return this._edges[this._edgeId(t.id.toString(),n.id.toString())]=r,this}edgeExists(t,n){return this._edges[this._edgeId(t.id.toString(),n.id.toString())]!==void 0}_isClique(t){for(let n=0;n<t.length;n++)for(let r=n+1;r<t.length;r++)if(!this.edgeExists(t[n],t[r])||!this.edgeExists(t[r],t[n]))return!1;return!0}tryAddAllowedNode(t,n){const r=[n].concat(t);if(!this._isClique(r))throw new Error("Node list is not a valid clique of this graph after addition of new node");const s=[];for(let l=0;l<r.length;l++)for(let c=l+1;c<r.length;c++)switch(this._edges[this._edgeId(r[l].id.toString(),r[c].id.toString())]){case 2:s.push(r[c]);break;case 3:s.push(r[l]);break}if(s.length===0)return r;const o=[];for(const l of r)s.includes(l)||o.push(l);return o}getAllowedNodes(t){if(!this._isClique(t))throw new Error("Node list is not a valid clique of this graph");const n=[],r={};for(const o of t)r[o.id.toString()]=o;for(const o in this._nodes)r[this._nodes[o].id.toString()]||n.push(this._nodes[o]);return n.filter(o=>this._isClique([o].concat(t))).filter(o=>{for(const l of t)if(this._edges[this._edgeId(l.id.toString(),o.id.toString())]===2)return!1;return!0})}}const ra=[i.TOITOI,i.HONROTO,i.SANANKOU,i.SANSHOKUDOUKOU,i.SANKANTSU,i.PINFU,i.IIPEIKOU,i.RYANPEIKOU,i.SANSHOKUDOUJUN,i.ITTSU,i.YAKUHAI1,i.YAKUHAI2,i.YAKUHAI3,i.YAKUHAI4,i.SHOSANGEN,i.TANYAO,i.CHANTA,i.JUNCHAN,i.HONITSU,i.CHINITSU,i.CHIITOITSU,i.RIICHI,i.DOUBLERIICHI,i.IPPATSU,i.MENZENTSUMO,i.HAITEI,i.RINSHANKAIHOU,i.HOUTEI,i.CHANKAN,i.OPENRIICHI],hi=[i.SUUKANTSU,i.SUUANKOU,i.DAISANGEN,i.SHOSUUSHII,i.DAISUUSHII,i.TSUUIISOU,i.CHINROTO,i.CHUURENPOUTO,i.RYUUIISOU,i.KOKUSHIMUSOU,i.TENHOU,i.CHIHOU,i.RENHOU],sa=[[i.HONROTO,i.CHANTA],[i.RYANPEIKOU,i.IIPEIKOU],[i.YAKUHAI2,i.YAKUHAI1],[i.YAKUHAI3,i.YAKUHAI2],[i.YAKUHAI3,i.YAKUHAI1],[i.YAKUHAI4,i.YAKUHAI3],[i.YAKUHAI4,i.YAKUHAI2],[i.YAKUHAI4,i.YAKUHAI1],[i.JUNCHAN,i.CHANTA],[i.CHINITSU,i.HONITSU],[i.CHIITOITSU,i.IIPEIKOU],[i.RYANPEIKOU,i.CHIITOITSU],[i.DOUBLERIICHI,i.RIICHI],[i.DAISUUSHII,i.SHOSUUSHII],[i.__OPENHAND,i.CHIITOITSU],[i.__OPENHAND,i.CHUURENPOUTO],[i.__OPENHAND,i.DOUBLERIICHI],[i.__OPENHAND,i.IIPEIKOU],[i.__OPENHAND,i.IPPATSU],[i.__OPENHAND,i.KOKUSHIMUSOU],[i.__OPENHAND,i.OPENRIICHI],[i.__OPENHAND,i.PINFU],[i.__OPENHAND,i.RIICHI],[i.__OPENHAND,i.RYANPEIKOU],[i.__OPENHAND,i.SUUANKOU]].concat(hi.map(e=>ra.map(t=>[e,t])).reduce((e,t)=>e.concat(t))),aa=[[i.__OPENHAND,i.TOITOI],[i.__OPENHAND,i.HONROTO],[i.__OPENHAND,i.SANANKOU],[i.__OPENHAND,i.SANSHOKUDOUKOU],[i.__OPENHAND,i.SANKANTSU],[i.__OPENHAND,i.SUUKANTSU],[i.__OPENHAND,i.SANSHOKUDOUJUN],[i.__OPENHAND,i.ITTSU],[i.__OPENHAND,i.YAKUHAI1],[i.__OPENHAND,i.YAKUHAI2],[i.__OPENHAND,i.YAKUHAI3],[i.__OPENHAND,i.YAKUHAI4],[i.__OPENHAND,i.SHOSANGEN],[i.__OPENHAND,i.DAISANGEN],[i.__OPENHAND,i.SHOSUUSHII],[i.__OPENHAND,i.DAISUUSHII],[i.__OPENHAND,i.TSUUIISOU],[i.__OPENHAND,i.TANYAO],[i.__OPENHAND,i.CHANTA],[i.__OPENHAND,i.JUNCHAN],[i.__OPENHAND,i.CHINROTO],[i.__OPENHAND,i.HONITSU],[i.__OPENHAND,i.CHINITSU],[i.__OPENHAND,i.RYUUIISOU],[i.__OPENHAND,i.HAITEI],[i.__OPENHAND,i.RINSHANKAIHOU],[i.__OPENHAND,i.HOUTEI],[i.__OPENHAND,i.CHANKAN],[i.__OPENHAND,i.MENZENTSUMO],[i.TOITOI,i.HONROTO],[i.TOITOI,i.SANANKOU],[i.TOITOI,i.SANSHOKUDOUKOU],[i.TOITOI,i.SANKANTSU],[i.TOITOI,i.YAKUHAI1],[i.TOITOI,i.YAKUHAI2],[i.TOITOI,i.YAKUHAI3],[i.TOITOI,i.YAKUHAI4],[i.TOITOI,i.SHOSANGEN],[i.TOITOI,i.TANYAO],[i.TOITOI,i.HONITSU],[i.TOITOI,i.CHINITSU],[i.TOITOI,i.RIICHI],[i.TOITOI,i.DOUBLERIICHI],[i.TOITOI,i.IPPATSU],[i.TOITOI,i.HAITEI],[i.TOITOI,i.RINSHANKAIHOU],[i.TOITOI,i.HOUTEI],[i.TOITOI,i.OPENRIICHI],[i.HONROTO,i.SANANKOU],[i.HONROTO,i.SANSHOKUDOUKOU],[i.HONROTO,i.SANKANTSU],[i.HONROTO,i.YAKUHAI1],[i.HONROTO,i.YAKUHAI2],[i.HONROTO,i.YAKUHAI3],[i.HONROTO,i.YAKUHAI4],[i.HONROTO,i.SHOSANGEN],[i.HONROTO,i.HONITSU],[i.HONROTO,i.CHIITOITSU],[i.HONROTO,i.RIICHI],[i.HONROTO,i.DOUBLERIICHI],[i.HONROTO,i.MENZENTSUMO],[i.HONROTO,i.IPPATSU],[i.HONROTO,i.HAITEI],[i.HONROTO,i.RINSHANKAIHOU],[i.HONROTO,i.HOUTEI],[i.HONROTO,i.OPENRIICHI],[i.SANANKOU,i.SANSHOKUDOUKOU],[i.SANANKOU,i.SANKANTSU],[i.SANANKOU,i.YAKUHAI1],[i.SANANKOU,i.YAKUHAI2],[i.SANANKOU,i.YAKUHAI3],[i.SANANKOU,i.YAKUHAI4],[i.SANANKOU,i.SHOSANGEN],[i.SANANKOU,i.TANYAO],[i.SANANKOU,i.HONITSU],[i.SANANKOU,i.CHINITSU],[i.SANANKOU,i.RIICHI],[i.SANANKOU,i.IPPATSU],[i.SANANKOU,i.DOUBLERIICHI],[i.SANANKOU,i.MENZENTSUMO],[i.SANANKOU,i.HAITEI],[i.SANANKOU,i.RINSHANKAIHOU],[i.SANANKOU,i.HOUTEI],[i.SANANKOU,i.CHANKAN],[i.SANANKOU,i.OPENRIICHI],[i.SANANKOU,i.CHANTA],[i.SANANKOU,i.JUNCHAN],[i.SANSHOKUDOUKOU,i.SANKANTSU],[i.SANSHOKUDOUKOU,i.YAKUHAI1],[i.SANSHOKUDOUKOU,i.YAKUHAI2],[i.SANSHOKUDOUKOU,i.TANYAO],[i.SANSHOKUDOUKOU,i.CHANTA],[i.SANSHOKUDOUKOU,i.JUNCHAN],[i.SANSHOKUDOUKOU,i.RIICHI],[i.SANSHOKUDOUKOU,i.DOUBLERIICHI],[i.SANSHOKUDOUKOU,i.IPPATSU],[i.SANSHOKUDOUKOU,i.MENZENTSUMO],[i.SANSHOKUDOUKOU,i.HAITEI],[i.SANSHOKUDOUKOU,i.RINSHANKAIHOU],[i.SANSHOKUDOUKOU,i.HOUTEI],[i.SANSHOKUDOUKOU,i.CHANKAN],[i.SANSHOKUDOUKOU,i.OPENRIICHI],[i.SANKANTSU,i.YAKUHAI1],[i.SANKANTSU,i.YAKUHAI2],[i.SANKANTSU,i.YAKUHAI3],[i.SANKANTSU,i.YAKUHAI4],[i.SANKANTSU,i.SHOSANGEN],[i.SANKANTSU,i.TANYAO],[i.SANKANTSU,i.HONITSU],[i.SANKANTSU,i.CHINITSU],[i.SANKANTSU,i.RIICHI],[i.SANKANTSU,i.DOUBLERIICHI],[i.SANKANTSU,i.IPPATSU],[i.SANKANTSU,i.MENZENTSUMO],[i.SANKANTSU,i.HAITEI],[i.SANKANTSU,i.RINSHANKAIHOU],[i.SANKANTSU,i.HOUTEI],[i.SANKANTSU,i.CHANKAN],[i.SANKANTSU,i.CHANTA],[i.SANKANTSU,i.JUNCHAN],[i.SANKANTSU,i.OPENRIICHI],[i.PINFU,i.IIPEIKOU],[i.PINFU,i.RYANPEIKOU],[i.PINFU,i.SANSHOKUDOUJUN],[i.PINFU,i.ITTSU],[i.PINFU,i.TANYAO],[i.PINFU,i.CHANTA],[i.PINFU,i.JUNCHAN],[i.PINFU,i.HONITSU],[i.PINFU,i.CHINITSU],[i.PINFU,i.RIICHI],[i.PINFU,i.DOUBLERIICHI],[i.PINFU,i.IPPATSU],[i.PINFU,i.MENZENTSUMO],[i.PINFU,i.HAITEI],[i.PINFU,i.HOUTEI],[i.PINFU,i.CHANKAN],[i.PINFU,i.OPENRIICHI],[i.IIPEIKOU,i.SANSHOKUDOUJUN],[i.IIPEIKOU,i.ITTSU],[i.IIPEIKOU,i.YAKUHAI1],[i.IIPEIKOU,i.YAKUHAI2],[i.IIPEIKOU,i.TANYAO],[i.IIPEIKOU,i.CHANTA],[i.IIPEIKOU,i.JUNCHAN],[i.IIPEIKOU,i.HONITSU],[i.IIPEIKOU,i.CHINITSU],[i.IIPEIKOU,i.RIICHI],[i.IIPEIKOU,i.DOUBLERIICHI],[i.IIPEIKOU,i.IPPATSU],[i.IIPEIKOU,i.MENZENTSUMO],[i.IIPEIKOU,i.HAITEI],[i.IIPEIKOU,i.RINSHANKAIHOU],[i.IIPEIKOU,i.HOUTEI],[i.IIPEIKOU,i.CHANKAN],[i.IIPEIKOU,i.OPENRIICHI],[i.IIPEIKOU,i.SHOSANGEN],[i.RYANPEIKOU,i.TANYAO],[i.RYANPEIKOU,i.CHANTA],[i.RYANPEIKOU,i.JUNCHAN],[i.RYANPEIKOU,i.HONITSU],[i.RYANPEIKOU,i.CHINITSU],[i.RYANPEIKOU,i.RIICHI],[i.RYANPEIKOU,i.DOUBLERIICHI],[i.RYANPEIKOU,i.IPPATSU],[i.RYANPEIKOU,i.MENZENTSUMO],[i.RYANPEIKOU,i.HAITEI],[i.RYANPEIKOU,i.HOUTEI],[i.RYANPEIKOU,i.OPENRIICHI],[i.SANSHOKUDOUJUN,i.YAKUHAI1],[i.SANSHOKUDOUJUN,i.YAKUHAI2],[i.SANSHOKUDOUJUN,i.TANYAO],[i.SANSHOKUDOUJUN,i.CHANTA],[i.SANSHOKUDOUJUN,i.JUNCHAN],[i.SANSHOKUDOUJUN,i.RIICHI],[i.SANSHOKUDOUJUN,i.DOUBLERIICHI],[i.SANSHOKUDOUJUN,i.IPPATSU],[i.SANSHOKUDOUJUN,i.MENZENTSUMO],[i.SANSHOKUDOUJUN,i.HAITEI],[i.SANSHOKUDOUJUN,i.RINSHANKAIHOU],[i.SANSHOKUDOUJUN,i.HOUTEI],[i.SANSHOKUDOUJUN,i.CHANKAN],[i.SANSHOKUDOUJUN,i.OPENRIICHI],[i.ITTSU,i.YAKUHAI1],[i.ITTSU,i.YAKUHAI2],[i.ITTSU,i.HONITSU],[i.ITTSU,i.CHINITSU],[i.ITTSU,i.RIICHI],[i.ITTSU,i.DOUBLERIICHI],[i.ITTSU,i.IPPATSU],[i.ITTSU,i.MENZENTSUMO],[i.ITTSU,i.HAITEI],[i.ITTSU,i.RINSHANKAIHOU],[i.ITTSU,i.HOUTEI],[i.ITTSU,i.CHANKAN],[i.ITTSU,i.OPENRIICHI],[i.YAKUHAI1,i.CHANTA],[i.YAKUHAI1,i.HONITSU],[i.YAKUHAI1,i.RIICHI],[i.YAKUHAI1,i.DOUBLERIICHI],[i.YAKUHAI1,i.IPPATSU],[i.YAKUHAI1,i.MENZENTSUMO],[i.YAKUHAI1,i.HAITEI],[i.YAKUHAI1,i.RINSHANKAIHOU],[i.YAKUHAI1,i.HOUTEI],[i.YAKUHAI1,i.CHANKAN],[i.YAKUHAI1,i.OPENRIICHI],[i.YAKUHAI2,i.SHOSANGEN],[i.YAKUHAI2,i.CHANTA],[i.YAKUHAI2,i.HONITSU],[i.YAKUHAI2,i.RIICHI],[i.YAKUHAI2,i.DOUBLERIICHI],[i.YAKUHAI2,i.IPPATSU],[i.YAKUHAI2,i.MENZENTSUMO],[i.YAKUHAI2,i.HAITEI],[i.YAKUHAI2,i.RINSHANKAIHOU],[i.YAKUHAI2,i.HOUTEI],[i.YAKUHAI2,i.CHANKAN],[i.YAKUHAI2,i.OPENRIICHI],[i.YAKUHAI3,i.SHOSANGEN],[i.YAKUHAI3,i.CHANTA],[i.YAKUHAI3,i.HONITSU],[i.YAKUHAI3,i.RIICHI],[i.YAKUHAI3,i.DOUBLERIICHI],[i.YAKUHAI3,i.IPPATSU],[i.YAKUHAI3,i.MENZENTSUMO],[i.YAKUHAI3,i.HAITEI],[i.YAKUHAI3,i.RINSHANKAIHOU],[i.YAKUHAI3,i.HOUTEI],[i.YAKUHAI3,i.CHANKAN],[i.YAKUHAI3,i.OPENRIICHI],[i.YAKUHAI4,i.SHOSANGEN],[i.YAKUHAI4,i.CHANTA],[i.YAKUHAI4,i.HONITSU],[i.YAKUHAI4,i.RIICHI],[i.YAKUHAI4,i.DOUBLERIICHI],[i.YAKUHAI4,i.IPPATSU],[i.YAKUHAI4,i.MENZENTSUMO],[i.YAKUHAI4,i.HAITEI],[i.YAKUHAI4,i.RINSHANKAIHOU],[i.YAKUHAI4,i.HOUTEI],[i.YAKUHAI4,i.CHANKAN],[i.YAKUHAI4,i.OPENRIICHI],[i.SHOSANGEN,i.CHANTA],[i.SHOSANGEN,i.HONITSU],[i.SHOSANGEN,i.RIICHI],[i.SHOSANGEN,i.DOUBLERIICHI],[i.SHOSANGEN,i.IPPATSU],[i.SHOSANGEN,i.MENZENTSUMO],[i.SHOSANGEN,i.HAITEI],[i.SHOSANGEN,i.RINSHANKAIHOU],[i.SHOSANGEN,i.HOUTEI],[i.SHOSANGEN,i.CHANKAN],[i.SHOSANGEN,i.OPENRIICHI],[i.TANYAO,i.CHINITSU],[i.TANYAO,i.CHIITOITSU],[i.TANYAO,i.RIICHI],[i.TANYAO,i.DOUBLERIICHI],[i.TANYAO,i.IPPATSU],[i.TANYAO,i.MENZENTSUMO],[i.TANYAO,i.HAITEI],[i.TANYAO,i.RINSHANKAIHOU],[i.TANYAO,i.HOUTEI],[i.TANYAO,i.CHANKAN],[i.TANYAO,i.OPENRIICHI],[i.CHANTA,i.HONITSU],[i.CHANTA,i.RIICHI],[i.CHANTA,i.DOUBLERIICHI],[i.CHANTA,i.IPPATSU],[i.CHANTA,i.MENZENTSUMO],[i.CHANTA,i.HAITEI],[i.CHANTA,i.RINSHANKAIHOU],[i.CHANTA,i.HOUTEI],[i.CHANTA,i.CHANKAN],[i.CHANTA,i.OPENRIICHI],[i.JUNCHAN,i.CHINITSU],[i.JUNCHAN,i.RIICHI],[i.JUNCHAN,i.DOUBLERIICHI],[i.JUNCHAN,i.IPPATSU],[i.JUNCHAN,i.MENZENTSUMO],[i.JUNCHAN,i.HAITEI],[i.JUNCHAN,i.RINSHANKAIHOU],[i.JUNCHAN,i.HOUTEI],[i.JUNCHAN,i.CHANKAN],[i.JUNCHAN,i.OPENRIICHI],[i.HONITSU,i.CHIITOITSU],[i.HONITSU,i.RIICHI],[i.HONITSU,i.DOUBLERIICHI],[i.HONITSU,i.IPPATSU],[i.HONITSU,i.MENZENTSUMO],[i.HONITSU,i.HAITEI],[i.HONITSU,i.RINSHANKAIHOU],[i.HONITSU,i.HOUTEI],[i.HONITSU,i.CHANKAN],[i.HONITSU,i.OPENRIICHI],[i.CHINITSU,i.CHIITOITSU],[i.CHINITSU,i.RIICHI],[i.CHINITSU,i.DOUBLERIICHI],[i.CHINITSU,i.IPPATSU],[i.CHINITSU,i.MENZENTSUMO],[i.CHINITSU,i.HAITEI],[i.CHINITSU,i.RINSHANKAIHOU],[i.CHINITSU,i.HOUTEI],[i.CHINITSU,i.CHANKAN],[i.CHINITSU,i.OPENRIICHI],[i.CHIITOITSU,i.RIICHI],[i.CHIITOITSU,i.DOUBLERIICHI],[i.CHIITOITSU,i.IPPATSU],[i.CHIITOITSU,i.MENZENTSUMO],[i.CHIITOITSU,i.HAITEI],[i.CHIITOITSU,i.HOUTEI],[i.CHIITOITSU,i.OPENRIICHI],[i.RIICHI,i.IPPATSU],[i.RIICHI,i.MENZENTSUMO],[i.RIICHI,i.HAITEI],[i.RIICHI,i.RINSHANKAIHOU],[i.RIICHI,i.HOUTEI],[i.RIICHI,i.CHANKAN],[i.RIICHI,i.OPENRIICHI],[i.DOUBLERIICHI,i.IPPATSU],[i.DOUBLERIICHI,i.MENZENTSUMO],[i.DOUBLERIICHI,i.HAITEI],[i.DOUBLERIICHI,i.RINSHANKAIHOU],[i.DOUBLERIICHI,i.HOUTEI],[i.DOUBLERIICHI,i.CHANKAN],[i.DOUBLERIICHI,i.OPENRIICHI],[i.IPPATSU,i.MENZENTSUMO],[i.IPPATSU,i.HAITEI],[i.IPPATSU,i.CHANKAN],[i.IPPATSU,i.OPENRIICHI],[i.MENZENTSUMO,i.HAITEI],[i.MENZENTSUMO,i.RINSHANKAIHOU],[i.MENZENTSUMO,i.OPENRIICHI],[i.HAITEI,i.OPENRIICHI],[i.RINSHANKAIHOU,i.OPENRIICHI]],oa=[[i.SUUKANTSU,i.SUUANKOU],[i.SUUKANTSU,i.DAISANGEN],[i.SUUKANTSU,i.SHOSUUSHII],[i.SUUKANTSU,i.DAISUUSHII],[i.SUUKANTSU,i.TSUUIISOU],[i.SUUKANTSU,i.CHINROTO],[i.SUUKANTSU,i.RYUUIISOU],[i.SUUANKOU,i.DAISANGEN],[i.SUUANKOU,i.SHOSUUSHII],[i.SUUANKOU,i.DAISUUSHII],[i.SUUANKOU,i.TSUUIISOU],[i.SUUANKOU,i.CHINROTO],[i.SUUANKOU,i.RYUUIISOU],[i.SUUANKOU,i.TENHOU],[i.SUUANKOU,i.CHIHOU],[i.DAISANGEN,i.TSUUIISOU],[i.DAISANGEN,i.TENHOU],[i.DAISANGEN,i.CHIHOU],[i.SHOSUUSHII,i.TSUUIISOU],[i.SHOSUUSHII,i.TENHOU],[i.SHOSUUSHII,i.CHIHOU],[i.DAISUUSHII,i.TSUUIISOU],[i.DAISUUSHII,i.TENHOU],[i.DAISUUSHII,i.CHIHOU],[i.TSUUIISOU,i.TENHOU],[i.TSUUIISOU,i.CHIHOU],[i.CHINROTO,i.TENHOU],[i.CHINROTO,i.CHIHOU],[i.CHUURENPOUTO,i.TENHOU],[i.CHUURENPOUTO,i.CHIHOU],[i.RYUUIISOU,i.TENHOU],[i.RYUUIISOU,i.CHIHOU],[i.KOKUSHIMUSOU,i.TENHOU],[i.KOKUSHIMUSOU,i.CHIHOU],[i.CHUURENPOUTO,i.TENHOU],[i.CHUURENPOUTO,i.CHIHOU]],$={};for(const e of A)$[e.id]={id:e.id,data:e};function la(e=!1){const t=new ia;for(const n of A)t.addNode($[n.id]);for(const n of aa)t.addBiEdge($[n[0]],$[n[1]],ut.Combines);if(e)for(const n of oa)t.addBiEdge($[n[0]],$[n[1]],ut.Combines);for(const n of sa)t.addEdge($[n[0]],$[n[1]],ut.Suppresses),t.addEdge($[n[1]],$[n[0]],ut.IsSuppressed);return t}function ca(e,t,n){return e.tryAddAllowedNode(n.map(r=>$[r]),$[t]).map(r=>r.data.id)}function mi(e,t){return e?e.getAllowedNodes(t.map(n=>$[n])).map(n=>n.data.id):[]}function Pr(e){return A.reduce((t,n)=>t+(e.includes(n.id)?"+":"."),"")}function ee(e){let t=0;return A.reduce((n,r)=>e[t++]==="+"?n.concat(r.id):n,[])}const Tt={TOURNAMENT_GAMES_STATUS_UNSPECIFIED:"TOURNAMENT_GAMES_STATUS_UNSPECIFIED",TOURNAMENT_GAMES_STATUS_SEATING_READY:"TOURNAMENT_GAMES_STATUS_SEATING_READY",TOURNAMENT_GAMES_STATUS_STARTED:"TOURNAMENT_GAMES_STATUS_STARTED",_fromInt:function(e){switch(e){case 0:return"TOURNAMENT_GAMES_STATUS_UNSPECIFIED";case 1:return"TOURNAMENT_GAMES_STATUS_SEATING_READY";case 2:return"TOURNAMENT_GAMES_STATUS_STARTED";default:return e}},_toInt:function(e){switch(e){case"TOURNAMENT_GAMES_STATUS_UNSPECIFIED":return 0;case"TOURNAMENT_GAMES_STATUS_SEATING_READY":return 1;case"TOURNAMENT_GAMES_STATUS_STARTED":return 2;default:return e}}},d={ROUND_OUTCOME_UNSPECIFIED:"ROUND_OUTCOME_UNSPECIFIED",ROUND_OUTCOME_RON:"ROUND_OUTCOME_RON",ROUND_OUTCOME_TSUMO:"ROUND_OUTCOME_TSUMO",ROUND_OUTCOME_DRAW:"ROUND_OUTCOME_DRAW",ROUND_OUTCOME_ABORT:"ROUND_OUTCOME_ABORT",ROUND_OUTCOME_CHOMBO:"ROUND_OUTCOME_CHOMBO",ROUND_OUTCOME_NAGASHI:"ROUND_OUTCOME_NAGASHI",ROUND_OUTCOME_MULTIRON:"ROUND_OUTCOME_MULTIRON",_fromInt:function(e){switch(e){case 0:return"ROUND_OUTCOME_UNSPECIFIED";case 1:return"ROUND_OUTCOME_RON";case 2:return"ROUND_OUTCOME_TSUMO";case 3:return"ROUND_OUTCOME_DRAW";case 4:return"ROUND_OUTCOME_ABORT";case 5:return"ROUND_OUTCOME_CHOMBO";case 6:return"ROUND_OUTCOME_NAGASHI";case 7:return"ROUND_OUTCOME_MULTIRON";default:return e}},_toInt:function(e){switch(e){case"ROUND_OUTCOME_UNSPECIFIED":return 0;case"ROUND_OUTCOME_RON":return 1;case"ROUND_OUTCOME_TSUMO":return 2;case"ROUND_OUTCOME_DRAW":return 3;case"ROUND_OUTCOME_ABORT":return 4;case"ROUND_OUTCOME_CHOMBO":return 5;case"ROUND_OUTCOME_NAGASHI":return 6;case"ROUND_OUTCOME_MULTIRON":return 7;default:return e}}},dt={SESSION_STATUS_UNSPECIFIED:"SESSION_STATUS_UNSPECIFIED",SESSION_STATUS_INPROGRESS:"SESSION_STATUS_INPROGRESS",SESSION_STATUS_PREFINISHED:"SESSION_STATUS_PREFINISHED",SESSION_STATUS_FINISHED:"SESSION_STATUS_FINISHED",SESSION_STATUS_CANCELLED:"SESSION_STATUS_CANCELLED",SESSION_STATUS_PLANNED:"SESSION_STATUS_PLANNED",_fromInt:function(e){switch(e){case 0:return"SESSION_STATUS_UNSPECIFIED";case 1:return"SESSION_STATUS_INPROGRESS";case 2:return"SESSION_STATUS_PREFINISHED";case 3:return"SESSION_STATUS_FINISHED";case 4:return"SESSION_STATUS_CANCELLED";case 5:return"SESSION_STATUS_PLANNED";default:return e}},_toInt:function(e){switch(e){case"SESSION_STATUS_UNSPECIFIED":return 0;case"SESSION_STATUS_INPROGRESS":return 1;case"SESSION_STATUS_PREFINISHED":return 2;case"SESSION_STATUS_FINISHED":return 3;case"SESSION_STATUS_CANCELLED":return 4;case"SESSION_STATUS_PLANNED":return 5;default:return e}}},gt={UMA_TYPE_UNSPECIFIED:"UMA_TYPE_UNSPECIFIED",UMA_TYPE_UMA_SIMPLE:"UMA_TYPE_UMA_SIMPLE",UMA_TYPE_UMA_COMPLEX:"UMA_TYPE_UMA_COMPLEX",_fromInt:function(e){switch(e){case 0:return"UMA_TYPE_UNSPECIFIED";case 1:return"UMA_TYPE_UMA_SIMPLE";case 2:return"UMA_TYPE_UMA_COMPLEX";default:return e}},_toInt:function(e){switch(e){case"UMA_TYPE_UNSPECIFIED":return 0;case"UMA_TYPE_UMA_SIMPLE":return 1;case"UMA_TYPE_UMA_COMPLEX":return 2;default:return e}}},Et={ENDING_POLICY_EP_UNSPECIFIED:"ENDING_POLICY_EP_UNSPECIFIED",ENDING_POLICY_EP_ONE_MORE_HAND:"ENDING_POLICY_EP_ONE_MORE_HAND",ENDING_POLICY_EP_END_AFTER_HAND:"ENDING_POLICY_EP_END_AFTER_HAND",_fromInt:function(e){switch(e){case 0:return"ENDING_POLICY_EP_UNSPECIFIED";case 1:return"ENDING_POLICY_EP_ONE_MORE_HAND";case 2:return"ENDING_POLICY_EP_END_AFTER_HAND";default:return e}},_toInt:function(e){switch(e){case"ENDING_POLICY_EP_UNSPECIFIED":return 0;case"ENDING_POLICY_EP_ONE_MORE_HAND":return 1;case"ENDING_POLICY_EP_END_AFTER_HAND":return 2;default:return e}}},we={encode:function(e){return we._writeMessage(e,new T).getResultBuffer()},decode:function(e){return we._readMessage(we.initialize(),new g(e))},initialize:function(){return{id:0,city:"",tenhouId:"",title:"",country:"",email:"",phone:"",groups:[]}},_writeMessage:function(e,t){var n;return e.id&&t.writeInt32(1,e.id),e.city&&t.writeString(2,e.city),e.tenhouId&&t.writeString(3,e.tenhouId),e.title&&t.writeString(4,e.title),e.country&&t.writeString(5,e.country),e.email&&t.writeString(6,e.email),e.phone&&t.writeString(7,e.phone),(n=e.groups)!=null&&n.length&&t.writePackedInt32(8,e.groups),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.id=t.readInt32();break}case 2:{e.city=t.readString();break}case 3:{e.tenhouId=t.readString();break}case 4:{e.title=t.readString();break}case 5:{e.country=t.readString();break}case 6:{e.email=t.readString();break}case 7:{e.phone=t.readString();break}case 8:{t.isDelimited()?e.groups.push(...t.readPackedInt32()):e.groups.push(t.readInt32());break}default:{t.skipField();break}}return e}},Re={encode:function(e){return Re._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Re._readMessage(Re.initialize(),new g(e))},initialize:function(){return{id:0,title:"",description:"",isOnline:!1}},_writeMessage:function(e,t){return e.id&&t.writeInt32(1,e.id),e.title&&t.writeString(2,e.title),e.description&&t.writeString(3,e.description),e.isOnline&&t.writeBool(4,e.isOnline),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.id=t.readInt32();break}case 2:{e.title=t.readString();break}case 3:{e.description=t.readString();break}case 4:{e.isOnline=t.readBool();break}default:{t.skipField();break}}return e}},mt={encode:function(e){return mt._writeMessage(e,new T).getResultBuffer()},decode:function(e){return mt._readMessage(mt.initialize(),new g(e))},initialize:function(){return{rulesetTitle:"",eventTitle:"",eventDescription:"",eventStatHost:"",useTimer:!1,usePenalty:!1,gameDuration:0,timezone:"",isOnline:!1,isTeam:!1,autoSeating:!1,syncStart:!1,syncEnd:!1,sortByGames:!1,allowPlayerAppend:!1,seriesLength:0,minGamesCount:0,gamesStatus:Tt._fromInt(0),hideResults:!1,hideAddReplayButton:!1,isPrescripted:!1,isFinished:!1,rulesetConfig:Ye.initialize(),lobbyId:0}},_writeMessage:function(e,t){return e.rulesetTitle&&t.writeString(10,e.rulesetTitle),e.eventTitle&&t.writeString(26,e.eventTitle),e.eventDescription&&t.writeString(27,e.eventDescription),e.eventStatHost&&t.writeString(28,e.eventStatHost),e.useTimer&&t.writeBool(29,e.useTimer),e.usePenalty&&t.writeBool(30,e.usePenalty),e.gameDuration&&t.writeInt32(34,e.gameDuration),e.timezone&&t.writeString(35,e.timezone),e.isOnline&&t.writeBool(36,e.isOnline),e.isTeam&&t.writeBool(37,e.isTeam),e.autoSeating&&t.writeBool(38,e.autoSeating),e.syncStart&&t.writeBool(39,e.syncStart),e.syncEnd&&t.writeBool(40,e.syncEnd),e.sortByGames&&t.writeBool(41,e.sortByGames),e.allowPlayerAppend&&t.writeBool(42,e.allowPlayerAppend),e.seriesLength&&t.writeInt32(45,e.seriesLength),e.minGamesCount&&t.writeInt32(46,e.minGamesCount),e.gamesStatus&&Tt._toInt(e.gamesStatus)&&t.writeEnum(47,Tt._toInt(e.gamesStatus)),e.hideResults&&t.writeBool(48,e.hideResults),e.hideAddReplayButton&&t.writeBool(49,e.hideAddReplayButton),e.isPrescripted&&t.writeBool(50,e.isPrescripted),e.isFinished&&t.writeBool(52,e.isFinished),e.rulesetConfig&&t.writeMessage(53,e.rulesetConfig,Ye._writeMessage),e.lobbyId&&t.writeInt32(54,e.lobbyId),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 10:{e.rulesetTitle=t.readString();break}case 26:{e.eventTitle=t.readString();break}case 27:{e.eventDescription=t.readString();break}case 28:{e.eventStatHost=t.readString();break}case 29:{e.useTimer=t.readBool();break}case 30:{e.usePenalty=t.readBool();break}case 34:{e.gameDuration=t.readInt32();break}case 35:{e.timezone=t.readString();break}case 36:{e.isOnline=t.readBool();break}case 37:{e.isTeam=t.readBool();break}case 38:{e.autoSeating=t.readBool();break}case 39:{e.syncStart=t.readBool();break}case 40:{e.syncEnd=t.readBool();break}case 41:{e.sortByGames=t.readBool();break}case 42:{e.allowPlayerAppend=t.readBool();break}case 45:{e.seriesLength=t.readInt32();break}case 46:{e.minGamesCount=t.readInt32();break}case 47:{e.gamesStatus=Tt._fromInt(t.readEnum());break}case 48:{e.hideResults=t.readBool();break}case 49:{e.hideAddReplayButton=t.readBool();break}case 50:{e.isPrescripted=t.readBool();break}case 52:{e.isFinished=t.readBool();break}case 53:{t.readMessage(e.rulesetConfig,Ye._readMessage);break}case 54:{e.lobbyId=t.readInt32();break}default:{t.skipField();break}}return e}},Q={encode:function(e){return Q._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Q._readMessage(Q.initialize(),new g(e))},initialize:function(){return{who:0,amount:0,reason:void 0}},_writeMessage:function(e,t){return e.who&&t.writeInt32(1,e.who),e.amount&&t.writeInt32(2,e.amount),e.reason!=null&&t.writeString(3,e.reason),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.who=t.readInt32();break}case 2:{e.amount=t.readInt32();break}case 3:{e.reason=t.readString();break}default:{t.skipField();break}}return e}},be={encode:function(e){return be._writeMessage(e,new T).getResultBuffer()},decode:function(e){return be._readMessage(be.initialize(),new g(e))},initialize:function(){return{roundIndex:0,honba:0,winnerId:0,loserId:0,paoPlayerId:0,han:0,fu:0,yaku:[],riichiBets:[],dora:0,uradora:0,kandora:0,kanuradora:0,openHand:!1}},_writeMessage:function(e,t){var n,r;return e.roundIndex&&t.writeInt32(1,e.roundIndex),e.honba&&t.writeInt32(2,e.honba),e.winnerId&&t.writeInt32(3,e.winnerId),e.loserId&&t.writeInt32(4,e.loserId),e.paoPlayerId&&t.writeInt32(5,e.paoPlayerId),e.han&&t.writeInt32(6,e.han),e.fu&&t.writeInt32(7,e.fu),(n=e.yaku)!=null&&n.length&&t.writePackedInt32(8,e.yaku),(r=e.riichiBets)!=null&&r.length&&t.writePackedInt32(9,e.riichiBets),e.dora&&t.writeInt32(10,e.dora),e.uradora&&t.writeInt32(11,e.uradora),e.kandora&&t.writeInt32(12,e.kandora),e.kanuradora&&t.writeInt32(13,e.kanuradora),e.openHand&&t.writeBool(14,e.openHand),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.roundIndex=t.readInt32();break}case 2:{e.honba=t.readInt32();break}case 3:{e.winnerId=t.readInt32();break}case 4:{e.loserId=t.readInt32();break}case 5:{e.paoPlayerId=t.readInt32();break}case 6:{e.han=t.readInt32();break}case 7:{e.fu=t.readInt32();break}case 8:{t.isDelimited()?e.yaku.push(...t.readPackedInt32()):e.yaku.push(t.readInt32());break}case 9:{t.isDelimited()?e.riichiBets.push(...t.readPackedInt32()):e.riichiBets.push(t.readInt32());break}case 10:{e.dora=t.readInt32();break}case 11:{e.uradora=t.readInt32();break}case 12:{e.kandora=t.readInt32();break}case 13:{e.kanuradora=t.readInt32();break}case 14:{e.openHand=t.readBool();break}default:{t.skipField();break}}return e}},ke={encode:function(e){return ke._writeMessage(e,new T).getResultBuffer()},decode:function(e){return ke._readMessage(ke.initialize(),new g(e))},initialize:function(){return{winnerId:0,paoPlayerId:0,han:0,fu:0,yaku:[],dora:0,uradora:0,kandora:0,kanuradora:0,openHand:!1}},_writeMessage:function(e,t){var n;return e.winnerId&&t.writeInt32(1,e.winnerId),e.paoPlayerId&&t.writeInt32(2,e.paoPlayerId),e.han&&t.writeInt32(3,e.han),e.fu&&t.writeInt32(4,e.fu),(n=e.yaku)!=null&&n.length&&t.writePackedInt32(5,e.yaku),e.dora&&t.writeInt32(6,e.dora),e.uradora&&t.writeInt32(7,e.uradora),e.kandora&&t.writeInt32(8,e.kandora),e.kanuradora&&t.writeInt32(9,e.kanuradora),e.openHand&&t.writeBool(10,e.openHand),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.winnerId=t.readInt32();break}case 2:{e.paoPlayerId=t.readInt32();break}case 3:{e.han=t.readInt32();break}case 4:{e.fu=t.readInt32();break}case 5:{t.isDelimited()?e.yaku.push(...t.readPackedInt32()):e.yaku.push(t.readInt32());break}case 6:{e.dora=t.readInt32();break}case 7:{e.uradora=t.readInt32();break}case 8:{e.kandora=t.readInt32();break}case 9:{e.kanuradora=t.readInt32();break}case 10:{e.openHand=t.readBool();break}default:{t.skipField();break}}return e}},He={encode:function(e){return He._writeMessage(e,new T).getResultBuffer()},decode:function(e){return He._readMessage(He.initialize(),new g(e))},initialize:function(){return{roundIndex:0,honba:0,loserId:0,multiRon:0,wins:[],riichiBets:[]}},_writeMessage:function(e,t){var n,r;return e.roundIndex&&t.writeInt32(1,e.roundIndex),e.honba&&t.writeInt32(2,e.honba),e.loserId&&t.writeInt32(3,e.loserId),e.multiRon&&t.writeInt32(4,e.multiRon),(n=e.wins)!=null&&n.length&&t.writeRepeatedMessage(5,e.wins,ke._writeMessage),(r=e.riichiBets)!=null&&r.length&&t.writePackedInt32(6,e.riichiBets),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.roundIndex=t.readInt32();break}case 2:{e.honba=t.readInt32();break}case 3:{e.loserId=t.readInt32();break}case 4:{e.multiRon=t.readInt32();break}case 5:{const r=ke.initialize();t.readMessage(r,ke._readMessage),e.wins.push(r);break}case 6:{t.isDelimited()?e.riichiBets.push(...t.readPackedInt32()):e.riichiBets.push(t.readInt32());break}default:{t.skipField();break}}return e}},Me={encode:function(e){return Me._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Me._readMessage(Me.initialize(),new g(e))},initialize:function(){return{roundIndex:0,honba:0,winnerId:0,paoPlayerId:0,han:0,fu:0,yaku:[],riichiBets:[],dora:0,uradora:0,kandora:0,kanuradora:0,openHand:!1}},_writeMessage:function(e,t){var n,r;return e.roundIndex&&t.writeInt32(1,e.roundIndex),e.honba&&t.writeInt32(2,e.honba),e.winnerId&&t.writeInt32(3,e.winnerId),e.paoPlayerId&&t.writeInt32(4,e.paoPlayerId),e.han&&t.writeInt32(5,e.han),e.fu&&t.writeInt32(6,e.fu),(n=e.yaku)!=null&&n.length&&t.writePackedInt32(7,e.yaku),(r=e.riichiBets)!=null&&r.length&&t.writePackedInt32(8,e.riichiBets),e.dora&&t.writeInt32(9,e.dora),e.uradora&&t.writeInt32(10,e.uradora),e.kandora&&t.writeInt32(11,e.kandora),e.kanuradora&&t.writeInt32(12,e.kanuradora),e.openHand&&t.writeBool(13,e.openHand),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.roundIndex=t.readInt32();break}case 2:{e.honba=t.readInt32();break}case 3:{e.winnerId=t.readInt32();break}case 4:{e.paoPlayerId=t.readInt32();break}case 5:{e.han=t.readInt32();break}case 6:{e.fu=t.readInt32();break}case 7:{t.isDelimited()?e.yaku.push(...t.readPackedInt32()):e.yaku.push(t.readInt32());break}case 8:{t.isDelimited()?e.riichiBets.push(...t.readPackedInt32()):e.riichiBets.push(t.readInt32());break}case 9:{e.dora=t.readInt32();break}case 10:{e.uradora=t.readInt32();break}case 11:{e.kandora=t.readInt32();break}case 12:{e.kanuradora=t.readInt32();break}case 13:{e.openHand=t.readBool();break}default:{t.skipField();break}}return e}},ve={encode:function(e){return ve._writeMessage(e,new T).getResultBuffer()},decode:function(e){return ve._readMessage(ve.initialize(),new g(e))},initialize:function(){return{roundIndex:0,honba:0,riichiBets:[],tempai:[]}},_writeMessage:function(e,t){var n,r;return e.roundIndex&&t.writeInt32(1,e.roundIndex),e.honba&&t.writeInt32(2,e.honba),(n=e.riichiBets)!=null&&n.length&&t.writePackedInt32(3,e.riichiBets),(r=e.tempai)!=null&&r.length&&t.writePackedInt32(4,e.tempai),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.roundIndex=t.readInt32();break}case 2:{e.honba=t.readInt32();break}case 3:{t.isDelimited()?e.riichiBets.push(...t.readPackedInt32()):e.riichiBets.push(t.readInt32());break}case 4:{t.isDelimited()?e.tempai.push(...t.readPackedInt32()):e.tempai.push(t.readInt32());break}default:{t.skipField();break}}return e}},xe={encode:function(e){return xe._writeMessage(e,new T).getResultBuffer()},decode:function(e){return xe._readMessage(xe.initialize(),new g(e))},initialize:function(){return{roundIndex:0,honba:0,riichiBets:[]}},_writeMessage:function(e,t){var n;return e.roundIndex&&t.writeInt32(1,e.roundIndex),e.honba&&t.writeInt32(2,e.honba),(n=e.riichiBets)!=null&&n.length&&t.writePackedInt32(3,e.riichiBets),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.roundIndex=t.readInt32();break}case 2:{e.honba=t.readInt32();break}case 3:{t.isDelimited()?e.riichiBets.push(...t.readPackedInt32()):e.riichiBets.push(t.readInt32());break}default:{t.skipField();break}}return e}},De={encode:function(e){return De._writeMessage(e,new T).getResultBuffer()},decode:function(e){return De._readMessage(De.initialize(),new g(e))},initialize:function(){return{roundIndex:0,honba:0,loserId:0}},_writeMessage:function(e,t){return e.roundIndex&&t.writeInt32(1,e.roundIndex),e.honba&&t.writeInt32(2,e.honba),e.loserId&&t.writeInt32(3,e.loserId),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.roundIndex=t.readInt32();break}case 2:{e.honba=t.readInt32();break}case 3:{e.loserId=t.readInt32();break}default:{t.skipField();break}}return e}},Pe={encode:function(e){return Pe._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Pe._readMessage(Pe.initialize(),new g(e))},initialize:function(){return{roundIndex:0,honba:0,riichiBets:[],tempai:[],nagashi:[]}},_writeMessage:function(e,t){var n,r,s;return e.roundIndex&&t.writeInt32(1,e.roundIndex),e.honba&&t.writeInt32(2,e.honba),(n=e.riichiBets)!=null&&n.length&&t.writePackedInt32(3,e.riichiBets),(r=e.tempai)!=null&&r.length&&t.writePackedInt32(4,e.tempai),(s=e.nagashi)!=null&&s.length&&t.writePackedInt32(5,e.nagashi),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.roundIndex=t.readInt32();break}case 2:{e.honba=t.readInt32();break}case 3:{t.isDelimited()?e.riichiBets.push(...t.readPackedInt32()):e.riichiBets.push(t.readInt32());break}case 4:{t.isDelimited()?e.tempai.push(...t.readPackedInt32()):e.tempai.push(t.readInt32());break}case 5:{t.isDelimited()?e.nagashi.push(...t.readPackedInt32()):e.nagashi.push(t.readInt32());break}default:{t.skipField();break}}return e}},K={encode:function(e){return K._writeMessage(e,new T).getResultBuffer()},decode:function(e){return K._readMessage(K.initialize(),new g(e))},initialize:function(){return{ron:void 0,tsumo:void 0,multiron:void 0,draw:void 0,abort:void 0,chombo:void 0,nagashi:void 0}},_writeMessage:function(e,t){return e.ron!=null&&t.writeMessage(1,e.ron,be._writeMessage),e.tsumo!=null&&t.writeMessage(2,e.tsumo,Me._writeMessage),e.multiron!=null&&t.writeMessage(3,e.multiron,He._writeMessage),e.draw!=null&&t.writeMessage(4,e.draw,ve._writeMessage),e.abort!=null&&t.writeMessage(5,e.abort,xe._writeMessage),e.chombo!=null&&t.writeMessage(6,e.chombo,De._writeMessage),e.nagashi!=null&&t.writeMessage(7,e.nagashi,Pe._writeMessage),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.ron=be.initialize(),t.readMessage(e.ron,be._readMessage);break}case 2:{e.tsumo=Me.initialize(),t.readMessage(e.tsumo,Me._readMessage);break}case 3:{e.multiron=He.initialize(),t.readMessage(e.multiron,He._readMessage);break}case 4:{e.draw=ve.initialize(),t.readMessage(e.draw,ve._readMessage);break}case 5:{e.abort=xe.initialize(),t.readMessage(e.abort,xe._readMessage);break}case 6:{e.chombo=De.initialize(),t.readMessage(e.chombo,De._readMessage);break}case 7:{e.nagashi=Pe.initialize(),t.readMessage(e.nagashi,Pe._readMessage);break}default:{t.skipField();break}}return e}},se={encode:function(e){return se._writeMessage(e,new T).getResultBuffer()},decode:function(e){return se._readMessage(se.initialize(),new g(e))},initialize:function(){return{id:0,title:""}},_writeMessage:function(e,t){return e.id&&t.writeInt32(1,e.id),e.title&&t.writeString(2,e.title),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.id=t.readInt32();break}case 2:{e.title=t.readString();break}default:{t.skipField();break}}return e}},ae={encode:function(e){return ae._writeMessage(e,new T).getResultBuffer()},decode:function(e){return ae._readMessage(ae.initialize(),new g(e))},initialize:function(){return{id:0,title:"",score:0,replacedBy:void 0,ratingDelta:0}},_writeMessage:function(e,t){return e.id&&t.writeInt32(1,e.id),e.title&&t.writeString(2,e.title),e.score&&t.writeInt32(3,e.score),e.replacedBy!=null&&t.writeMessage(4,e.replacedBy,se._writeMessage),e.ratingDelta&&t.writeFloat(5,e.ratingDelta),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.id=t.readInt32();break}case 2:{e.title=t.readString();break}case 3:{e.score=t.readInt32();break}case 4:{e.replacedBy=se.initialize(),t.readMessage(e.replacedBy,se._readMessage);break}case 5:{e.ratingDelta=t.readFloat();break}default:{t.skipField();break}}return e}},Le={encode:function(e){return Le._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Le._readMessage(Le.initialize(),new g(e))},initialize:function(){return{sessionHash:"",status:"",tableIndex:void 0,players:[]}},_writeMessage:function(e,t){var n;return e.sessionHash&&t.writeString(1,e.sessionHash),e.status&&t.writeString(2,e.status),e.tableIndex!=null&&t.writeInt32(3,e.tableIndex),(n=e.players)!=null&&n.length&&t.writeRepeatedMessage(4,e.players,ae._writeMessage),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.sessionHash=t.readString();break}case 2:{e.status=t.readString();break}case 3:{e.tableIndex=t.readInt32();break}case 4:{const r=ae.initialize();t.readMessage(r,ae._readMessage),e.players.push(r);break}default:{t.skipField();break}}return e}},oe={encode:function(e){return oe._writeMessage(e,new T).getResultBuffer()},decode:function(e){return oe._readMessage(oe.initialize(),new g(e))},initialize:function(){return{id:0,title:"",localId:void 0,teamName:void 0,tenhouId:"",ignoreSeating:!1,replacedBy:void 0}},_writeMessage:function(e,t){return e.id&&t.writeInt32(1,e.id),e.title&&t.writeString(2,e.title),e.localId!=null&&t.writeInt32(3,e.localId),e.teamName!=null&&t.writeString(4,e.teamName),e.tenhouId&&t.writeString(5,e.tenhouId),e.ignoreSeating&&t.writeBool(6,e.ignoreSeating),e.replacedBy!=null&&t.writeMessage(7,e.replacedBy,se._writeMessage),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.id=t.readInt32();break}case 2:{e.title=t.readString();break}case 3:{e.localId=t.readInt32();break}case 4:{e.teamName=t.readString();break}case 5:{e.tenhouId=t.readString();break}case 6:{e.ignoreSeating=t.readBool();break}case 7:{e.replacedBy=se.initialize(),t.readMessage(e.replacedBy,se._readMessage);break}default:{t.skipField();break}}return e}},Be={encode:function(e){return Be._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Be._readMessage(Be.initialize(),new g(e))},initialize:function(){return{sessionHash:"",eventId:0,playerId:0,score:0,ratingDelta:0,place:0,title:""}},_writeMessage:function(e,t){return e.sessionHash&&t.writeString(1,e.sessionHash),e.eventId&&t.writeInt32(2,e.eventId),e.playerId&&t.writeInt32(3,e.playerId),e.score&&t.writeInt32(4,e.score),e.ratingDelta&&t.writeFloat(5,e.ratingDelta),e.place&&t.writeInt32(6,e.place),e.title&&t.writeString(7,e.title),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.sessionHash=t.readString();break}case 2:{e.eventId=t.readInt32();break}case 3:{e.playerId=t.readInt32();break}case 4:{e.score=t.readInt32();break}case 5:{e.ratingDelta=t.readFloat();break}case 6:{e.place=t.readInt32();break}case 7:{e.title=t.readString();break}default:{t.skipField();break}}return e}},x={encode:function(e){return x._writeMessage(e,new T).getResultBuffer()},decode:function(e){return x._readMessage(x.initialize(),new g(e))},initialize:function(){return{playerId:0,score:0,penaltyScore:void 0}},_writeMessage:function(e,t){return e.playerId&&t.writeInt32(1,e.playerId),e.score&&t.writeInt32(2,e.score),e.penaltyScore!=null&&t.writeInt32(3,e.penaltyScore),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.playerId=t.readInt32();break}case 2:{e.score=t.readInt32();break}case 3:{e.penaltyScore=t.readInt32();break}default:{t.skipField();break}}return e}},X={encode:function(e){return X._writeMessage(e,new T).getResultBuffer()},decode:function(e){return X._readMessage(X.initialize(),new g(e))},initialize:function(){return{from:void 0,to:void 0,amount:0}},_writeMessage:function(e,t){return e.from!=null&&t.writeInt32(1,e.from),e.to!=null&&t.writeInt32(2,e.to),e.amount&&t.writeInt32(3,e.amount),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.from=t.readInt32();break}case 2:{e.to=t.readInt32();break}case 3:{e.amount=t.readInt32();break}default:{t.skipField();break}}return e}},Ge={encode:function(e){return Ge._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Ge._readMessage(Ge.initialize(),new g(e))},initialize:function(){return{direct:[],riichi:[],honba:[]}},_writeMessage:function(e,t){var n,r,s;return(n=e.direct)!=null&&n.length&&t.writeRepeatedMessage(1,e.direct,X._writeMessage),(r=e.riichi)!=null&&r.length&&t.writeRepeatedMessage(2,e.riichi,X._writeMessage),(s=e.honba)!=null&&s.length&&t.writeRepeatedMessage(3,e.honba,X._writeMessage),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{const r=X.initialize();t.readMessage(r,X._readMessage),e.direct.push(r);break}case 2:{const r=X.initialize();t.readMessage(r,X._readMessage),e.riichi.push(r);break}case 3:{const r=X.initialize();t.readMessage(r,X._readMessage),e.honba.push(r);break}default:{t.skipField();break}}return e}},F={encode:function(e){return F._writeMessage(e,new T).getResultBuffer()},decode:function(e){return F._readMessage(F.initialize(),new g(e))},initialize:function(){return{sessionHash:"",dealer:0,roundIndex:0,riichi:0,honba:0,riichiIds:[],scores:[],scoresDelta:[],payments:Ge.initialize(),round:K.initialize(),outcome:d._fromInt(0)}},_writeMessage:function(e,t){var n,r,s;return e.sessionHash&&t.writeString(1,e.sessionHash),e.dealer&&t.writeInt32(2,e.dealer),e.roundIndex&&t.writeInt32(3,e.roundIndex),e.riichi&&t.writeInt32(4,e.riichi),e.honba&&t.writeInt32(5,e.honba),(n=e.riichiIds)!=null&&n.length&&t.writePackedInt32(6,e.riichiIds),(r=e.scores)!=null&&r.length&&t.writeRepeatedMessage(7,e.scores,x._writeMessage),(s=e.scoresDelta)!=null&&s.length&&t.writeRepeatedMessage(8,e.scoresDelta,x._writeMessage),e.payments&&t.writeMessage(9,e.payments,Ge._writeMessage),e.round&&t.writeMessage(10,e.round,K._writeMessage),e.outcome&&d._toInt(e.outcome)&&t.writeEnum(11,d._toInt(e.outcome)),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.sessionHash=t.readString();break}case 2:{e.dealer=t.readInt32();break}case 3:{e.roundIndex=t.readInt32();break}case 4:{e.riichi=t.readInt32();break}case 5:{e.honba=t.readInt32();break}case 6:{t.isDelimited()?e.riichiIds.push(...t.readPackedInt32()):e.riichiIds.push(t.readInt32());break}case 7:{const r=x.initialize();t.readMessage(r,x._readMessage),e.scores.push(r);break}case 8:{const r=x.initialize();t.readMessage(r,x._readMessage),e.scoresDelta.push(r);break}case 9:{t.readMessage(e.payments,Ge._readMessage);break}case 10:{t.readMessage(e.round,K._readMessage);break}case 11:{e.outcome=d._fromInt(t.readEnum());break}default:{t.skipField();break}}return e}},je={encode:function(e){return je._writeMessage(e,new T).getResultBuffer()},decode:function(e){return je._readMessage(je.initialize(),new g(e))},initialize:function(){return{status:dt._fromInt(0),mayDefinalize:!1,sessionHash:"",penaltyLogs:[],tableIndex:void 0,lastRound:void 0,currentRoundIndex:0,scores:[],players:[]}},_writeMessage:function(e,t){var n,r,s;return e.status&&dt._toInt(e.status)&&t.writeEnum(1,dt._toInt(e.status)),e.mayDefinalize&&t.writeBool(2,e.mayDefinalize),e.sessionHash&&t.writeString(3,e.sessionHash),(n=e.penaltyLogs)!=null&&n.length&&t.writeRepeatedMessage(4,e.penaltyLogs,Q._writeMessage),e.tableIndex!=null&&t.writeInt32(5,e.tableIndex),e.lastRound!=null&&t.writeMessage(6,e.lastRound,K._writeMessage),e.currentRoundIndex&&t.writeInt32(7,e.currentRoundIndex),(r=e.scores)!=null&&r.length&&t.writeRepeatedMessage(8,e.scores,x._writeMessage),(s=e.players)!=null&&s.length&&t.writeRepeatedMessage(9,e.players,oe._writeMessage),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.status=dt._fromInt(t.readEnum());break}case 2:{e.mayDefinalize=t.readBool();break}case 3:{e.sessionHash=t.readString();break}case 4:{const r=Q.initialize();t.readMessage(r,Q._readMessage),e.penaltyLogs.push(r);break}case 5:{e.tableIndex=t.readInt32();break}case 6:{e.lastRound=K.initialize(),t.readMessage(e.lastRound,K._readMessage);break}case 7:{e.currentRoundIndex=t.readInt32();break}case 8:{const r=x.initialize();t.readMessage(r,x._readMessage),e.scores.push(r);break}case 9:{const r=oe.initialize();t.readMessage(r,oe._readMessage),e.players.push(r);break}default:{t.skipField();break}}return e}},Ke={encode:function(e){return Ke._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Ke._readMessage(Ke.initialize(),new g(e))},initialize:function(){return{dealer:0,roundIndex:0,riichiCount:0,honbaCount:0,scores:[],finished:!1,penalties:[],lastHandStarted:!1}},_writeMessage:function(e,t){var n,r;return e.dealer&&t.writeInt32(1,e.dealer),e.roundIndex&&t.writeInt32(2,e.roundIndex),e.riichiCount&&t.writeInt32(3,e.riichiCount),e.honbaCount&&t.writeInt32(4,e.honbaCount),(n=e.scores)!=null&&n.length&&t.writeRepeatedMessage(5,e.scores,x._writeMessage),e.finished&&t.writeBool(6,e.finished),(r=e.penalties)!=null&&r.length&&t.writeRepeatedMessage(7,e.penalties,Q._writeMessage),e.lastHandStarted&&t.writeBool(8,e.lastHandStarted),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.dealer=t.readInt32();break}case 2:{e.roundIndex=t.readInt32();break}case 3:{e.riichiCount=t.readInt32();break}case 4:{e.honbaCount=t.readInt32();break}case 5:{const r=x.initialize();t.readMessage(r,x._readMessage),e.scores.push(r);break}case 6:{e.finished=t.readBool();break}case 7:{const r=Q.initialize();t.readMessage(r,Q._readMessage),e.penalties.push(r);break}case 8:{e.lastHandStarted=t.readBool();break}default:{t.skipField();break}}return e}},j={encode:function(e){return j._writeMessage(e,new T).getResultBuffer()},decode:function(e){return j._readMessage(j.initialize(),new g(e))},initialize:function(){return{place1:0,place2:0,place3:0,place4:0}},_writeMessage:function(e,t){return e.place1&&t.writeInt32(1,e.place1),e.place2&&t.writeInt32(2,e.place2),e.place3&&t.writeInt32(3,e.place3),e.place4&&t.writeInt32(4,e.place4),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.place1=t.readInt32();break}case 2:{e.place2=t.readInt32();break}case 3:{e.place3=t.readInt32();break}case 4:{e.place4=t.readInt32();break}default:{t.skipField();break}}return e}},Fe={encode:function(e){return Fe._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Fe._readMessage(Fe.initialize(),new g(e))},initialize:function(){return{neg1:j.initialize(),neg3:j.initialize(),otherwise:j.initialize()}},_writeMessage:function(e,t){return e.neg1&&t.writeMessage(1,e.neg1,j._writeMessage),e.neg3&&t.writeMessage(2,e.neg3,j._writeMessage),e.otherwise&&t.writeMessage(3,e.otherwise,j._writeMessage),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{t.readMessage(e.neg1,j._readMessage);break}case 2:{t.readMessage(e.neg3,j._readMessage);break}case 3:{t.readMessage(e.otherwise,j._readMessage);break}default:{t.skipField();break}}return e}},Ye={encode:function(e){return Ye._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Ye._readMessage(Ye.initialize(),new g(e))},initialize:function(){return{complexUma:Fe.initialize(),endingPolicy:Et._fromInt(0),uma:j.initialize(),umaType:gt._fromInt(0),doubleronHonbaAtamahane:!1,doubleronRiichiAtamahane:!1,equalizeUma:!1,extraChomboPayments:!1,playAdditionalRounds:!1,riichiGoesToWinner:!1,tonpuusen:!1,withAbortives:!1,withAtamahane:!1,withButtobi:!1,withKazoe:!1,withKiriageMangan:!1,withKuitan:!1,withLeadingDealerGameOver:!1,withMultiYakumans:!1,withNagashiMangan:!1,withWinningDealerHonbaSkipped:!1,chipsValue:0,chomboPenalty:0,gameExpirationTime:0,goalPoints:0,maxPenalty:0,minPenalty:0,oka:0,penaltyStep:0,replacementPlayerFixedPoints:0,replacementPlayerOverrideUma:0,startPoints:0,startRating:0,allowedYaku:[],yakuWithPao:[]}},_writeMessage:function(e,t){var n,r;return e.complexUma&&t.writeMessage(1,e.complexUma,Fe._writeMessage),e.endingPolicy&&Et._toInt(e.endingPolicy)&&t.writeEnum(2,Et._toInt(e.endingPolicy)),e.uma&&t.writeMessage(3,e.uma,j._writeMessage),e.umaType&&gt._toInt(e.umaType)&&t.writeEnum(4,gt._toInt(e.umaType)),e.doubleronHonbaAtamahane&&t.writeBool(5,e.doubleronHonbaAtamahane),e.doubleronRiichiAtamahane&&t.writeBool(6,e.doubleronRiichiAtamahane),e.equalizeUma&&t.writeBool(7,e.equalizeUma),e.extraChomboPayments&&t.writeBool(8,e.extraChomboPayments),e.playAdditionalRounds&&t.writeBool(9,e.playAdditionalRounds),e.riichiGoesToWinner&&t.writeBool(10,e.riichiGoesToWinner),e.tonpuusen&&t.writeBool(11,e.tonpuusen),e.withAbortives&&t.writeBool(12,e.withAbortives),e.withAtamahane&&t.writeBool(13,e.withAtamahane),e.withButtobi&&t.writeBool(14,e.withButtobi),e.withKazoe&&t.writeBool(15,e.withKazoe),e.withKiriageMangan&&t.writeBool(16,e.withKiriageMangan),e.withKuitan&&t.writeBool(17,e.withKuitan),e.withLeadingDealerGameOver&&t.writeBool(18,e.withLeadingDealerGameOver),e.withMultiYakumans&&t.writeBool(19,e.withMultiYakumans),e.withNagashiMangan&&t.writeBool(20,e.withNagashiMangan),e.withWinningDealerHonbaSkipped&&t.writeBool(21,e.withWinningDealerHonbaSkipped),e.chipsValue&&t.writeInt32(22,e.chipsValue),e.chomboPenalty&&t.writeInt32(23,e.chomboPenalty),e.gameExpirationTime&&t.writeInt32(24,e.gameExpirationTime),e.goalPoints&&t.writeInt32(25,e.goalPoints),e.maxPenalty&&t.writeInt32(26,e.maxPenalty),e.minPenalty&&t.writeInt32(27,e.minPenalty),e.oka&&t.writeInt32(28,e.oka),e.penaltyStep&&t.writeInt32(29,e.penaltyStep),e.replacementPlayerFixedPoints&&t.writeInt32(30,e.replacementPlayerFixedPoints),e.replacementPlayerOverrideUma&&t.writeInt32(31,e.replacementPlayerOverrideUma),e.startPoints&&t.writeInt32(32,e.startPoints),e.startRating&&t.writeInt32(33,e.startRating),(n=e.allowedYaku)!=null&&n.length&&t.writePackedInt32(34,e.allowedYaku),(r=e.yakuWithPao)!=null&&r.length&&t.writePackedInt32(35,e.yakuWithPao),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{t.readMessage(e.complexUma,Fe._readMessage);break}case 2:{e.endingPolicy=Et._fromInt(t.readEnum());break}case 3:{t.readMessage(e.uma,j._readMessage);break}case 4:{e.umaType=gt._fromInt(t.readEnum());break}case 5:{e.doubleronHonbaAtamahane=t.readBool();break}case 6:{e.doubleronRiichiAtamahane=t.readBool();break}case 7:{e.equalizeUma=t.readBool();break}case 8:{e.extraChomboPayments=t.readBool();break}case 9:{e.playAdditionalRounds=t.readBool();break}case 10:{e.riichiGoesToWinner=t.readBool();break}case 11:{e.tonpuusen=t.readBool();break}case 12:{e.withAbortives=t.readBool();break}case 13:{e.withAtamahane=t.readBool();break}case 14:{e.withButtobi=t.readBool();break}case 15:{e.withKazoe=t.readBool();break}case 16:{e.withKiriageMangan=t.readBool();break}case 17:{e.withKuitan=t.readBool();break}case 18:{e.withLeadingDealerGameOver=t.readBool();break}case 19:{e.withMultiYakumans=t.readBool();break}case 20:{e.withNagashiMangan=t.readBool();break}case 21:{e.withWinningDealerHonbaSkipped=t.readBool();break}case 22:{e.chipsValue=t.readInt32();break}case 23:{e.chomboPenalty=t.readInt32();break}case 24:{e.gameExpirationTime=t.readInt32();break}case 25:{e.goalPoints=t.readInt32();break}case 26:{e.maxPenalty=t.readInt32();break}case 27:{e.minPenalty=t.readInt32();break}case 28:{e.oka=t.readInt32();break}case 29:{e.penaltyStep=t.readInt32();break}case 30:{e.replacementPlayerFixedPoints=t.readInt32();break}case 31:{e.replacementPlayerOverrideUma=t.readInt32();break}case 32:{e.startPoints=t.readInt32();break}case 33:{e.startRating=t.readInt32();break}case 34:{t.isDelimited()?e.allowedYaku.push(...t.readPackedInt32()):e.allowedYaku.push(t.readInt32());break}case 35:{t.isDelimited()?e.yakuWithPao.push(...t.readPackedInt32()):e.yakuWithPao.push(t.readInt32());break}default:{t.skipField();break}}return e}},ze={encode:function(e){return ze._writeMessage(e,new T).getResultBuffer()},decode:function(e){return ze._readMessage(ze.initialize(),new g(e))},initialize:function(){return{eventId:0}},_writeMessage:function(e,t){return e.eventId&&t.writeInt32(1,e.eventId),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.eventId=t.readInt32();break}default:{t.skipField();break}}return e}};function ua(e){var n,r;const t=e.currentOutcome;switch(t==null?void 0:t.selectedOutcome){case d.ROUND_OUTCOME_TSUMO:{const s=t.winner&&((n=e.players)==null?void 0:n.find(o=>o.id===t.winner));return s?[s]:[]}case d.ROUND_OUTCOME_RON:{const s=[];for(const o in t.wins){if(!t.wins.hasOwnProperty(o))continue;const l=(r=e.players)==null?void 0:r.find(c=>c.id===t.wins[o].winner);l&&s.push(l)}return s}case d.ROUND_OUTCOME_DRAW:case d.ROUND_OUTCOME_NAGASHI:return t.tempai.map(s=>{var o;return(o=e.players)==null?void 0:o.find(l=>l.id===s)}).filter(s=>!!s);default:return[]}}const Y=B(ua);function da(e){var n;const t=e.currentOutcome;switch(t==null?void 0:t.selectedOutcome){case d.ROUND_OUTCOME_RON:case d.ROUND_OUTCOME_CHOMBO:const r=(n=e.players)==null?void 0:n.find(s=>s.id===t.loser);return r?[r]:[];default:return[]}}const te=B(da);function ha(e){var n;const t=e.currentOutcome;switch(t==null?void 0:t.selectedOutcome){case d.ROUND_OUTCOME_TSUMO:{const r=t.paoPlayerId&&((n=e.players)==null?void 0:n.find(s=>s.id===t.paoPlayerId));return r?[r]:[]}case d.ROUND_OUTCOME_RON:return Object.keys(t.wins).reduce((r,s)=>{var o;if(t.wins[s].paoPlayerId){const l=(o=e.players)==null?void 0:o.find(c=>c.id===t.wins[s].paoPlayerId);l&&r.push(l)}return r},[]);default:return[]}}const Lr=B(ha);function fa(e){const t=e.currentOutcome;switch(t==null?void 0:t.selectedOutcome){case d.ROUND_OUTCOME_DRAW:case d.ROUND_OUTCOME_NAGASHI:return t.deadhands.map(n=>{var r;return(r=e.players)==null?void 0:r.find(s=>s.id===n)}).filter(n=>!!n);default:return[]}}const Br=B(fa);function pa(e){const t=e.currentOutcome;switch(t==null?void 0:t.selectedOutcome){case d.ROUND_OUTCOME_NAGASHI:return t.nagashi.map(n=>{var r;return(r=e.players)==null?void 0:r.find(s=>s.id===n)}).filter(n=>!!n);default:return[]}}const tn=B(pa);function Oa(e,t){const n=e.currentOutcome;switch(n==null?void 0:n.selectedOutcome){case d.ROUND_OUTCOME_TSUMO:return ee(n.yaku).indexOf(t)!==-1;case d.ROUND_OUTCOME_RON:if(!e.multironCurrentWinner)throw new Error("No winner selected");return ee(n.wins[e.multironCurrentWinner].yaku).indexOf(t)!==-1;default:return!1}}const Gr=B(Oa);function _a(e){const t=e.currentOutcome;switch(t==null?void 0:t.selectedOutcome){case d.ROUND_OUTCOME_RON:case d.ROUND_OUTCOME_TSUMO:case d.ROUND_OUTCOME_DRAW:case d.ROUND_OUTCOME_NAGASHI:case d.ROUND_OUTCOME_ABORT:return t.riichiBets.map(n=>{var r;return(r=e.players)==null?void 0:r.find(s=>s.id===n)}).filter(n=>!!n);default:return[]}}const ce=B(_a),Ia=(e,t)=>{var n,r;if(e.currentPlayerId)switch(t){case"overview":return e.players?{round:((n=e.sessionState)==null?void 0:n.roundIndex)??0,currentPlayerId:e.currentPlayerId,players:e.players,riichiBets:[],penaltyFor:void 0,paoPlayer:void 0}:void 0;case"confirmation":if(!e.currentOutcome||!e.players)return;const[s]=Lr(e);return{round:((r=e.sessionState)==null?void 0:r.roundIndex)??0,currentPlayerId:e.currentPlayerId,players:e.players,riichiBets:ce(e).map(o=>o.id.toString()),penaltyFor:e.currentOutcome.selectedOutcome===d.ROUND_OUTCOME_CHOMBO?e.currentOutcome.loser:void 0,paoPlayer:s&&s.id};case"other_overview":return e.currentOtherTable?{round:e.currentOtherTable.state.roundIndex,currentPlayerId:e.currentOtherTablePlayers[(e.overviewViewShift??0)%4].id,players:e.currentOtherTablePlayers,riichiBets:[],penaltyFor:void 0,paoPlayer:void 0}:void 0}},fe=(e,t)=>{const n=Ia(e,t);if(!n)throw new Error("No round overview found");return na(n.round,e.overviewViewShift??0,n.currentPlayerId,n.players,n.riichiBets,n.penaltyFor,n.paoPlayer)},jr=(e,t)=>fe(e,t).players[0],Kr=(e,t)=>fe(e,t).players[1],Fr=(e,t)=>fe(e,t).players[2],Yr=(e,t)=>fe(e,t).players[3],Na=(e,t)=>fe(e,t).seating[0],Sa=(e,t)=>fe(e,t).seating[1],Ta=(e,t)=>fe(e,t).seating[2],ga=(e,t)=>fe(e,t).seating[3];var z=(e=>(e[e.IDLE=0]="IDLE",e[e.POSITIVE=1]="POSITIVE",e[e.NEGATIVE=2]="NEGATIVE",e[e.ACTIVE=3]="ACTIVE",e))(z||{}),b=(e=>(e[e.IDLE=0]="IDLE",e[e.DISABLE=1]="DISABLE",e[e.PRESSED=2]="PRESSED",e))(b||{}),re=(e=>(e[e.TOP=0]="TOP",e[e.RIGHT=1]="RIGHT",e[e.BOTTOM=2]="BOTTOM",e[e.LEFT=3]="LEFT",e))(re||{});function Ea(e,t){return Y(e).indexOf(t)!==-1}function Ua(e,t){return te(e).indexOf(t)!==-1}function ya(e,t){var n;switch((n=e.currentOutcome)==null?void 0:n.selectedOutcome){case d.ROUND_OUTCOME_RON:if(e.multironCurrentWinner)return e.currentOutcome.wins[e.multironCurrentWinner].paoPlayerId===t.id;break;case d.ROUND_OUTCOME_TSUMO:return e.currentOutcome.paoPlayerId===t.id}return!1}function ma(e,t){return ce(e).indexOf(t)!==-1}function Aa(e,t){return Br(e).indexOf(t)!==-1}function Ca(e,t){return tn(e).indexOf(t)!==-1}function wa(e,t){var n;return e.currentOutcome?[d.ROUND_OUTCOME_DRAW,d.ROUND_OUTCOME_NAGASHI].indexOf(e.currentOutcome.selectedOutcome)!==-1?Br(e).indexOf(t)!==-1:e.currentOutcome.selectedOutcome===d.ROUND_OUTCOME_RON&&!((n=e.gameConfig)!=null&&n.rulesetConfig.withAtamahane)?te(e).indexOf(t)!==-1:Y(e).length>0&&Y(e).indexOf(t)===-1||te(e).indexOf(t)!==-1:!1}function Ra(e,t){return te(e).length>0&&te(e).indexOf(t)===-1||Y(e).indexOf(t)!==-1}function ba(e,t){return tn(e).length>=3&&tn(e).indexOf(t)===-1}var H=(e=>(e[e.GAME=0]="GAME",e[e.BEFORE_START=1]="BEFORE_START",e[e.SELECT_PLAYERS=2]="SELECT_PLAYERS",e[e.RESULT=3]="RESULT",e[e.OTHER_PLAYER_TABLE=4]="OTHER_PLAYER_TABLE",e))(H||{});function Ut(e,t){const n=e.currentOutcome;if(!n)return[];const r=nn(e);switch(n.selectedOutcome){case d.ROUND_OUTCOME_TSUMO:if(n.winner&&n.riichiBets.includes(n.winner))return[i.RIICHI,i.MENZENTSUMO].filter(o=>!r.includes(o));break;case d.ROUND_OUTCOME_RON:const s=t??e.multironCurrentWinner;if(!s)throw new Error("No winner selected");if(n.riichiBets.includes(s))return[i.RIICHI].filter(o=>!r.includes(o));break;default:return[]}return[]}function nn(e){const t=e.currentOutcome;switch(t==null?void 0:t.selectedOutcome){case d.ROUND_OUTCOME_TSUMO:return ee(t.yaku);case d.ROUND_OUTCOME_RON:if(!e.multironCurrentWinner)throw new Error("No winner selected");return ee(t.wins[e.multironCurrentWinner].yaku);default:return[]}}function ka(e){let t;const n=e.currentOutcome;switch(n==null?void 0:n.selectedOutcome){case d.ROUND_OUTCOME_TSUMO:return t=ee(n.yaku),Ai(e,n.winner,t,mi(e.yakuList,t),[i.HOUTEI,i.CHANKAN,i.RENHOU]);case d.ROUND_OUTCOME_RON:if(!e.multironCurrentWinner)throw new Error("No winner selected");return t=ee(n.wins[e.multironCurrentWinner].yaku),Ai(e,e.multironCurrentWinner,t,mi(e.yakuList,t),[i.MENZENTSUMO,i.HAITEI,i.TENHOU,i.CHIHOU]);default:return[]}}function Ai(e,t,n,r,s){const o=e.currentOutcome;return!t||!o?[]:r.filter(l=>l===i.IPPATSU&&((o==null?void 0:o.selectedOutcome)===d.ROUND_OUTCOME_RON||(o==null?void 0:o.selectedOutcome)===d.ROUND_OUTCOME_TSUMO)&&!n.includes(i.RIICHI)&&!n.includes(i.DOUBLERIICHI)||l===i.__OPENHAND&&((o==null?void 0:o.selectedOutcome)===d.ROUND_OUTCOME_RON||(o==null?void 0:o.selectedOutcome)===d.ROUND_OUTCOME_TSUMO)&&o.riichiBets.includes(t)||l===i.RENHOU&&(o==null?void 0:o.selectedOutcome)===d.ROUND_OUTCOME_RON&&o.wins[t].winnerIsDealer||l===i.TENHOU&&((o==null?void 0:o.selectedOutcome)!==d.ROUND_OUTCOME_TSUMO||!o.winnerIsDealer)||l===i.CHIHOU&&((o==null?void 0:o.selectedOutcome)!==d.ROUND_OUTCOME_TSUMO||o.winnerIsDealer)?!1:!s.includes(l))}function Ha(e){const t=e.currentOutcome;if(!t)return!1;switch(t.selectedOutcome){case d.ROUND_OUTCOME_TSUMO:return Ci(t);case d.ROUND_OUTCOME_RON:if(!e.multironCurrentWinner)return!1;const n=t.wins[e.multironCurrentWinner];return Ci(n);default:throw new Error("No yaku may exist on this outcome")}}function Ci(e){const t=ee(e.yaku);for(const n of t)if(hi.includes(n))return!0;return!1}function Ma(e,t){const n=e.currentOutcome;switch(n==null?void 0:n.selectedOutcome){case d.ROUND_OUTCOME_TSUMO:return n.han;case d.ROUND_OUTCOME_RON:const r=t??e.multironCurrentWinner;return r?n.wins[r].han:0;default:return 0}}const fi=B(Ma);function va(e,t){const n=e.currentOutcome;let r,s;switch(n==null?void 0:n.selectedOutcome){case d.ROUND_OUTCOME_TSUMO:return s=n.fu,r=n.han+n.dora,r>=5&&(s=0),s;case d.ROUND_OUTCOME_RON:const o=t??e.multironCurrentWinner;return o?(s=n.wins[o].fu,r=n.wins[o].han+n.wins[o].dora,r>=5&&(s=0),s):0;default:return 0}}const vn=B(va);function xa(e){const t=e.currentOutcome;switch(t==null?void 0:t.selectedOutcome){case d.ROUND_OUTCOME_TSUMO:return t.possibleFu;case d.ROUND_OUTCOME_RON:return e.multironCurrentWinner?t.wins[e.multironCurrentWinner].possibleFu:[];default:return[]}}const Da=B(xa);function Pa(e,t){const n=e.currentOutcome;switch(n==null?void 0:n.selectedOutcome){case d.ROUND_OUTCOME_TSUMO:return n.dora;case d.ROUND_OUTCOME_RON:const r=t??e.multironCurrentWinner;return r?n.wins[r].dora:0;default:return 0}}const xn=B(Pa);function La(e){var t;return Ha(e)?[0]:((t=e.gameConfig)==null?void 0:t.rulesetTitle)==="jpmlA"?[0,1,2,3,4]:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}function Ba(e){var t;switch((t=e.currentOutcome)==null?void 0:t.selectedOutcome){case d.ROUND_OUTCOME_TSUMO:return fi(e)!=0;case d.ROUND_OUTCOME_RON:const n=e.currentOutcome;return Y(e).reduce((r,s)=>r&&n.wins[s.id].han!=0,!0);default:return}}function Ga(e){var t;switch((t=e.currentOutcome)==null?void 0:t.selectedOutcome){case d.ROUND_OUTCOME_TSUMO:return Y(e).length===1;case d.ROUND_OUTCOME_DRAW:case d.ROUND_OUTCOME_ABORT:case d.ROUND_OUTCOME_NAGASHI:return!0;case d.ROUND_OUTCOME_RON:return Y(e).length>=1&&te(e).length===1;case d.ROUND_OUTCOME_CHOMBO:return te(e).length===1;default:return}}var q=(e=>(e[e.TOP=0]="TOP",e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e[e.BOTTOM=3]="BOTTOM",e))(q||{});function zr(e){const t=parseInt(e.toString(),10);return t>12?`北${t-12}`:t>8?`西${t-8}`:t>4?`南${t-4}`:`東${t}`}function ja(e,t){if(!Array.isArray(e)||!Array.isArray(t))throw new Error("expected both arguments to be arrays");const n=[],r=e.length;for(let s=0;s<r;s++){const o=e[s];t.includes(o)&&!n.includes(o)&&n.push(o)}return n}function Dn(e,t){return ja(ee(e),t.rulesetConfig.yakuWithPao).length>0}function wi(e,t){if(!e)return!1;switch(e.selectedOutcome){case d.ROUND_OUTCOME_TSUMO:return Dn(e.yaku,t);case d.ROUND_OUTCOME_RON:return Object.keys(e.wins).reduce((n,r)=>n||Dn(e.wins[r].yaku,t),!1);default:throw new Error("No pao exist on this outcome")}}const Ka=(e,t)=>(n,r)=>typeof r>"u"&&e?e:t.reduce((o,l,c)=>{if(typeof l>"u")throw new TypeError(`An undefined reducer was passed in at index ${c}`);return l(o,r)},n||e);function Ri(e){return Wr(e,void 0)}function Wr(e,t){var u;const n=e.gameConfig;if(!n||e.currentScreen!=="paoSelect"||((u=e.currentOutcome)==null?void 0:u.selectedOutcome)!==d.ROUND_OUTCOME_RON)return;const r=e.currentOutcome.wins,s=Object.keys(r);if(s.length===1)return;let o=-1,l=-1,c=0;if(t)for(;c<s.length&&o===-1;c++)parseInt(s[c].toString(),10)===t&&(o=c);for(;c<s.length&&l===-1;c++){const f=parseInt(s[c].toString(),10),_=r[s[c]];Dn(_.yaku,n)&&(l=f)}return l!==-1?l:void 0}function Fa(e){var n,r,s,o;if(!((n=e.gameConfig)!=null&&n.useTimer)||(r=e.timer)!=null&&r.waiting)return;const t=Math.floor((((s=e.timer)==null?void 0:s.secondsRemaining)??0)/60);return t<0?{minutes:0,seconds:0}:{minutes:t,seconds:(((o=e.timer)==null?void 0:o.secondsRemaining)??0)%60}}function Ya(e){var n,r,s,o;if(!((n=e.gameConfig)!=null&&n.useTimer)||!((r=e.timer)!=null&&r.waiting))return;const t=Math.floor((((s=e.timer)==null?void 0:s.autostartSecondsRemaining)||0)/60);return t<0?{minutes:0,seconds:0}:{minutes:t,seconds:(((o=e.timer)==null?void 0:o.autostartSecondsRemaining)||0)%60}}const za=B(Fa);B(Ya);function Wa(e,t){return e.toString()+":"+(t<10?"0"+t.toString():t.toString())}function Va(e,t,n){const r=On(t),s=Fr(t,r),o=Ta(t,r),l=_n(e,s,o,t,n);return l.rotated=t.settings.singleDeviceMode&&["currentGame","outcomeSelect","confirmation"].includes(t.currentScreen),l}function $a(e,t,n){const r=On(t),s=Yr(t,r),o=ga(t,r);return _n(e,s,o,t,n)}function Ja(e,t,n){const r=On(t),s=Kr(t,r),o=Sa(t,r);return _n(e,s,o,t,n)}function Za(e,t,n){const r=On(t),s=jr(t,r),o=Na(t,r);return _n(e,s,o,t,n)}function qa(e,t,n){if(t.currentScreen!=="outcomeSelect")return;const r=l=>{n({type:pr,payload:l}),n({type:de})},s=[{text:e._t("Ron"),onSelect:()=>{r(d.ROUND_OUTCOME_RON)}},{text:e._t("Tsumo"),onSelect:()=>{r(d.ROUND_OUTCOME_TSUMO)}},{text:e._t("Exhaustive draw"),onSelect:()=>{r(d.ROUND_OUTCOME_DRAW)}},{text:e._t("Chombo"),onSelect:()=>{r(d.ROUND_OUTCOME_CHOMBO)}}],o=t.gameConfig;return o&&(o.rulesetConfig.withAbortives&&s.push({text:e._t("Abortive draw"),onSelect:()=>{r(d.ROUND_OUTCOME_ABORT)},unavailable:!1}),o.rulesetConfig.withNagashiMangan&&s.push({text:e._t("Nagashi mangan"),onSelect:()=>{r(d.ROUND_OUTCOME_NAGASHI)},unavailable:!1})),{items:s,onHide:()=>{n({type:G})}}}function On(e){switch(e.currentScreen){case"confirmation":return"confirmation";case"otherTable":return"other_overview";case"overview":default:return"overview"}}function Xa(e,t,n){var o;const r=$r(n);if(r.length===0&&n.changesOverview&&n.changesOverview.outcome===d.ROUND_OUTCOME_CHOMBO&&((o=n.changesOverview.round.chombo)==null?void 0:o.loserId)===t.id)return e._t("Penalty");let s=0;return r.forEach(l=>{if((l.from===t.id||l.to===t.id)&&l.from!==l.to){const c=l.directAmount+l.riichiAmount+l.honbaAmount,u=l.from===t.id?-1:1;s+=c*u}}),s}function _n(e,t,n,r,s){var N,U,y,w,v;let o=z.IDLE,l=t.score,c=(U=(N=r.sessionState)==null?void 0:N.penalties.find(V=>V.who===t.id))==null?void 0:U.amount,u=!0,f,_,I,p=!1,S=!1;const O=r.currentOutcome;switch(r.currentScreen){case"currentGame":case"otherTable":if((y=r.timer)!=null&&y.waiting&&(u=!1,l=void 0,c=void 0),r.overviewDiffBy){const R=(w=r.currentScreen==="currentGame"?r.players:r.currentOtherTablePlayers)==null?void 0:w.find(ye=>ye.id===r.overviewDiffBy);R&&(l=t.score-R.score,l>0?(o=z.POSITIVE,l=`+${l}`):l<0?o=z.NEGATIVE:o=z.ACTIVE,c=void 0)}break;case"confirmation":const V=Xa(e,t,r);l=V!==0?V:void 0,typeof V=="number"?V>0?(o=z.POSITIVE,l=`+${l}`):V<0&&(o=z.NEGATIVE):o=z.NEGATIVE;const pe=(v=r.changesOverview)==null?void 0:v.payments.riichi,tt=t.id;pe!=null&&pe.some(R=>R.from===tt&&R.to===void 0)&&(S=!0);break;case"playersSelect":l=void 0,c=void 0;const ne=O==null?void 0:O.selectedOutcome;if(!ne)throw new Error("empty outcome");const nt=[d.ROUND_OUTCOME_RON,d.ROUND_OUTCOME_TSUMO,d.ROUND_OUTCOME_DRAW,d.ROUND_OUTCOME_NAGASHI].includes(ne),it=[d.ROUND_OUTCOME_RON,d.ROUND_OUTCOME_CHOMBO].includes(ne),rt=[d.ROUND_OUTCOME_RON,d.ROUND_OUTCOME_TSUMO,d.ROUND_OUTCOME_DRAW,d.ROUND_OUTCOME_ABORT,d.ROUND_OUTCOME_NAGASHI].includes(ne);if(p=[d.ROUND_OUTCOME_DRAW,d.ROUND_OUTCOME_NAGASHI].includes(ne)&&Aa(r,t),nt&&!p){let R;Ea(r,t)?R=b.PRESSED:wa(r,t)?R=b.DISABLE:R=b.IDLE,f={mode:R,onClick:so(s,t.id)}}if(it){let R;Ua(r,t)?R=b.PRESSED:Ra(r,t)?R=b.DISABLE:R=b.IDLE,_={mode:R,onClick:co(s,t.id)}}if(rt){let R;ma(r,t)?R=b.PRESSED:R=b.IDLE,I={mode:R,onClick:uo(s,t.id)}}break;case"nagashiSelect":l=void 0,c=void 0;let st;Ca(r,t)?st=b.PRESSED:ba(r,t)?st=b.DISABLE:st=b.IDLE,f={mode:st,onClick:ao(s,t.id)};break;case"paoSelect":if(l=void 0,c=void 0,!O)throw new Error(e._t("empty outcome"));let at,Oe=!1;switch(O.selectedOutcome){case d.ROUND_OUTCOME_RON:r.multironCurrentWinner===t.id?(l=e._t("Winner"),o=z.POSITIVE):O.loser===t.id?(l=e._t("Loser"),o=z.NEGATIVE):Oe=!0;break;case d.ROUND_OUTCOME_TSUMO:O.winner!==t.id?Oe=!0:(l=e._t("Winner"),o=z.POSITIVE);break;default:throw new Error(e._t("wrong outcome for paoSelect"))}Oe&&(ya(r,t)?at=b.PRESSED:at=b.IDLE,_={mode:at,onClick:oo(s,t.id)});break}return{name:t.title,wind:n,points:l,penaltyPoints:c,pointsMode:o,inlineWind:u,winButton:f,loseButton:_,riichiButton:I,showDeadButton:p,onDeadButtonClick:lo(s,t.id),showInlineRiichi:S,onPlayerClick:So(r,s,t.id)}}function Qa(e,t,n){if(t!==void 0){switch(t){case d.ROUND_OUTCOME_RON:case d.ROUND_OUTCOME_MULTIRON:case d.ROUND_OUTCOME_TSUMO:if(n==="paoSelect")return e._t("Select pao");break;case d.ROUND_OUTCOME_NAGASHI:if(n==="playersSelect")return e._t("Select tempai");break}return Vr(e,t)}}function Vr(e,t){switch(t){case d.ROUND_OUTCOME_RON:case d.ROUND_OUTCOME_MULTIRON:return e._t("Ron");case d.ROUND_OUTCOME_TSUMO:return e._t("Tsumo");case d.ROUND_OUTCOME_DRAW:return e._t("Draw");case d.ROUND_OUTCOME_ABORT:return e._t("Abort");case d.ROUND_OUTCOME_CHOMBO:return e._t("Chombo");case d.ROUND_OUTCOME_NAGASHI:return e._t("Nagashi");default:return""}}function eo(e,t,n){const r=no(t),s=t.currentOutcome&&t.currentOutcome.selectedOutcome,o=Qa(e,s,t.currentScreen),l=[H.OTHER_PLAYER_TABLE,H.SELECT_PLAYERS,H.RESULT].includes(r),c=r===H.SELECT_PLAYERS,u=!to(t),f=r===H.RESULT,_=!1,I=[H.GAME,H.BEFORE_START].includes(r),p=[H.GAME,H.BEFORE_START,H.OTHER_PLAYER_TABLE].includes(r),S=r===H.GAME,O=[H.GAME,H.OTHER_PLAYER_TABLE].includes(r);return{text:o,showBack:l,showNext:c,isNextDisabled:u,showHome:I,showRefresh:p,showAdd:S,showLog:O,showSave:f,isSaveDisabled:_,onNextClick:(()=>{var U;if(t.currentScreen==="paoSelect"&&((U=t.currentOutcome)==null?void 0:U.selectedOutcome)===d.ROUND_OUTCOME_RON){const y=Wr(t,t.multironCurrentWinner);if(y!==void 0)return()=>n({type:Ae,payload:{winner:y}})}return _o(n)})(),onBackClick:Io(n),onSaveClick:No(t,n),onLogClick:ho(n),onAddClick:fo(t,n),onHomeClick:po(n),onRefreshClick:Oo(t,n)}}function to(e){return Ga(e)}function no(e){var t;if((t=e.timer)!=null&&t.waiting)return H.BEFORE_START;switch(e.currentScreen){case"currentGame":return H.GAME;case"confirmation":return H.RESULT;case"otherTable":return H.OTHER_PLAYER_TABLE;default:return H.SELECT_PLAYERS}}function io(e,t){var f,_,I,p,S,O,N,U,y,w;if(e.currentScreen==="confirmation")return;let n=!1;const r=((f=e.currentOtherTable)==null?void 0:f.tableIndex)??e.tableIndex;let s=!0,o=!1;const l=!1;let c,u;if(e.showAdditionalTableInfo)e.currentScreen==="currentGame"&&(n=!0,s=!1);else if(e.timer!==void 0){if((_=e.timer)!=null&&_.waiting)e.tableIndex&&(n=!0,s=!1);else if(e.currentScreen==="currentGame"||e.currentScreen==="outcomeSelect"){const v=za(e);v!==void 0&&(o=!0,v.minutes===0&&v.seconds===0?u=(I=e.sessionState)!=null&&I.lastHandStarted?1:2:c=Wa(v.minutes,v.seconds))}}return{showRotators:e.currentScreen==="otherTable",showRoundInfo:s,showTableNumber:n,showTimer:o,isAutostartTimer:l,gamesLeft:u,round:zr(((p=e.currentOtherTable)==null?void 0:p.state.roundIndex)??((S=e.sessionState)==null?void 0:S.roundIndex)??0),honbaCount:((O=e.currentOtherTable)==null?void 0:O.state.honbaCount)??((N=e.sessionState)==null?void 0:N.honbaCount)??0,riichiCount:((U=e.currentOtherTable)==null?void 0:U.state.riichiCount)??((y=e.sessionState)==null?void 0:y.riichiCount)??0,currentTime:c,tableNumber:r,onTableInfoToggle:To(e,t),timerWaiting:(w=e.timer)==null?void 0:w.waiting,onRotateCwClick:()=>t({type:mr}),onRotateCcwClick:()=>t({type:yr})}}function $r(e){const t=e.changesOverview;if(e.currentScreen!=="confirmation"||t===void 0||e.loading.overview)return[];const n=t.payments,r=[];return n.direct.forEach(s=>{if(s.from&&s.to){const o={from:s.from,to:s.to,directAmount:s.amount,riichiAmount:0,honbaAmount:0};r.push(o)}}),n.riichi.forEach(s=>{if(s.to&&s.from&&s.amount!==0){const o=r.find(l=>l.to===s.to&&l.from===s.from);if(o)o.riichiAmount=s.amount;else{const l={from:s.from,to:s.to,directAmount:0,riichiAmount:s.amount,honbaAmount:0};r.push(l)}}}),n.honba.forEach(s=>{if(s.to&&s.from&&s.amount!==0){const o=r.find(l=>l.to===s.to&&l.from===s.from);o&&(o.honbaAmount=s.amount)}}),r}function ro(e){var o,l,c,u;if(e.currentScreen!=="confirmation"||e.changesOverview===void 0||e.loading.overview)return;const t=[];if(((o=e.currentOutcome)==null?void 0:o.selectedOutcome)===d.ROUND_OUTCOME_TSUMO&&e.currentOutcome.winner&&(l=e.changesOverview.round.tsumo)!=null&&l.paoPlayerId&&(t[e.currentOutcome.winner]=(c=e.changesOverview.round.tsumo)==null?void 0:c.paoPlayerId),((u=e.currentOutcome)==null?void 0:u.selectedOutcome)===d.ROUND_OUTCOME_RON){const f=e.currentOutcome.wins;Object.keys(f).forEach(_=>{const I=f[_];I.paoPlayerId&&I.winner&&(t[I.winner]=I.paoPlayerId)})}const n=$r(e),r={[Fr(e,"confirmation").id]:q.TOP,[Yr(e,"confirmation").id]:q.LEFT,[Kr(e,"confirmation").id]:q.RIGHT,[jr(e,"confirmation").id]:q.BOTTOM},s=[];return n.forEach(f=>{if(f.from&&f.to){const _=r[f.from],I=r[f.to],p=t[f.to]===f.from,S={points:f.directAmount,honbaPoints:f.honbaAmount,withRiichi:f.riichiAmount!==0,withPao:p,start:_,end:I};s.push(S)}}),{arrows:s}}function so(e,t){return()=>e({type:qi,payload:t})}function ao(e,t){return()=>e({type:tr,payload:t})}function oo(e,t){return()=>e({type:Qi,payload:t})}function lo(e,t){return()=>e({type:er,payload:t})}function co(e,t){return()=>e({type:Xi,payload:t})}function uo(e,t){return()=>e({type:Zi,payload:t})}function ho(e){return()=>e({type:zn})}function fo(e,t){return()=>{e.currentScreen==="currentGame"?t({type:de}):e.currentScreen==="outcomeSelect"&&t({type:G})}}function po(e){return()=>e({type:G})}function Oo(e,t){return()=>{e.currentScreen==="otherTable"?t({type:ni}):t({type:ue})}}function _o(e){return()=>{e({type:de})}}function Io(e){return()=>e({type:G})}function No(e,t){return()=>t({type:hn,payload:e})}function So(e,t,n){var r;if(!(!["currentGame","otherTable"].includes(e.currentScreen)||(r=e.timer)!=null&&r.waiting))return()=>{t({type:Er,payload:n})}}function To(e,t){if(!(e.currentScreen!=="currentGame"&&e.currentScreen!=="confirmation")&&!(e.currentScreen==="currentGame"&&!e.tableIndex))return()=>{t({type:Ur})}}const bi=e=>h.createElement("svg",{width:104,height:16,viewBox:"0 0 104 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},h.createElement("rect",{x:.6,y:.6,width:102.8,height:14.8,rx:7.4,strokeWidth:1.2,stroke:"currentColor",style:{fill:"var(--riichi-fill-color)"}}),h.createElement("circle",{cx:53,cy:8,r:3.75,fill:"black",style:{fill:"var(--riichi-circle-color)"}})),go=e=>h.createElement("svg",{width:36,height:36,viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},h.createElement("path",{d:"M19.9286 0C19.2455 0 18.6428 0.247761 18.1205 0.743304C17.5446 1.3058 17.1295 2.02902 16.875 2.91295C16.6205 3.79687 16.4163 4.64398 16.2623 5.45424C16.1082 6.2645 15.8705 6.83705 15.5491 7.17187C14.8928 7.88169 14.1763 8.73884 13.3995 9.7433C12.0469 11.4978 11.1294 12.5357 10.6473 12.8571H5.14284C4.43302 12.8571 3.82699 13.1083 3.32476 13.6105C2.82253 14.1127 2.57141 14.7188 2.57141 15.4286V28.2857C2.57141 28.9955 2.82253 29.6016 3.32476 30.1038C3.82699 30.606 4.43302 30.8571 5.14284 30.8571H10.9286C11.2232 30.8571 12.1473 31.125 13.7009 31.6607C15.3482 32.2366 16.798 32.6752 18.0502 32.9766C19.3024 33.2779 20.5714 33.4286 21.8571 33.4286H24.4486C26.337 33.4286 27.8571 32.8895 29.0089 31.8114C30.1607 30.7333 30.7299 29.2634 30.7165 27.4018C31.5201 26.3705 31.9219 25.1786 31.9219 23.8259C31.9219 23.5312 31.9018 23.2433 31.8616 22.9621C32.3705 22.0647 32.625 21.1004 32.625 20.0692C32.625 19.5871 32.5647 19.125 32.4442 18.683C33.1004 17.692 33.4286 16.6004 33.4286 15.4085C33.4286 14.029 32.9196 12.8304 31.9018 11.8125C30.8839 10.7946 29.6785 10.2857 28.2857 10.2857H24.75C25.3928 8.95982 25.7143 7.67411 25.7143 6.42857C25.7143 4.86161 25.4799 3.61607 25.0111 2.69196C24.5424 1.76786 23.8594 1.08818 22.962 0.652902C22.0647 0.217627 21.0536 0 19.9286 0ZM19.9286 2.57143C21.2143 2.57143 22.0714 2.88617 22.5 3.51562C22.9285 4.14508 23.1428 5.11608 23.1428 6.42857C23.1428 7.21874 22.8214 8.29352 22.1786 9.6529C21.5357 11.0123 21.2143 12.0804 21.2143 12.8571H28.2857C28.9553 12.8571 29.5513 13.1149 30.0736 13.6306C30.596 14.1462 30.8571 14.7455 30.8571 15.4286C30.8571 15.8973 30.7131 16.4397 30.4252 17.0558C30.1373 17.6719 29.779 17.9866 29.3504 18C29.5513 18.2277 29.7187 18.5458 29.8527 18.9542C29.9866 19.3627 30.0536 19.7344 30.0536 20.0692C30.0536 20.9933 29.6986 21.7902 28.9888 22.4598C29.2299 22.8884 29.3504 23.3504 29.3504 23.846C29.3504 24.3415 29.2332 24.8337 28.9989 25.3225C28.7645 25.8114 28.4464 26.1629 28.0446 26.3772C28.1116 26.779 28.1451 27.154 28.1451 27.5022C28.1451 29.7388 26.8594 30.8571 24.2879 30.8571H21.8571C20.1027 30.8571 17.8125 30.3683 14.9866 29.3906C14.9196 29.3638 14.7254 29.2935 14.404 29.1797C14.0826 29.0658 13.8449 28.9821 13.6908 28.9286C13.5368 28.875 13.3024 28.798 12.9877 28.6975C12.673 28.5971 12.4185 28.5234 12.2243 28.4766C12.0301 28.4297 11.8091 28.3862 11.5614 28.346C11.3136 28.3058 11.1027 28.2857 10.9286 28.2857H10.2857V15.4286H10.9286C11.1428 15.4286 11.3806 15.3683 11.6417 15.2478C11.9029 15.1272 12.1707 14.9464 12.4453 14.7054C12.7199 14.4643 12.9777 14.2266 13.2187 13.9922C13.4598 13.7578 13.7277 13.4632 14.0223 13.1083C14.317 12.7533 14.548 12.4688 14.7154 12.2545C14.8828 12.0402 15.0937 11.7656 15.3482 11.4308C15.6027 11.096 15.7567 10.8951 15.8103 10.8281C16.5469 9.91742 17.0625 9.30803 17.3571 9C17.9062 8.4241 18.3047 7.69084 18.5524 6.80022C18.8002 5.9096 19.0044 5.06919 19.1652 4.27902C19.3259 3.48885 19.5803 2.91964 19.9286 2.57143ZM4.99432 15.3672H8.27116V28.3616H4.94912L4.99432 15.3672Z",fill:"currentColor"})),Eo=e=>h.createElement("svg",{width:36,height:36,viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},h.createElement("path",{d:"M16.0714 33.4286C16.7545 33.4286 17.3571 33.1808 17.8795 32.6853C18.4554 32.1228 18.8705 31.3996 19.125 30.5157C19.3795 29.6317 19.5837 28.7846 19.7377 27.9744C19.8917 27.1641 20.1295 26.5916 20.4509 26.2567C21.1071 25.5469 21.8236 24.6898 22.6004 23.6853C23.9531 21.9308 24.8705 20.8929 25.3527 20.5715H30.8571C31.5669 20.5715 32.173 20.3203 32.6752 19.8181C33.1774 19.3159 33.4286 18.7098 33.4286 18V5.14286C33.4286 4.43304 33.1774 3.82701 32.6752 3.32478C32.173 2.82254 31.5669 2.57143 30.8571 2.57143H25.0714C24.7768 2.57143 23.8527 2.30358 22.2991 1.76786C20.6518 1.19196 19.202 0.75335 17.9498 0.45201C16.6975 0.15067 15.4286 0 14.1428 0H11.5513C9.66292 0 8.14283 0.53905 6.99105 1.61719C5.83927 2.69532 5.27006 4.16517 5.28346 6.02678C4.47989 7.05803 4.0781 8.24997 4.0781 9.60267C4.0781 9.89737 4.09819 10.1853 4.13837 10.4665C3.62945 11.3639 3.37498 12.3282 3.37498 13.3594C3.37498 13.8415 3.43525 14.3036 3.55578 14.7456C2.89952 15.7366 2.57141 16.8282 2.57141 18.0201C2.57141 19.3996 3.08033 20.5982 4.09819 21.6161C5.11606 22.634 6.32141 23.1429 7.71426 23.1429H11.25C10.6071 24.4688 10.2857 25.7545 10.2857 27C10.2857 28.567 10.5201 29.8125 10.9888 30.7366C11.4576 31.6607 12.1406 32.3404 13.0379 32.7757C13.9353 33.211 14.9464 33.4286 16.0714 33.4286ZM16.0714 30.8572C14.7857 30.8572 13.9286 30.5424 13.5 29.913C13.0714 29.2835 12.8571 28.3125 12.8571 27C12.8571 26.2099 13.1786 25.1351 13.8214 23.7757C14.4643 22.4163 14.7857 21.3482 14.7857 20.5715H7.71426C7.04463 20.5715 6.44864 20.3137 5.92632 19.798C5.404 19.2824 5.14283 18.6831 5.14283 18C5.14283 17.5313 5.28681 16.9889 5.57475 16.3728C5.86269 15.7567 6.22097 15.442 6.64953 15.4286C6.44864 15.2009 6.28123 14.8828 6.1473 14.4744C6.01336 14.0659 5.94641 13.6942 5.94641 13.3594C5.94641 12.4353 6.30132 11.6384 7.01114 10.9688C6.77007 10.5402 6.64953 10.0782 6.64953 9.58257C6.64953 9.08707 6.76671 8.59487 7.00109 8.10607C7.23548 7.61717 7.55355 7.26563 7.95533 7.05134C7.88838 6.64955 7.85489 6.27455 7.85489 5.92634C7.85489 3.68974 9.1406 2.57143 11.712 2.57143H14.1428C15.8973 2.57143 18.1875 3.06026 21.0134 4.03795C21.0803 4.06472 21.2745 4.13504 21.596 4.24888C21.9174 4.36273 22.1551 4.44642 22.3091 4.5C22.4632 4.55358 22.6975 4.63058 23.0123 4.73103C23.327 4.83147 23.5815 4.90514 23.7757 4.95201C23.9699 4.99888 24.1908 5.04241 24.4386 5.08259C24.6864 5.12277 24.8973 5.14286 25.0714 5.14286H25.7143V18H25.0714C24.8571 18 24.6194 18.0603 24.3582 18.1808C24.0971 18.3014 23.8292 18.4822 23.5547 18.7232C23.2801 18.9643 23.0223 19.202 22.7812 19.4364C22.5402 19.6708 22.2723 19.9654 21.9777 20.3203C21.683 20.6753 21.452 20.9598 21.2846 21.1741C21.1172 21.3884 20.9062 21.663 20.6518 21.9978C20.3973 22.3326 20.2433 22.5335 20.1897 22.6005C19.4531 23.5112 18.9375 24.1206 18.6428 24.4286C18.0937 25.0045 17.6953 25.7378 17.4475 26.6284C17.1998 27.519 16.9955 28.3594 16.8348 29.1496C16.6741 29.9398 16.4196 30.509 16.0714 30.8572ZM31.0057 18.0614H27.7288V5.06698H31.0509L31.0057 18.0614Z",fill:"currentColor"}));class In extends h.Component{renderName(){const{name:t,wind:n,nameWidth:r,inlineWind:s}=this.props;return a.jsx("div",{className:"player__name-container",children:a.jsxs("div",{className:"player__name",style:{width:r},children:[s&&a.jsx("span",{className:"player__inline-wind",children:n}),t]})})}onRiichiClick(){const{riichiButton:t}=this.props;t&&t.mode!==b.DISABLE&&t.onClick()}renderRiichiButton(){const{verticalButtons:t,riichiButton:n}=this.props;return n!==void 0?a.jsx("div",{onClick:this.onRiichiClick.bind(this),className:C("player__riichi-button",{"player__riichi-button--rotated":t},{"player__riichi-button--empty":n.mode===b.IDLE}),children:a.jsx(bi,{})}):null}onWinClick(){const{winButton:t}=this.props;t&&t.mode!==b.DISABLE&&t.onClick()}onLoseClick(){const{loseButton:t}=this.props;t&&t.mode!==b.DISABLE&&t.onClick()}renderButtons(){const{startWithName:t,verticalButtons:n,winButton:r,loseButton:s,showDeadButton:o,onDeadButtonClick:l}=this.props,c=r!==void 0,u=s!==void 0,f=c&&!u||u&&!c;return a.jsxs(a.Fragment,{children:[!t&&this.renderRiichiButton(),(c||u||o)&&a.jsxs("div",{className:C("player__button-container",{"player__button-container--horizontal":!n}),children:[c&&r&&a.jsx("div",{onClick:this.onWinClick.bind(this),className:C("player__button flat-btn",{"flat-btn--small":!f},{"flat-btn--v-large":f&&n},{"flat-btn--large":f&&!n},{"flat-btn--disabled":r.mode===b.DISABLE},{"flat-btn--success":r.mode===b.PRESSED}),children:a.jsx(go,{})}),u&&s&&a.jsx("div",{onClick:this.onLoseClick.bind(this),className:C("player__button flat-btn",{"flat-btn--small":!f},{"flat-btn--v-large":f&&n},{"flat-btn--large":f&&!n},{"flat-btn--disabled":s.mode===b.DISABLE},{"flat-btn--danger":s.mode===b.PRESSED}),children:a.jsx(Eo,{})}),o&&a.jsx("div",{onClick:l,className:C("player__button flat-btn flat-btn--pressed ",{"flat-btn--v-large":n},{"flat-btn--large":!n}),children:a.jsx("div",{className:"flat-btn__caption",children:"dead hand"})})]}),t&&this.renderRiichiButton()]})}render(){const{wind:t,mode:n,rotated:r,startWithName:s,inlineWind:o,points:l,pointsMode:c,penaltyPoints:u,showInlineRiichi:f,onPlayerClick:_}=this.props;return a.jsxs("div",{className:C("player",{"player--top":n===re.TOP},{"player--right":n===re.RIGHT},{"player--bottom":n===re.BOTTOM},{"player--left":n===re.LEFT},{"player--rotated":r}),onClick:_,children:[s&&this.renderName(),this.renderButtons(),t&&!o&&a.jsx("div",{className:"player__wind-container",children:a.jsx("div",{className:"player__wind",children:t})}),l!==void 0&&a.jsx("div",{className:"player__score-container",children:a.jsxs("div",{className:C("player__score",{"player__score--success":c===z.POSITIVE},{"player__score--danger":c===z.NEGATIVE},{"player__score--active":c===z.ACTIVE}),children:[a.jsxs("p",{children:[l,f&&a.jsx(bi,{className:"player__inline-riichi"})]}),!!u&&a.jsx("div",{className:"player__penalty",children:`${u/1e3}k`})]})}),!s&&this.renderName()]})}}class Uo extends h.Component{constructor(){super(...arguments);E(this,"state",{dimension:"initial"})}componentDidMount(){this.onFrameHeightChanged(),frame.addEventListener("resize",this.onFrameHeightChanged.bind(this))}componentWillUnmount(){frame.removeEventListener("resize",this.onFrameHeightChanged.bind(this))}componentDidUpdate(){const n=this.getDimension();this.state.dimension!==n&&this.setState({dimension:n})}onFrameHeightChanged(){this.setState({dimension:this.getDimension()})}getDimension(){const{selector:n}=this.props;return`${document.querySelector(n).clientHeight}px`}render(){const{children:n,propName:r}=this.props,{dimension:s}=this.state;return h.cloneElement(n,{[r]:s})}}class Jr extends h.Component{render(){const{children:t}=this.props;return a.jsx(Uo,{propName:"nameWidth",selector:".page-table__center",children:t})}}const yo=e=>a.jsx(Jr,{children:a.jsx(In,{...e,mode:re.LEFT,rotated:!0,startWithName:!0,verticalButtons:!0})}),mo=e=>a.jsx(In,{...e,mode:re.BOTTOM}),Ao=e=>a.jsx(In,{...e,mode:re.TOP,startWithName:!0});const Co=e=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e},h.createElement("line",{x1:5,y1:12,x2:19,y2:12}),h.createElement("polyline",{points:"12 5 19 12 12 19"})),wo=e=>h.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},h.createElement("path",{d:"M1 10.3636L12.1459 2L23 10.6483",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),h.createElement("path",{d:"M20.1836 8.41622L20.2273 20.9663L14.3346 21.0189L14.3017 14.8756L9.95964 14.874L9.94138 20.9661L3.75824 20.9278L3.79108 8.33948",stroke:"currentColor",strokeWidth:2,strokeLinejoin:"round"})),Ro=e=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e},h.createElement("polygon",{points:"19 20 9 12 19 4 19 20"}),h.createElement("line",{x1:5,y1:19,x2:5,y2:5}));class pi extends h.Component{onNextButtonClick(){const{isNextDisabled:t,onNextClick:n}=this.props;n&&!t&&n()}onSaveButtonClick(){const{isSaveDisabled:t,onSaveClick:n}=this.props;n&&!t&&n()}render(){const{text:t,showBack:n,showNext:r,isNextDisabled:s,showSave:o,isSaveDisabled:l,showHome:c,showRefresh:u,showAdd:f,showLog:_,onAddClick:I,onBackClick:p,onHomeClick:S,onLogClick:O,onRefreshClick:N}=this.props,U=n&&!!t&&!r&&!o;return a.jsx("div",{className:"bottom-panel",children:a.jsxs("div",{className:"bottom-panel__inner",children:[n&&a.jsx("div",{className:"svg-button",onClick:p,children:a.jsx(di,{})}),!!t&&a.jsx("div",{className:"bottom-panel__text",children:t}),U&&a.jsx("div",{className:"svg-button"}),r&&a.jsx("div",{className:C("svg-button",{"svg-button--disabled":s}),onClick:this.onNextButtonClick.bind(this),children:a.jsx(Co,{})}),o&&a.jsx("div",{className:C("svg-button",{"svg-button--disabled":l}),onClick:this.onSaveButtonClick.bind(this),children:a.jsx(ft,{})}),c&&a.jsx("div",{className:"svg-button",onClick:S,children:a.jsx(wo,{})}),u&&a.jsx("div",{className:"svg-button",onClick:N,children:a.jsx(wr,{})}),f&&a.jsx("div",{className:"svg-button",onClick:I,children:a.jsx(br,{})}),_&&a.jsx("div",{className:"svg-button",onClick:O,children:a.jsx(Ro,{})})]})})}}const D=20,Ne=4,bo=8,ko=11,ki=7,lt=1,Ho=1.8,rn=42,sn=7;class P{constructor(t,n){E(this,"x");E(this,"y");this.x=t,this.y=n}}var M=(e=>(e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_LEFT=2]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=3]="BOTTOM_RIGHT",e))(M||{});function Pn(e,t,n,r){const s=Hi(e.x,t.x,n.x,r),o=Hi(e.y,t.y,n.y,r);return new P(s,o)}function Hi(e,t,n,r){return(1-r)*(1-r)*e+2*r*(1-r)*t+r*r*n}function Zr(e,t){const n=t.x-e.x,r=e.y-t.y,s=1,o=0,l=(n*s+r*o)/(Math.sqrt(n*n+r*r)*Math.sqrt(s*s+o*o));return Math.acos(l)*180/Math.PI}function Mi(e,t,n){const s=Pn(e,t,n,.08);return Zr(e,s)}function et(e){return e.honbaPoints?`${e.points} + ${e.honbaPoints}`:e.points.toString()}const Nn=h.memo(function(t){const{payment:n,pathId:r,withPao:s,isTextAbove:o,direction:l}=t;if(n==="0"&&!s)return null;const c=Ne+(o?0:bo),u=[M.TOP_RIGHT,M.BOTTOM_RIGHT].includes(l)?1:-1,f=[M.BOTTOM_RIGHT,M.BOTTOM_LEFT].includes(l)?1:-1,_=c*u,I=c*f,p=n!=="0"?n+(s?" (pao)":""):"pao";return a.jsx("text",{transform:`translate(${_} ${I})`,children:a.jsx("textPath",{xlinkHref:"#"+r,startOffset:"50%",textAnchor:"middle",fill:"currentColor",children:p})})}),Sn=h.memo(function(t){const{id:n,start:r,center:s,end:o}=t;return a.jsx("g",{children:a.jsx("path",{id:n,d:`M ${r.x},${r.y} Q${s.x},${s.y} ${o.x},${o.y} `,stroke:"currentColor"})})}),Oi=h.memo(function(t){const{offsetX:n,offsetY:r,angle:s}=t;return a.jsx("g",{transform:`translate(${n} ${r})`,children:a.jsxs("g",{transform:`rotate(${s})`,children:[a.jsx("rect",{width:rn,height:sn,x:lt/2-rn/2,y:lt/2-sn/2,rx:"4",ry:"4",stroke:"currentColor",strokeWidth:lt}),a.jsx("circle",{r:Ho,cx:lt/2,cy:lt/2,style:{fill:"var(--color-danger)"}})]})})}),Tn=h.memo(function(t){const{start:n,center:r,end:s,inverted:o,direction:l}=t,c=.5,u=Pn(n,r,s,c),f=Pn(n,r,s,c+.02),_=[M.TOP_RIGHT,M.BOTTOM_LEFT].includes(l)?1:-1,I=Zr(u,f)*_,p=[M.TOP_RIGHT,M.BOTTOM_RIGHT].includes(l)?-1:1,S=[M.BOTTOM_RIGHT,M.BOTTOM_LEFT].includes(l)?-1:1,O=6,N=u.x+O*p,U=u.y+O*S;return a.jsx(Oi,{offsetX:N,offsetY:U,angle:I})}),$e=h.memo(function(t){const{offset:n,angle:r}=t;return a.jsx("g",{transform:`translate(${n.x} ${n.y})`,children:a.jsxs("g",{transform:`rotate(${r})`,children:[a.jsx("rect",{x:"-1",y:-ki/2,width:ko,height:ki,style:{fill:"var(--bg-color)"}}),a.jsx("path",{d:"m 0,0 12.693819,-3.57903 c -1.499915,3.09366 -0.947277,5.02928 0,7.17478 l -12.693819,-3.59575",fill:"currentColor"})]})})}),gn=h.memo(function(t){const{start:n,center:r,end:s,inverted:o,direction:l}=t;if(o){const c=[M.TOP_RIGHT,M.BOTTOM_LEFT].includes(l)?1:-1,u=Mi(n,r,s)*c;return a.jsx($e,{offset:n,angle:u})}else{const c=[M.TOP_LEFT,M.BOTTOM_RIGHT].includes(l)?1:-1,u=Mi(s,r,n)*c;return a.jsx($e,{offset:s,angle:u})}}),Mo=h.memo(function(t){const{offsetX:n,offsetY:r,width:s,height:o,arrows:l}=t,c=l.BottomLeft??l.LeftBottom;if(!c)return null;const u=c.start===q.LEFT,f=c.withRiichi,_=et(c),I="left-bottom",p=M.BOTTOM_LEFT,S=new P(0,o/2+D),O=new P(s/2-D-n,o/2+D+r),N=new P(s/2-D,o);return a.jsxs("g",{children:[a.jsx(Sn,{id:I,start:S,center:O,end:N}),a.jsx(gn,{start:S,center:O,end:N,inverted:!u,direction:p}),f&&a.jsx(Tn,{start:S,center:O,end:N,inverted:!u,direction:p}),a.jsx(Nn,{payment:_,pathId:I,withPao:c.withPao,isTextAbove:!1,direction:p})]})}),vo=h.memo(function(t){const{offsetX:n,offsetY:r,width:s,height:o,arrows:l}=t,c=l.BottomRight??l.RightBottom;if(!c)return null;const u=c.start===q.BOTTOM,f=et(c),_="bottom-right",I=M.BOTTOM_RIGHT,p=new P(s/2+D,o),S=new P(s/2+D+n,o/2+D+r),O=new P(s,o/2+D);return a.jsxs("g",{children:[a.jsx(Sn,{id:_,start:p,center:S,end:O}),a.jsx(gn,{start:p,center:S,end:O,inverted:!u,direction:I}),c.withRiichi&&a.jsx(Tn,{start:p,center:S,end:O,inverted:!u,direction:I}),a.jsx(Nn,{payment:f,pathId:_,withPao:c.withPao,isTextAbove:!1,direction:I})]})}),xo=h.memo(function(t){const{width:n,height:r,arrows:s}=t,o=s.BottomTop??s.TopBottom;if(!o)return null;const l=o.start===q.TOP,c=S=>S?"start":"end",u=S=>S?"5%":"95%",f=n/2-sn/2-Ne,_=r*.05+rn/2,I=et(o),p="top-bottom";return a.jsx("g",{children:a.jsxs("g",{children:[a.jsx("path",{id:p,d:`M ${n/2} 0 V ${r}`,stroke:"currentColor",fill:"none"}),l&&a.jsx($e,{offset:new P(n/2,r),angle:-90}),!l&&a.jsx($e,{offset:new P(n/2,0),angle:90}),I!=="0"&&a.jsx("text",{transform:`translate(${Ne} 0)`,children:a.jsx("textPath",{xlinkHref:"#"+p,startOffset:u(!l),textAnchor:c(!l),fill:"currentColor",children:I})}),o.withRiichi&&a.jsx(Oi,{offsetX:f,offsetY:_,angle:90}),o.withPao&&a.jsx("text",{transform:`translate(${Ne} 0)`,children:a.jsx("textPath",{xlinkHref:"#"+p,startOffset:u(l),textAnchor:c(l),fill:"currentColor",children:"pao"})})]})})}),Do=h.memo(function(t){const{width:n,height:r,arrows:s}=t,o=s.LeftRight??s.RightLeft;if(!o)return null;const l=o.start===q.LEFT,c=S=>S?"start":"end",u=S=>S?"5%":"95%",f=n*.05+rn/2,_=r/2+sn/2+Ne,I=et(o),p="left-right";return a.jsxs("g",{children:[a.jsx("path",{id:p,d:`M 0 ${r/2} H ${n}`,stroke:"currentColor",fill:"none"}),!l&&a.jsx($e,{offset:new P(0,r/2),angle:0}),l&&a.jsx($e,{offset:new P(n,r/2),angle:180}),I!=="0"&&a.jsx("text",{transform:`translate(0 ${-Ne})`,children:a.jsx("textPath",{xlinkHref:"#"+p,startOffset:u(!l),textAnchor:c(!l),fill:"currentColor",children:I})}),o.withRiichi&&a.jsx(Oi,{offsetX:f,offsetY:_,angle:0}),o.withPao&&a.jsx("text",{transform:`translate(0 ${-Ne})`,children:a.jsx("textPath",{xlinkHref:"#"+p,startOffset:u(l),textAnchor:c(l),fill:"currentColor",children:"pao"})})]})}),Po=h.memo(function(t){const{offsetX:n,offsetY:r,width:s,height:o,arrows:l}=t,c=l.TopLeft??l.LeftTop;if(!c)return null;const u=c.start===q.LEFT,f=c.withRiichi,_=et(c),I="top-left",p=M.TOP_LEFT,S=new P(0,o/2-D),O=new P(s/2-D-n,o/2-D-r),N=new P(s/2-D,0);return a.jsxs("g",{children:[a.jsx(Sn,{id:I,start:S,center:O,end:N}),a.jsx(gn,{start:S,center:O,end:N,inverted:!u,direction:p}),f&&a.jsx(Tn,{start:S,center:O,end:N,inverted:!u,direction:p}),a.jsx(Nn,{payment:_,pathId:I,withPao:c.withPao,isTextAbove:!0,direction:p})]})}),Lo=h.memo(function(t){const{offsetX:n,offsetY:r,width:s,height:o,arrows:l}=t,c=l.TopRight??l.RightTop;if(!c)return null;const u=c.start===q.TOP,f=c.withRiichi,_=et(c),I="top-right",p=M.TOP_RIGHT,S=new P(s/2+D,0),O=new P(s/2+D+n,o/2-D-r),N=new P(s,o/2-D);return a.jsxs("g",{children:[a.jsx(Sn,{id:I,start:S,center:O,end:N}),a.jsx(gn,{start:S,center:O,end:N,inverted:!u,direction:p}),f&&a.jsx(Tn,{start:S,center:O,end:N,inverted:!u,direction:p}),a.jsx(Nn,{payment:_,pathId:I,withPao:c.withPao,isTextAbove:!0,direction:p})]})});class Bo extends h.PureComponent{constructor(){super(...arguments);E(this,"state",{width:0,height:0});E(this,"containerRef",h.createRef())}componentDidMount(){this.onFrameHeightChanged(),frame.addEventListener("resize",this.onFrameHeightChanged.bind(this))}componentWillUnmount(){frame.removeEventListener("resize",this.onFrameHeightChanged.bind(this))}onFrameHeightChanged(){const n=this.containerRef.current;n&&this.setState({width:n.clientWidth,height:n.clientHeight})}render(){const{width:n,height:r}=this.state,{arrows:s}=this.props,o=.1*(n/2-D*2),l=.1*(r/2-D*2),c={};return s.forEach(u=>{let f=q[u.start].toLowerCase();f=f[0].toUpperCase()+f.slice(1);let _=q[u.end].toLowerCase();_=_[0].toUpperCase()+_.slice(1),c[f+_]=u}),a.jsx("div",{className:"result-arrows",children:a.jsx("div",{className:"result-arrows__inner",ref:this.containerRef,children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:r,viewBox:`0 0 ${n} ${r}`,fill:"none",stroke:"none",children:[a.jsx(Mo,{offsetX:o,offsetY:l,arrows:c,width:n,height:r}),a.jsx(vo,{offsetX:o,offsetY:l,arrows:c,width:n,height:r}),a.jsx(Po,{offsetX:o,offsetY:l,arrows:c,width:n,height:r}),a.jsx(Lo,{offsetX:o,offsetY:l,arrows:c,width:n,height:r}),a.jsx(xo,{arrows:c,width:n,height:r}),a.jsx(Do,{arrows:c,width:n,height:r})]})})})}}const Go=e=>a.jsx(Jr,{children:a.jsx(In,{...e,mode:re.RIGHT,rotated:!0,verticalButtons:!0})}),vi=h.memo(function({icon:e,count:t}){return a.jsxs("div",{className:"table-info__tenbou",children:[a.jsx("div",{className:"svg-item",children:e}),a.jsx("div",{className:"table-info__tenbou-count",children:t})]})}),jo=e=>h.createElement("svg",{width:32,height:12,viewBox:"0 0 32 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},h.createElement("circle",{cx:16,cy:6,r:1.5,fill:"currentColor"}),h.createElement("rect",{x:1.5,y:1.5,width:29,height:9,rx:4.5,stroke:"currentColor"})),Ko=e=>h.createElement("svg",{width:32,height:12,viewBox:"0 0 32 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},h.createElement("rect",{x:1.5,y:1.5,width:29,height:9,rx:4.5,stroke:"currentColor"}),h.createElement("circle",{cx:10.3,cy:4.5,r:.9,fill:"currentColor"}),h.createElement("circle",{cx:14.1,cy:4.5,r:.9,fill:"currentColor"}),h.createElement("circle",{cx:17.9,cy:4.5,r:.9,fill:"currentColor"}),h.createElement("circle",{cx:21.7,cy:4.5,r:.9,fill:"currentColor"}),h.createElement("circle",{cx:10.3,cy:7.5,r:.9,fill:"currentColor"}),h.createElement("circle",{cx:14.1,cy:7.5,r:.9,fill:"currentColor"}),h.createElement("circle",{cx:17.9,cy:7.5,r:.9,fill:"currentColor"}),h.createElement("circle",{cx:21.7,cy:7.5,r:.9,fill:"currentColor"})),Fo=e=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e},h.createElement("polyline",{points:"23 4 23 10 17 10"}),h.createElement("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})),Yo=e=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e},h.createElement("polyline",{points:"1 4 1 10 7 10"}),h.createElement("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})),zo=h.memo(function(e){const t=h.useContext(k),{showRoundInfo:n,showTableNumber:r,showRotators:s,showTimer:o,gamesLeft:l,round:c,honbaCount:u,riichiCount:f,currentTime:_,tableNumber:I,timerWaiting:p,onTableInfoToggle:S,onRotateCcwClick:O,onRotateCwClick:N}=e;return!n&&!r?null:a.jsxs("div",{className:"table-info",children:[s&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"table-info__rotator_ccw",onClick:O,children:a.jsx(Fo,{})}),a.jsx("div",{className:"table-info__rotator_cw",onClick:N,children:a.jsx(Yo,{})})]}),a.jsxs("div",{className:"table-info__info",onClick:S,children:[n&&a.jsxs(a.Fragment,{children:[!!c&&a.jsx("div",{className:"table-info__round",children:c}),f!==void 0&&a.jsx(vi,{icon:a.jsx(jo,{}),count:f}),u!==void 0&&a.jsx(vi,{icon:a.jsx(Ko,{}),count:u}),o&&a.jsx("div",{className:"table-info__timer",children:_}),l&&a.jsx("div",{className:"table-info__games-left",children:a.jsx("div",{className:"table-info__games-left-count",children:t._nt(["%1 deal left","%1 deals left"],l,[l])})})]}),r&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"table-info__table-caption",children:t._t("Table #%1",[I])}),o&&!p&&a.jsx("div",{className:"table-info__timer",children:_})]})]})]})});const Wo=h.memo(function(e){const{text:t,onSelect:n}=e,r=s=>{s.stopPropagation(),n()};return a.jsx("div",{className:"select-modal__item",onClick:r,children:t})});class qr extends h.Component{constructor(n){super(n);E(this,"element");this.element=document.createElement("div")}componentDidMount(){document.getElementById("screen").appendChild(this.element)}componentWillUnmount(){document.getElementById("screen").removeChild(this.element)}render(){return a.jsx(a.Fragment,{children:Is.createPortal(this.renderModal(),this.element)})}renderModal(){const{items:n,onHide:r}=this.props;return a.jsxs("div",{className:"modal",onClick:r,children:[a.jsx("div",{className:"modal__bg"}),a.jsxs("div",{className:"modal__content select-modal",children:[a.jsx("div",{className:"select-modal__pointer"}),a.jsx("div",{className:"select-modal__items",children:n.filter(s=>!s.unavailable).map((s,o)=>a.jsx(Wo,{...s},o))})]})]})}}class Vo extends h.Component{render(){const{topPlayer:t,leftPlayer:n,rightPlayer:r,bottomPlayer:s,bottomPanel:o,outcomeModal:l,tableInfo:c,arrowsInfo:u}=this.props;return a.jsxs("div",{className:"flex-container page-table",children:[a.jsxs("div",{className:"flex-container__content flex-container",children:[a.jsx("div",{className:"flex-container__top",children:a.jsx(Ao,{...t})}),a.jsxs("div",{className:"flex-container__content page-table__center",children:[a.jsx(yo,{...n}),!!c&&a.jsx(zo,{...c}),!!u&&a.jsx(Bo,{...u}),a.jsx(Go,{...r})]}),a.jsx("div",{className:"flex-container__bottom",children:a.jsx(mo,{...s})})]}),a.jsx("div",{className:"flex-container__bottom",children:a.jsx(pi,{...o})}),!!l&&a.jsx(qr,{...l})]})}}class Xr extends h.Component{render(){const t=this.context,{state:n,dispatch:r}=this.props;if(n.loading.events||n.currentScreen==="overview"&&(!n.gameOverviewReady||!n.players||n.players.length!==4)||n.loading.addRound||n.loading.overview)return a.jsx(Te,{});const o=Va(t,n,r),l=$a(t,n,r),c=Ja(t,n,r),u=Za(t,n,r),f=io(n,r),_=qa(t,n,r),I=eo(t,n,r),p=ro(n);return a.jsx(Vo,{topPlayer:o,leftPlayer:l,rightPlayer:c,bottomPlayer:u,tableInfo:f,arrowsInfo:p,outcomeModal:_,bottomPanel:I})}}E(Xr,"contextType",k);class $o extends h.Component{onYakuClick(t){t.disabled||t.onClick()}render(){const{yakuGroups:t}=this.props;return a.jsx("div",{className:"select-yaku-panel",children:t.map((n,r)=>a.jsx("div",{className:"select-yaku-panel__group",children:n.map((s,o)=>a.jsx("div",{className:C("select-yaku-panel__button",{"select-yaku-panel__button--pressed":s.pressed},{"select-yaku-panel__button--disabled":s.disabled}),onClick:()=>this.onYakuClick(s),children:s.name},o))},r))})}}class Jo extends h.Component{get items(){const{possibleValues:t,onChange:n}=this.props;return t.map(s=>({text:s.toString(),onSelect:()=>n(s)}))}render(){return a.jsx(qr,{items:this.items,onHide:this.props.onHide})}}class ht extends h.Component{constructor(t){super(t),this.state={isModalShown:!1}}onValueClick(){const{possibleValues:t}=this.props;t.length!==0&&this.setState({isModalShown:!0})}onValueSelect(t){const{onChange:n}=this.props;this.hideModal(),n(t)}hideModal(){this.setState({isModalShown:!1})}get canDecrease(){const{value:t,possibleValues:n}=this.props;return t>n[0]}get canIncrease(){const{value:t,possibleValues:n}=this.props;return t<n[n.length-1]}decrease(){if(this.canDecrease){const{value:t,possibleValues:n,onChange:r}=this.props,s=n.indexOf(t),o=n[s-1];r(o)}}increase(){if(this.canIncrease){const{value:t,possibleValues:n,onChange:r}=this.props,s=n.indexOf(t),o=n[s+1];r(o)}}render(){const t=this.context,{value:n,possibleValues:r}=this.props,{isModalShown:s}=this.state,o=r.length!==0&&!r.includes(n),l=r.length===0||o?"?":n;return o&&alert(t._t("something goes wrong, please contact your administrator")),a.jsxs("div",{className:"number-select",children:[a.jsx("div",{className:C("number-select__minus svg-button svg-button--xsmall",{"svg-button--disabled":!this.canDecrease}),onClick:this.decrease.bind(this),children:a.jsx("svg",{children:a.jsx("path",{d:"M 6 12 H 18",stroke:"currentColor",strokeWidth:2,fill:"none"})})}),a.jsx("div",{className:"number-select__value",onClick:this.onValueClick.bind(this),children:l}),a.jsx("div",{className:C("number-select__plus svg-button svg-button--xsmall",{"svg-button--disabled":!this.canIncrease}),onClick:this.increase.bind(this),children:a.jsxs("svg",{children:[a.jsx("path",{d:"M 6 12 H 18",stroke:"currentColor",strokeWidth:2,fill:"none"}),a.jsx("path",{d:"M 12 6 V 18",stroke:"currentColor",strokeWidth:2,fill:"none"})]})}),s&&a.jsx(Jo,{onChange:this.onValueSelect.bind(this),possibleValues:r,onHide:this.hideModal.bind(this)})]})}}E(ht,"contextType",k);class Qr extends h.Component{get hanCount(){const{yakuHan:t,doraCount:n,uraDoraCount:r=0,redFivesCount:s=0}=this.props;return t+n+r+s}render(){const t=this.context,{isYakuman:n,yakuHan:r,doraCount:s,doraValues:o,onDoraSelected:l,withUraDora:c,uraDoraCount:u,uraDoraValues:f,onUraDoraSelected:_,withRedFives:I,redFivesCount:p,redFivesValues:S,onRedFivesSelected:O,fuCount:N,fuValues:U,onFuSelected:y}=this.props,w=N?t._t("%1 han %2 fu",[this.hanCount,N]):t._t("%1 han",[this.hanCount]);return a.jsxs("div",{className:"select-total-panel",children:[!n&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"select-total-panel__top-group",children:[t._t("Han from yaku")," ",a.jsx("span",{children:r})]}),a.jsxs("div",{className:"select-total-panel__max",children:[a.jsxs("div",{className:"select-total-panel__select-group",children:[a.jsx("div",{className:"select-total-panel__select-group-caption",children:t._t("Dora")}),a.jsx(ht,{value:s,possibleValues:o,onChange:l})]}),c&&u!==void 0&&f!==void 0&&a.jsxs("div",{className:"select-total-panel__select-group",children:[a.jsx("div",{className:"select-total-panel__select-group-caption",children:t._t("Ura dora")}),a.jsx(ht,{value:u,possibleValues:f,onChange:_})]}),I&&p!==void 0&&S!==void 0&&a.jsxs("div",{className:"select-total-panel__select-group",children:[a.jsx("div",{className:"select-total-panel__select-group-caption",children:t._t("Red fives")}),a.jsx(ht,{value:p,possibleValues:S,onChange:O})]}),a.jsxs("div",{className:"select-total-panel__select-group",children:[a.jsx("div",{className:"select-total-panel__select-group-caption",children:t._t("Fu")}),a.jsx(ht,{value:N,possibleValues:U,onChange:y})]})]}),a.jsx("div",{className:"select-total-panel__bottom-group",children:w})]}),n&&a.jsx("div",{className:"select-total-panel__center",children:t._t("Yakuman")})]})}}E(Qr,"contextType",k);class Zo extends h.Component{render(){const{items:t}=this.props;return a.jsx("div",{className:"tab-panel",children:a.jsx("div",{className:"tab-panel__items",children:t.map((n,r)=>a.jsx("div",{className:C("tab-panel__item",{"tab-panel__item--active":n.isActive}),onClick:n.onClick,children:n.caption},r))})})}}var J=(e=>(e[e.UNAVAILABLE=0]="UNAVAILABLE",e[e.AVAILABLE=1]="AVAILABLE",e[e.DISABLED=2]="DISABLED",e))(J||{}),Z=(e=>(e.YAKU="Yaku",e.TOTAL="Total",e))(Z||{});const qo=e=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e},h.createElement("polyline",{points:"15 18 9 12 15 6"})),Xo=e=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e},h.createElement("polyline",{points:"9 18 15 12 9 6"})),Qo=(e,t)=>[{caption:Z.YAKU,isActive:e===Z.YAKU,onClick:()=>t(Z.YAKU)},{caption:Z.TOTAL,isActive:e===Z.TOTAL,onClick:()=>t(Z.TOTAL)}];class el extends h.Component{onLeftArrowClick(){const{leftArrowState:t,leftArrowClick:n}=this.props;t!==J.DISABLED&&n()}onRightArrowClick(){const{rightArrowState:t,rightArrowClick:n}=this.props;t!==J.DISABLED&&n()}render(){const{playerName:t,yakuGroups:n,bottomPanelText:r,leftArrowState:s,rightArrowState:o,activeTab:l,onTabClick:c,onBackClick:u,canGoNext:f,onNextClick:_,isYakuman:I,yakuHan:p,doraCount:S,doraValues:O,onDoraSelected:N,withUraDora:U,uraDoraCount:y,uraDoraValues:w,onUraDoraSelected:v,withRedFives:V,redFivesCount:pe,redFivesValues:tt,onRedFivesSelected:ne,fuCount:nt,fuValues:it,onFuSelected:rt}=this.props;return a.jsxs("div",{className:"flex-container page-select-hand",children:[a.jsxs("div",{className:"page-select-hand__top-panel top-panel top-panel--between",children:[a.jsx("div",{className:"page-select-hand__top-panel-arrow",children:s!==J.UNAVAILABLE&&a.jsx("div",{className:C("svg-button svg-button--xsmall",{"svg-button--disabled":s===J.DISABLED}),onClick:this.onLeftArrowClick.bind(this),children:a.jsx(qo,{})})}),a.jsx("div",{className:"page-select-hand__player-name",children:t}),a.jsx("div",{className:"page-select-hand__top-panel-arrow",children:o!==J.UNAVAILABLE&&a.jsx("div",{className:C("svg-button svg-button--xsmall",{"svg-button--disabled":o===J.DISABLED}),onClick:this.onRightArrowClick.bind(this),children:a.jsx(Xo,{})})})]}),a.jsx(Zo,{items:Qo(l,c)}),l===Z.YAKU&&a.jsx($o,{yakuGroups:n}),l===Z.TOTAL&&a.jsx(Qr,{isYakuman:I,yakuHan:p,doraCount:S,doraValues:O,onDoraSelected:N,withUraDora:U,uraDoraCount:y,uraDoraValues:w,onUraDoraSelected:v,withRedFives:V,redFivesCount:pe,redFivesValues:tt,onRedFivesSelected:ne,fuCount:nt,fuValues:it,onFuSelected:rt}),a.jsx("div",{className:"flex-container__bottom",children:a.jsx(pi,{text:r,showBack:!0,showNext:!0,isNextDisabled:!f,onBackClick:u,onNextClick:_})})]})}}function En(e,t){return e.map(n=>n.filter(r=>r.id===i.__OPENHAND||t.includes(r.id))).filter(n=>n.length>0)}const tl=[A.filter(e=>[i.__OPENHAND].includes(e.id)),A.filter(e=>[i.RIICHI,i.IPPATSU,i.MENZENTSUMO].includes(e.id)),A.filter(e=>[i.PINFU,i.TANYAO].includes(e.id)),A.filter(e=>[i.YAKUHAI1,i.YAKUHAI2,i.YAKUHAI3].includes(e.id)),A.filter(e=>[i.ITTSU,i.HONITSU,i.CHINITSU].includes(e.id)),A.filter(e=>[i.TOITOI,i.CHIITOITSU].includes(e.id)),A.filter(e=>[i.CHANTA,i.JUNCHAN].includes(e.id)),A.filter(e=>[i.SANSHOKUDOUJUN,i.IIPEIKOU].includes(e.id))],nl=[A.filter(e=>[i.DOUBLERIICHI,i.OPENRIICHI].includes(e.id)),A.filter(e=>[i.HONROTO,i.SHOSANGEN,i.YAKUHAI4].includes(e.id)),A.filter(e=>[i.SANANKOU,i.SANSHOKUDOUKOU,i.SANKANTSU].includes(e.id)),A.filter(e=>[i.RYANPEIKOU].includes(e.id)),A.filter(e=>[i.HAITEI,i.HOUTEI,i.RINSHANKAIHOU].includes(e.id)),A.filter(e=>[i.CHANKAN,i.RENHOU].includes(e.id))],il=[A.filter(e=>[i.TENHOU,i.CHIHOU].includes(e.id)),A.filter(e=>[i.DAISANGEN,i.DAISUUSHII,i.SHOSUUSHII].includes(e.id)),A.filter(e=>[i.SUUANKOU,i.SUUKANTSU].includes(e.id)),A.filter(e=>[i.CHINROTO,i.TSUUIISOU,i.KOKUSHIMUSOU].includes(e.id)),A.filter(e=>[i.RYUUIISOU,i.CHUURENPOUTO].includes(e.id))];function rl(e){if(!e.gameConfig)return{};const t={};for(const n of Y(e)){const r=En(tl,e.gameConfig.rulesetConfig.allowedYaku),s=En(nl,e.gameConfig.rulesetConfig.allowedYaku),o=En(il,e.gameConfig.rulesetConfig.allowedYaku);t[n.id]=r.concat(s).concat(o)}return t}const es=B(rl);function sl(e){const t=es(e),n=ka(e);return Y(e).reduce((s,o)=>{s[o.id]={};for(const l of t[o.id])for(const c of l)!n.includes(c.id)&&!Gr(e,c.id)&&(s[o.id][c.id]=!0);return s},{})}const al=B(sl);class ts extends h.Component{onTabClick(t){const{state:n,dispatch:r}=this.props;n.currentSelectHandTab==="yaku"&&t===Z.TOTAL?r({type:Ce,payload:"total"}):n.currentSelectHandTab==="total"&&t===Z.YAKU&&r({type:Ce,payload:"yaku"})}onYakuClick(t){const{state:n,dispatch:r}=this.props;Gr(n,t)?r({type:Vn,payload:{id:t,winner:n.multironCurrentWinner}}):r({type:ln,payload:{id:t,winner:n.multironCurrentWinner}})}onBackClick(){const{dispatch:t}=this.props;t({type:G})}onNextClick(){const{dispatch:t}=this.props;t({type:de})}onDoraSelected(t){const{state:n,dispatch:r}=this.props;r({type:Vi,payload:{count:t,winner:n.multironCurrentWinner}})}onUraDoraSelected(t){}onRedFivesSelected(t){}onFuSelected(t){const{state:n,dispatch:r}=this.props;r({type:$i,payload:{count:t,winner:n.multironCurrentWinner}})}onLeftArrowClick(){this.goToMultironUser(-1)}onRightArrowClick(){this.goToMultironUser(1)}goToMultironUser(t){const{state:n,dispatch:r}=this.props,s=n.multironCurrentWinner;if(s){const o=Y(n),l=o.findIndex(c=>c.id===s);if(l!==-1){const c=o[l+t].id;r({type:Ae,payload:{winner:c}}),r({type:Ce,payload:"yaku"})}}}render(){const t=this.context,{state:n}=this.props;if(!n.currentOutcome||n.currentOutcome.selectedOutcome!==d.ROUND_OUTCOME_RON&&n.currentOutcome.selectedOutcome!==d.ROUND_OUTCOME_TSUMO)return null;const r=n.multironCurrentWinner;if(!r)return null;const s=Y(n),o=s.find(Oe=>Oe.id===r),l=o!==void 0?o.title:"",c=Vr(t,n.currentOutcome.selectedOutcome),u=!!Ba(n);let f=J.UNAVAILABLE,_=J.UNAVAILABLE;s.length>1&&(f=s[0].id===r?J.DISABLED:J.AVAILABLE,_=s[s.length-1].id===r?J.DISABLED:J.AVAILABLE);const I=n.currentSelectHandTab==="total"?Z.TOTAL:Z.YAKU,p=nn(n),S=al(n)[r],O=es(n)[r],N=[];O.forEach(Oe=>{const R=[];Oe.forEach(ye=>{const ps={name:ye.name(t),onClick:()=>this.onYakuClick(ye.id),disabled:S[ye.id],pressed:p.includes(ye.id)};R.push(ps)}),N.push(R)});const U=fi(n,r),y=U<0,w=xn(n,r),v=La(n),V=!1,pe=void 0,tt=void 0,ne=!1,nt=void 0,it=void 0,rt=vn(n,r),at=U>0&&w+U<=4?Da(n):[];return a.jsx(el,{playerName:l,yakuGroups:N,bottomPanelText:c,leftArrowState:f,leftArrowClick:this.onLeftArrowClick.bind(this),rightArrowState:_,rightArrowClick:this.onRightArrowClick.bind(this),activeTab:I,onTabClick:this.onTabClick.bind(this),canGoNext:u,onNextClick:this.onNextClick.bind(this),onBackClick:this.onBackClick.bind(this),isYakuman:y,yakuHan:U,doraCount:w,doraValues:v,onDoraSelected:this.onDoraSelected.bind(this),withUraDora:V,uraDoraCount:pe,uraDoraValues:tt,onUraDoraSelected:this.onUraDoraSelected.bind(this),withRedFives:ne,redFivesCount:nt,redFivesValues:it,onRedFivesSelected:this.onRedFivesSelected.bind(this),fuCount:rt,fuValues:at,onFuSelected:this.onFuSelected.bind(this)})}}E(ts,"contextType",k);const ol=e=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...e},h.createElement("polyline",{points:"17 1 21 5 17 9"}),h.createElement("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),h.createElement("polyline",{points:"7 23 3 19 7 15"}),h.createElement("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})),ll=h.memo(function(e){const{players:t,showRepeatButton:n,onCheckClick:r,onRepeatClick:s}=e,o=h.useContext(k);return a.jsxs("div",{className:"page-game-result",children:[t.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"page-game-result__players",children:t.map((l,c)=>a.jsxs("div",{className:"player-result",children:[a.jsx("div",{className:"player-result__name",children:l.name}),a.jsxs("div",{className:"player-result__score-container",children:[a.jsx("div",{className:"player-result__score",children:l.score}),a.jsx("div",{className:C("player-result__delta",{"player-result__delta--danger":l.delta<0},{"player-result__delta--success":l.delta>0}),children:l.delta<=0?l.delta:`+${l.delta}`})]})]},c))}),a.jsxs("div",{className:"page-game-result__buttons",children:[n&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flat-btn flat-btn--medium",onClick:s,children:a.jsx(ol,{})}),a.jsx("div",{className:"flat-btn flat-btn--medium",onClick:r,children:a.jsx(ft,{})})]}),!n&&a.jsx("div",{className:"flat-btn flat-btn--large",onClick:r,children:a.jsx(ft,{})})]})]}),t.length===0&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"page-game-result__no-games",children:o._t("No games found")}),a.jsx("div",{className:"page-game-result__buttons",children:a.jsx("div",{className:"flat-btn flat-btn--large",onClick:r,children:a.jsx(ft,{})})})]})]})}),cl=e=>{const{state:t,dispatch:n}=e;if(t.currentScreen!=="lastResults"||kr(t)||!t.gameConfig)return a.jsx(Te,{});let r=[];t.lastResults&&(r=t.lastResults.map(c=>({name:c.title,score:c.score,delta:c.ratingDelta})));const s=!t.gameConfig.autoSeating&&!t.currentSessionHash&&!t.gameConfig.isPrescripted,o=h.useCallback(()=>{n({type:de})},[n]),l=h.useCallback(()=>{let c;t.lastResults&&(c=t.lastResults.map(u=>u.playerId)),n({type:on,payload:c})},[t.lastResults,n]);return a.jsx(ll,{players:r,showRepeatButton:s,onCheckClick:o,onRepeatClick:l})};const ul=({onSubmit:e,signupLink:t,recoveryLink:n})=>{const r=h.useContext(k),[s,o]=h.useState(""),[l,c]=h.useState("");return a.jsxs("form",{className:"page-enter-credentials",onSubmit:u=>(e(s,l),u.preventDefault(),!1),children:[a.jsx("div",{className:"page-enter-credentials__title",children:r._t("Pantheon: log in")}),a.jsxs("div",{className:"page-enter-credentials__form",children:[a.jsx("input",{className:"page-enter-credentials__input",type:"text",placeholder:r._t("Email"),onChange:u=>o(u.currentTarget.value)}),a.jsx("input",{className:"page-enter-credentials__input",type:"password",placeholder:r._t("Password"),onChange:u=>c(u.currentTarget.value)})]}),a.jsx("div",{className:"page-enter-credentials__button-container",children:a.jsx("button",{className:"flat-btn flat-btn--large",style:{justifySelf:"end",width:"100%"},type:"submit",children:r._t("Log in")})}),a.jsxs("div",{className:"page-enter-credentials__links-container",children:[a.jsx("a",{className:"flat-btn flat-btn--large",href:t,target:"_blank",style:{width:"100%"},children:r._t("Sign up")}),a.jsx("a",{className:"flat-btn flat-btn--large",href:n,target:"_blank",style:{width:"100%"},children:r._t("Forgot password?")})]})]})},dl=e=>{const{dispatch:t}=e,n=h.useCallback((r,s)=>{r.length>0&&s.length>0&&t({type:Ze,payload:{email:r.toLowerCase(),password:s}})},[t]);return a.jsx(ul,{onSubmit:n,signupLink:"https://manage.riichimahjong.org/profile/signup",recoveryLink:"https://manage.riichimahjong.org/profile/resetPassword"})};const hl=({onOkClick:e,recoveryLink:t})=>{const n=h.useContext(k),r=`<a href='https://manage.riichimahjong.org/profile/signup' target='_blank'>${n._pt("Name of registration link","register")}</a>`;return a.jsxs("div",{className:"page-login-error",children:[a.jsx("div",{className:"page-login-error__title",children:n._t("Pantheon")}),a.jsxs("div",{className:"page-login-error__message",children:[a.jsx("div",{children:n._t("Login attempt has failed. Possible reasons are:")}),a.jsxs("ul",{children:[a.jsx("li",{dangerouslySetInnerHTML:{__html:n._t("E-mail is not registered in Pantheon database (%1)",[r])}}),a.jsxs("li",{children:[n._t("Password check has failed")," -"," ",a.jsx("a",{href:t,target:"_blank",children:n._t("Forgot password?")})]}),a.jsx("li",{children:n._t("Unexpected server error")})]}),a.jsx("div",{children:n._t("If in doubt, contact the tournament administrator for further instructions.")})]}),a.jsx("div",{className:"page-login-error__button-container",children:a.jsx("div",{className:"flat-btn flat-btn--large",onClick:e,children:n._t("OK")})})]})},fl=e=>{const{dispatch:t}=e,n=h.useCallback(()=>{t({type:qe})},[t]);return a.jsx(hl,{onOkClick:n,recoveryLink:"https://manage.riichimahjong.org/profile/resetPassword"})},pl=e=>{const{state:t}=e;return t.loading.login?a.jsx(Te,{}):t.loginError?a.jsx(fl,{...e}):a.jsx(dl,{...e})};const Ol=e=>{const{delta:t,score:n}=e;return a.jsxs("div",{className:"page-log__cell",children:[a.jsx("div",{className:C("page-log__delta",{"page-log__delta--success":t>0},{"page-log__delta--danger":t<0}),children:t>0?`+${t}`:t}),a.jsx("div",{className:"page-log__score",children:n+t})]})},_l=e=>{const{players:t,index:n,selectRound:r,round:s,scoresDelta:o,scores:l,children:c}=e,u=h.useCallback(()=>{r(n)},[n,r]);return a.jsxs("div",{className:"page-log__row-container",onClick:u,children:[a.jsxs("div",{className:"page-log__row",children:[a.jsx("div",{className:"page-log__cell page-log__cell--first",children:s}),Object.keys(t).map(f=>{var _,I;return a.jsx(Ol,{delta:((_=o.find(p=>p.playerId===parseInt(f,10)))==null?void 0:_.score)??0,score:((I=l.find(p=>p.playerId===parseInt(f,10)))==null?void 0:I.score)??0},f)})]}),c]})};function _i(e,t,n){if(t<0)return e._t("yakuman");const r=e._t("%1 han",[t]);return t<5&&n?e._t("%1 han %2 fu",[t,n]):r}function Ii(e,t){return e._t("Pao from: %1",[t])}function ge(e,t){return e._t("Honba: %1",[t])}function ns(e,t){return e._t("Tempai: %1",[t.join(", ")])}function Ee(e,t,n){let r;return t.length?(r=t.join(", "),n&&(r+=` + ${n}`)):r=n.toString(),e._t("Riichi bets: %1",[r])}function Ni(e,t,n){const r=e._t("dora %1",[n]);return`${[...t,n?r:null].filter(o=>!!o).join(", ")}`}function Il(e,t){const{winner:n,loser:r,paoPlayer:s,han:o,fu:l,dora:c,yakuList:u,riichiPlayers:f,riichiOnTable:_,honbaOnTable:I}=e,p=[];return p.push(t._t("Ron, %1",[_i(t,o,l)])),p.push(t._t("%1 ← %2",[n,r])),p.push(Ni(t,u,c)),s&&p.push(Ii(t,s)),p.push(""),p.push(Ee(t,f,_)),p.push(ge(t,I)),p}function Nl(e,t){const{loser:n,winnerList:r,hanList:s,fuList:o,doraList:l,yakuList:c,paoPlayerList:u,riichiPlayers:f,riichiOnTable:_,honbaOnTable:I}=e,p=[];return p.push(t._t("Multiron, from %1",[n])),p.push(""),r.forEach((S,O)=>{const N=s[O],U=o[O],y=l[O],w=c[O],v=u[O];p.push(_i(t,N,U)),p.push(S),p.push(Ni(t,w,y)),v&&p.push(Ii(t,v)),p.push("")}),p.push(Ee(t,f,_)),p.push(ge(t,I)),p}function Sl(e,t){const{winner:n,paoPlayer:r,han:s,fu:o,dora:l,yakuList:c,riichiPlayers:u,riichiOnTable:f,honbaOnTable:_}=e,I=[];return I.push(t._t("Tsumo, %1",[_i(t,s,o)])),I.push(n),I.push(Ni(t,c,l)),r&&I.push(Ii(t,r)),I.push(""),I.push(Ee(t,u,f)),I.push(ge(t,_)),I}function Tl(e,t){const{tempai:n,riichiPlayers:r,riichiOnTable:s,honbaOnTable:o}=e,l=[];return l.push(t._t("Exhaustive draw")),l.push(ns(t,n)),l.push(""),l.push(Ee(t,r,s)),l.push(ge(t,o)),l}function gl(e,t){const{riichiPlayers:n,riichiOnTable:r,honbaOnTable:s}=e,o=[];return o.push(t._t("Abortive draw")),o.push(""),o.push(Ee(t,n,r)),o.push(ge(t,s)),o}function El(e,t){const{penaltyFor:n,riichiPlayers:r,riichiOnTable:s,honbaOnTable:o}=e,l=[];return l.push(t._t("Chombo")),l.push(n),l.push(""),l.push(Ee(t,r,s)),l.push(ge(t,o)),l}function Ul(e,t){const{nagashi:n,tempai:r,riichiPlayers:s,riichiOnTable:o,honbaOnTable:l}=e,c=[];return c.push(t._t("Nagashi mangan")),c.push(n.join(", ")),c.push(ns(t,r)),c.push(""),c.push(Ee(t,s,o)),c.push(ge(t,l)),c}function yl(e,t){switch(e.outcome){case d.ROUND_OUTCOME_RON:return Il(e,t);case d.ROUND_OUTCOME_MULTIRON:return Nl(e,t);case d.ROUND_OUTCOME_TSUMO:return Sl(e,t);case d.ROUND_OUTCOME_DRAW:return Tl(e,t);case d.ROUND_OUTCOME_ABORT:return gl(e,t);case d.ROUND_OUTCOME_CHOMBO:return El(e,t);case d.ROUND_OUTCOME_NAGASHI:return Ul(e,t)}}const ml=e=>{const t=h.useContext(k),n=yl(e,t),r=n.length;return a.jsx("div",{className:"page-log__info",children:n.map((s,o)=>a.jsxs(h.Fragment,{children:[s,o!==r-1&&a.jsx("br",{})]},o))})},Al=e=>{const t=h.useContext(k),{players:n,results:r,rounds:s,onBackClick:o}=e,[l,c]=h.useState(void 0),u=h.useCallback(f=>{c(l===f?void 0:f)},[l,c]);return a.jsxs("div",{className:"flex-container page-log",children:[!r.length&&a.jsx("div",{className:"flex-container__content page-log__no-results",children:t._t("No results found")}),!!r.length&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex-container__top page-log__names",children:a.jsxs("div",{className:"page-log__row",children:[a.jsx("div",{className:"page-log__cell page-log__cell--first"}),Object.keys(n).map(f=>a.jsx("div",{className:"page-log__cell",children:n[f]},f))]})}),a.jsxs("div",{className:"flex-container__content page-log__rounds",children:[a.jsx("div",{className:"page-log__row-container",children:a.jsxs("div",{className:"page-log__row",children:[a.jsx("div",{className:"page-log__cell page-log__cell--first"}),[e.startScore,e.startScore,e.startScore,e.startScore].map((f,_)=>a.jsx("div",{className:"page-log__cell",children:a.jsx("div",{className:"page-log__score",children:f})},_))]})}),r.map((f,_)=>a.jsx(_l,{players:n,index:_,scoresDelta:f.scoresDelta,scores:f.scores,round:f.round,selectRound:u,children:l===_&&a.jsx(ml,{...s[_]})},_))]})]}),a.jsx("div",{className:"flex-container__bottom",children:a.jsx(pi,{text:t._t("Game log"),showBack:!0,onBackClick:o})})]})};function Si(e,t){return e.map(n=>Dr[n].name(t))}function Ue(e,t){return{riichiOnTable:e.riichi,honbaOnTable:e.honba,riichiPlayers:e.riichiIds.map(n=>t[n])}}function Cl(e,t,n){var s,o,l,c,u,f,_,I;return{...Ue(e,t),outcome:d.ROUND_OUTCOME_RON,riichiPlayers:e.riichiIds.map(p=>t[p]),loser:t[(s=e.round.ron)==null?void 0:s.loserId],winner:t[(o=e.round.ron)==null?void 0:o.winnerId],paoPlayer:(l=e.round.ron)!=null&&l.paoPlayerId?t[(c=e.round.ron)==null?void 0:c.paoPlayerId]:void 0,yakuList:Si(((u=e.round.ron)==null?void 0:u.yaku)??[],n),han:((f=e.round.ron)==null?void 0:f.han)??0,fu:((_=e.round.ron)==null?void 0:_.fu)??void 0,dora:((I=e.round.ron)==null?void 0:I.dora)??void 0}}function wl(e,t,n){var s,o,l,c,u,f,_;return{...Ue(e,t),outcome:d.ROUND_OUTCOME_MULTIRON,loser:t[(s=e.round.multiron)==null?void 0:s.loserId],winnerList:((o=e.round.multiron)==null?void 0:o.wins.map(I=>t[I.winnerId]))??[],paoPlayerList:((l=e.round.multiron)==null?void 0:l.wins.map(I=>I.paoPlayerId?t[I.paoPlayerId]:void 0))??[],yakuList:((c=e.round.multiron)==null?void 0:c.wins.map(I=>Si(I.yaku,n)))??[],hanList:((u=e.round.multiron)==null?void 0:u.wins.map(I=>I.han))??[],fuList:((f=e.round.multiron)==null?void 0:f.wins.map(I=>I.fu??void 0))??[],doraList:((_=e.round.multiron)==null?void 0:_.wins.map(I=>I.dora??void 0))??[]}}function Rl(e,t,n){var s,o,l,c,u,f,_;return{...Ue(e,t),outcome:d.ROUND_OUTCOME_TSUMO,riichiPlayers:e.riichiIds.map(I=>t[I]),winner:t[(s=e.round.tsumo)==null?void 0:s.winnerId],paoPlayer:(o=e.round.tsumo)!=null&&o.paoPlayerId?t[(l=e.round.tsumo)==null?void 0:l.paoPlayerId]:void 0,yakuList:Si(((c=e.round.tsumo)==null?void 0:c.yaku)??[],n),han:((u=e.round.tsumo)==null?void 0:u.han)??0,fu:((f=e.round.tsumo)==null?void 0:f.fu)??void 0,dora:((_=e.round.tsumo)==null?void 0:_.dora)??void 0}}function bl(e,t){var r;return{...Ue(e,t),outcome:d.ROUND_OUTCOME_DRAW,tempai:((r=e.round.draw)==null?void 0:r.tempai.map(s=>t[s]))??[]}}function kl(e,t){return{...Ue(e,t),outcome:d.ROUND_OUTCOME_ABORT}}function Hl(e,t){var r;return{...Ue(e,t),outcome:d.ROUND_OUTCOME_CHOMBO,penaltyFor:t[(r=e.round.chombo)==null?void 0:r.loserId]}}function Ml(e,t){var r,s;return{...Ue(e,t),outcome:d.ROUND_OUTCOME_NAGASHI,tempai:((r=e.round.nagashi)==null?void 0:r.tempai.map(o=>t[o]))??[],nagashi:((s=e.round.nagashi)==null?void 0:s.nagashi.map(o=>t[o]))??[]}}function vl(e,t,n){switch(e.outcome){case d.ROUND_OUTCOME_RON:return Cl(e,t,n);case d.ROUND_OUTCOME_MULTIRON:return wl(e,t,n);case d.ROUND_OUTCOME_TSUMO:return Rl(e,t,n);case d.ROUND_OUTCOME_DRAW:return bl(e,t);case d.ROUND_OUTCOME_ABORT:return kl(e,t);case d.ROUND_OUTCOME_CHOMBO:return Hl(e,t);case d.ROUND_OUTCOME_NAGASHI:return Ml(e,t);default:throw new Error("Unspecified outcome")}}const xl=e=>{var f;const{state:t,dispatch:n}=e,r=h.useContext(k),s=h.useCallback(()=>{n({type:G})},[n]);if(t.loading.overview)return a.jsx(Te,{});const o={},l=[],c=[],u=t.currentOtherTable?t.currentOtherTablePlayers:t.players;return!t.allRoundsOverviewErrorCode&&t.allRoundsOverview&&u&&(u.forEach(_=>{o[_.id.toString()]=_.title}),t.allRoundsOverview.forEach(_=>{l.push({round:zr(_.roundIndex),scores:_.scores,scoresDelta:_.scoresDelta}),c.push(vl(_,o,r))})),a.jsx(Al,{startScore:((f=t.gameConfig)==null?void 0:f.rulesetConfig.startPoints)??0,players:o,results:l,onBackClick:s,rounds:c})};const Dl="/assets/donate-1cd26f05.jpg";class Pl extends h.PureComponent{onBackClick(){const{dispatch:t}=this.props;t({type:G})}render(){return a.jsx("div",{className:"flex-container page-donate",children:a.jsxs("div",{className:"flex-container__content",children:[a.jsx(Nt,{onBackClick:this.onBackClick.bind(this)}),a.jsx("div",{className:"page-donate__meme",children:a.jsx("img",{src:Dl,alt:""})}),a.jsx("div",{className:"page-donate__disclaimer",children:"Пантеон существует на голом энтузиазме, но разработчики никогда не откажутся от дополнительных средств на его содержание :)"}),a.jsx("div",{className:"page-donate__button",children:a.jsx("a",{className:"flat-btn flat-btn--large",style:{width:"100%"},href:"https://pay.cloudtips.ru/p/c9fd6eee",target:"_blank",children:"Внести свою копеечку"})})]})})}}const Ll=h.memo(function(e){const t=h.useContext(k),{playerName:n,events:r,onBackClick:s,onSettingClick:o,onSelectEvent:l,currentEvent:c}=e;return a.jsx("div",{className:"flex-container page-event-select",children:a.jsxs("div",{className:"flex-container__content",children:[a.jsxs("div",{className:"top-panel top-panel--between",children:[r.length>0?a.jsx("div",{className:"svg-button",onClick:s,children:a.jsx(di,{})}):null,a.jsx("div",{className:"svg-button svg-button--small",onClick:o,children:a.jsx(Rr,{})})]}),a.jsx("div",{className:"page-event-select__name",children:n}),a.jsx("div",{className:"page-event-select__section",children:r.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"page-event-select__section-title",children:t._t("Select event")}),a.jsx("div",{className:"page-event-select__section-content",children:r.map(u=>a.jsx("div",{className:C("radio-menuitem",{"radio-menuitem--active":u.id===c}),onClick:()=>l(u.id),children:u.title},u.id))})]}):a.jsx("div",{style:{textAlign:"center"},children:t._t("There is no events you participate in right now")})})]})})});class is extends h.PureComponent{onBackClick(){const{dispatch:t}=this.props;t({type:G})}onSettingsClick(){const{dispatch:t}=this.props;t({type:Wn})}onSelectEvent(t){const{dispatch:n}=this.props;n({type:Qe,payload:t})}componentDidMount(){const{dispatch:t}=this.props;t({type:ci})}render(){const{state:t}=this.props,n=this.context,r=t.currentPlayerDisplayName??n._t("name");return t.loading.events?a.jsx(Te,{}):a.jsx(Ll,{playerName:r,events:t.eventsList,currentEvent:t.currentEventId,onBackClick:this.onBackClick.bind(this),onSettingClick:this.onSettingsClick.bind(this),onSelectEvent:this.onSelectEvent.bind(this)})}}E(is,"contextType",k);const Bl={1:"東1",2:"東2",3:"東3",4:"東4",5:"南1",6:"南2",7:"南3",8:"南4",9:"西1",10:"西2",11:"西3",12:"西4"},Gl=({onTableClick:e,onBackClick:t,tables:n})=>{const r=h.useContext(k);return a.jsxs("div",{className:"page-other-tables-list",children:[a.jsx(Nt,{onBackClick:t}),a.jsxs("div",{className:"page-other-tables-list__content",children:[n.length===0&&a.jsx("div",{className:"page-other-tables-list__empty",children:r._t("No tables are playing right now")}),n.map(s=>a.jsxs("div",{className:"page-other-tables-list__table",onClick:()=>e(s.sessionHash),children:[Bl[s.currentRoundIndex],s.players.map((o,l)=>a.jsxs("div",{children:[o.title,": ",s.scores[l].score]},o.id))]},s.sessionHash))]})]})};class jl extends h.Component{onBackClick(){this.props.dispatch({type:G})}onTableClick(t){this.props.dispatch({type:Ot,payload:t})}render(){const{state:t}=this.props;return t.otherTablesListError?a.jsx("div",{children:t.otherTablesListError.message}):a.jsx(Gl,{tables:t.otherTablesList,onTableClick:this.onTableClick.bind(this),onBackClick:this.onBackClick.bind(this)})}}const Kl=e=>{const{state:t}=e;switch(t.currentScreen){case"login":return a.jsx(pl,{...e});case"eventSelector":return a.jsx(is,{...e});case"overview":return a.jsx(Hr,{...e});case"settings":return a.jsx(xr,{...e});case"newGame":return a.jsx(Vs,{...e});case"searchPlayer":return a.jsx(ea,{...e});case"currentGame":case"outcomeSelect":case"playersSelect":case"confirmation":case"nagashiSelect":case"paoSelect":case"otherTable":return a.jsx(Xr,{...e});case"handSelect":return a.jsx(ts,{...e});case"lastResults":return a.jsx(cl,{...e});case"gameLog":return a.jsx(xl,{...e});case"otherTablesList":return a.jsx(jl,{...e});case"donate":return a.jsx(Pl,{...e})}return null},Fl=e=>{const{state:t,dispatch:n,storage:r,i18nService:s}=e,o=t.settings.currentTheme??"day";h.useEffect(()=>{n({type:Gn}),s.init(f=>{n({type:Ve,payload:f})},f=>console.error(f)),n({type:ui});const u=r.getEventId();u&&n({type:Qe,payload:u}),n({type:Yi,payload:{token:r.getAuthToken()??"",personId:r.getPersonId()??0}})},[]);const l=new Date,c=l.getMonth()===11&&l.getDate()>20||l.getMonth()===0&&l.getDate()<10;return a.jsx("div",{id:"screen",className:`App theme-${o}${c?" newyear":""}`,children:a.jsx(k.Provider,{value:s,children:a.jsx(Kl,{state:t,dispatch:n})})})};function Yl(e,t){var n,r,s,o,l;switch(t.type){case jn:return{...e,currentScreen:e.currentScreen==="otherTable"||e.currentScreen==="otherTablesList"?e.currentScreen:"overview",sessionState:{dealer:0,scores:[],finished:!1,penalties:[],roundIndex:1,riichiCount:0,honbaCount:0,lastHandStarted:!1},currentOutcome:void 0,players:void 0,mapIdToPlayer:{},currentSessionHash:"",multironCurrentWinner:void 0,gameOverviewReady:!0};case on:return{...e,currentScreen:"newGame",newGameIdsToSet:t.payload};case Fn:return{...e,currentScreen:"eventSelector"};case Kn:return{...e,currentScreen:"currentGame"};case zi:return{...e,currentScreen:"donate"};case Wi:return{...e,currentScreen:"searchPlayer",newGameSelectedPlayerSide:t.payload};case Yn:return{...e,currentScreen:"lastResults"};case zn:return{...e,currentScreen:"gameLog"};case ms:return{...e,currentScreen:"otherTable",currentOtherTableHash:t.payload.hash};case ys:return{...e,currentScreen:"otherTablesList"};case Wn:return{...e,currentScreen:"settings"};case de:if(!e.gameConfig)return e;let c=e.currentScreen;switch(e.currentScreen){case"currentGame":case"overview":c="outcomeSelect";break;case"outcomeSelect":((n=e.currentOutcome)==null?void 0:n.selectedOutcome)===d.ROUND_OUTCOME_NAGASHI?c="nagashiSelect":c="playersSelect";break;case"playersSelect":switch((r=e.currentOutcome)==null?void 0:r.selectedOutcome){case d.ROUND_OUTCOME_RON:case d.ROUND_OUTCOME_TSUMO:c="handSelect";break;case d.ROUND_OUTCOME_DRAW:case d.ROUND_OUTCOME_ABORT:case d.ROUND_OUTCOME_CHOMBO:case d.ROUND_OUTCOME_NAGASHI:c="confirmation";break}break;case"handSelect":switch((s=e.currentOutcome)==null?void 0:s.selectedOutcome){case d.ROUND_OUTCOME_RON:case d.ROUND_OUTCOME_TSUMO:wi(e.currentOutcome,e.gameConfig)?c="paoSelect":c="confirmation";break;default:c="confirmation"}break;case"paoSelect":c="confirmation";break;case"nagashiSelect":c="playersSelect";break;case"lastResults":case"gameLog":case"confirmation":c="overview";break}return c===e.currentScreen?e:{...e,currentScreen:c,showAdditionalTableInfo:!1};case G:if(!e.gameConfig)return e.currentScreen==="settings"?{...e,currentScreen:"eventSelector"}:e;let u=e.currentScreen,f=e.currentOutcome;switch(e.currentScreen){case"outcomeSelect":u="currentGame",f=void 0;break;case"otherTablesList":case"newGame":case"currentGame":case"eventSelector":case"settings":case"donate":e.currentEventId&&(u="overview");break;case"searchPlayer":u="newGame";break;case"gameLog":e.currentSessionHash?u="currentGame":u="otherTable";break;case"playersSelect":((o=e.currentOutcome)==null?void 0:o.selectedOutcome)===d.ROUND_OUTCOME_NAGASHI?u="nagashiSelect":(u="outcomeSelect",f=void 0);break;case"handSelect":u="playersSelect";break;case"confirmation":switch((l=e.currentOutcome)==null?void 0:l.selectedOutcome){case d.ROUND_OUTCOME_RON:case d.ROUND_OUTCOME_TSUMO:wi(e.currentOutcome,e.gameConfig)?u="paoSelect":u="handSelect";break;case d.ROUND_OUTCOME_DRAW:case d.ROUND_OUTCOME_ABORT:case d.ROUND_OUTCOME_CHOMBO:case d.ROUND_OUTCOME_NAGASHI:u="playersSelect";break}break;case"paoSelect":u="handSelect";break;case"nagashiSelect":u="outcomeSelect";break;case"otherTable":u="otherTablesList";break}return u===e.currentScreen?e:{...e,currentScreen:u,currentOutcome:f,showAdditionalTableInfo:!1};default:return e}}class rs{constructor(t,n){E(this,"_errcode");E(this,"_message");this._errcode=parseInt(n,10),this._message="[REMOTE]: "+t}get message(){return this._message}get code(){return this._errcode}toString(){return`[REMOTE ERROR] code:${this.code}, message: ${this.message}`}}const zl=e=>t=>n=>r=>{const s=t.getState().currentPlayerId,o=t.getState().currentEventId;switch(r.type){case Yi:if(!r.payload.token){t.dispatch({type:Se,payload:void 0}),t.dispatch({type:qe});return}as(e,t.dispatch,n,r.payload.personId,r.payload.token,o,t.getState().currentSessionHash);break;case ci:e.getMyEvents().then(l=>t.dispatch({type:hr,payload:l})).catch(l=>t.dispatch({type:fr,payload:l}));break;case Ze:Wl(r.payload,e,t.dispatch,n);break;case me:return e.setCredentials(r.payload.personId,r.payload.authToken),n(r);case ue:if(!s||!o)return;ss(e,n,t.dispatch,s,o);break;case he:if(!r.payload||!o){t.dispatch({type:jn});return}$l(r.payload,e,n);break;case pt:if(!o)return;ql(e,n,o);break;case rr:if(!o)return;Xl(e,n,o);break;case Ot:if(!o)return;Jl(r.payload,e,n);break;case ni:if(!o)return;Zl(t.getState().currentOtherTableHash??"",e,n);break;case _t:Ql(r.payload,e,n);break;case It:ec(r.payload,e,n);break;case We:if(!s||!o)return;nc(e,n,s,o);break;case Xe:if(!o)return;ic(e,n,o);break;case dn:if(!o)return;rc(r.payload,e,n,t.dispatch,o);break;case hn:tc(r.payload,e,n,t.dispatch);break;default:return n(r)}};function Wl(e,t,n,r){r({type:Ze,payload:e});let s=0;const o=()=>{t.authorize(e.email,e.password).then(l=>{s=0,n({type:cn,payload:l}),as(t,n,r,l.personId,l.authToken)}).catch(l=>{if(s++,s<5){setTimeout(o,500);return}s=0,n({type:Se,payload:l})})};o()}function Vl(e,t,n){n({type:nr,payload:e}),t.getUserInfo([e]).then(r=>n({type:Qn,payload:r[0]})).catch(r=>n({type:ir,payload:r}))}function ss(e,t,n,r,s){t({type:ue});const o=[e.getCurrentGames(r,s),e.getGameConfig(s),e.getTimerState(s)];Promise.all(o).then(([l,c,u])=>{t({type:Jn,payload:{games:l,gameConfig:c,timerState:u}}),l.length>0&&n({type:he,payload:l[0].sessionHash}),n({type:or,payload:{waiting:u.waitingForTimer,secondsRemaining:u.timeRemaining,autostartSecondsRemaining:0,haveAutostart:u.haveAutostart}})}).catch(l=>{l.code===401?(n({type:Se,payload:void 0}),n({type:qe})):t({type:Zn,payload:l})})}function $l(e,t,n){n({type:he,payload:e}),t.getGameOverview(e).then(r=>n({type:qn,payload:r})).catch(r=>n({type:Xn,payload:r}))}function Jl(e,t,n){n({type:Ot,payload:e}),t.getGameOverview(e).then(r=>n({type:ii,payload:r})).catch(r=>n({type:ri,payload:r}))}function Zl(e,t,n){n({type:ni}),t.getGameOverview(e).then(r=>n({type:ii,payload:r})).catch(r=>n({type:ri,payload:r}))}function ql(e,t,n){t({type:pt}),e.getTablesState(n).then(r=>t({type:ei,payload:r})).catch(r=>t({type:ti,payload:r}))}function Xl(e,t,n){t({type:rr}),e.getTablesState(n).then(r=>t({type:ei,payload:r})).catch(r=>t({type:ti,payload:r}))}function Ql(e,t,n){n({type:_t,payload:e}),t.getAllRounds(e).then(r=>n({type:sr,payload:r})).catch(r=>n({type:ar,payload:r}))}function ec(e,t,n){n({type:It,payload:e}),t.getChangesOverview(e).then(r=>n({type:lr,payload:r})).catch(r=>n({type:si,payload:r}))}function tc(e,t,n,r){n({type:hn,payload:e}),t.addRound(e).then(s=>{s||n({type:Hn,payload:new rs("Server error occurred while saving the game","500")}),n({type:li,payload:s}),!s.isFinished&&e.currentSessionHash&&r({type:he,payload:e.currentSessionHash})}).catch(s=>n({type:Hn,payload:s}))}function nc(e,t,n,r){t({type:We}),e.getLastResults(n,r).then(s=>t({type:cr,payload:s})).catch(s=>t({type:ur,payload:s}))}function ic(e,t,n){t({type:Xe}),e.getAllPlayers(n).then(r=>t({type:un,payload:r})).catch(r=>t({type:ai,payload:r}))}function rc(e,t,n,r,s){n({type:dn,payload:e}),t.startGame(s,e).then(o=>{r({type:dr,payload:o}),r({type:jn}),r({type:Qe,payload:s}),r({type:ue}),r({type:Kn})}).catch(o=>n({type:oi,payload:o}))}function as(e,t,n,r,s,o,l){e.setCredentials(r,s),e.quickAuthorize().then(c=>{if(!c)throw new Error;t({type:me,payload:{authToken:s,personId:r}}),Vl(r,e,n),o?(t({type:Qe,payload:o}),ss(e,n,t,r,o),l&&t({type:he,payload:l})):t({type:Fn})}).catch(()=>{t({type:Se,payload:void 0}),t({type:qe})})}const sc=[[i.TOITOI,2,2],[i.HONROTO,2,2],[i.SANANKOU,2,2],[i.SANSHOKUDOUKOU,2,2],[i.SANKANTSU,2,2],[i.SUUKANTSU,-1,-1],[i.SUUANKOU,-1,0],[i.PINFU,1,0],[i.IIPEIKOU,1,0],[i.RYANPEIKOU,3,0],[i.SANSHOKUDOUJUN,2,1],[i.ITTSU,2,1],[i.YAKUHAI1,1,1],[i.YAKUHAI2,2,2],[i.YAKUHAI3,3,3],[i.YAKUHAI4,4,4],[i.SHOSANGEN,2,2],[i.DAISANGEN,-1,-1],[i.SHOSUUSHII,-1,-1],[i.DAISUUSHII,-1,-1],[i.TSUUIISOU,-1,-1],[i.TANYAO,1,1],[i.CHANTA,2,1],[i.JUNCHAN,3,2],[i.CHINROTO,-1,-1],[i.HONITSU,3,2],[i.CHINITSU,6,5],[i.CHUURENPOUTO,-1,0],[i.RYUUIISOU,-1,-1],[i.CHIITOITSU,2,0],[i.KOKUSHIMUSOU,-1,0],[i.RIICHI,1,0],[i.DOUBLERIICHI,2,0],[i.IPPATSU,1,0],[i.MENZENTSUMO,1,0],[i.HAITEI,1,1],[i.RINSHANKAIHOU,1,1],[i.TENHOU,-1,0],[i.CHIHOU,-1,0],[i.HOUTEI,1,1],[i.CHANKAN,1,1],[i.RENHOU,5,0],[i.OPENRIICHI,1,0]],os={},ls={};sc.forEach(e=>{e[1]!==0&&(ls[e[0]]=e[1]),e[2]!==0&&(os[e[0]]=e[2])});function Ti(e,t){return e.includes(i.CHIITOITSU)?[25]:e.includes(i.PINFU)&&e.includes(i.MENZENTSUMO)&&!e.includes(i.__OPENHAND)?[20]:t===d.ROUND_OUTCOME_RON&&!e.includes(i.__OPENHAND)?e.includes(i.PINFU)?[30]:[40,50,60,70,80,90,100,110]:[30,40,50,60,70,80,90,100,110]}function cs(e){const t=e.includes(i.__OPENHAND);return e.reduce((n,r)=>r===i.__OPENHAND?n:n+(t?os[r]:ls[r]),0)}function ac(e,t){var n;switch((n=e.currentOutcome)==null?void 0:n.selectedOutcome){case d.ROUND_OUTCOME_RON:case d.ROUND_OUTCOME_TSUMO:return{...e,currentOutcome:{...e.currentOutcome,...t}};default:return e}}function Ie(e,t,n){var r;switch((r=e.currentOutcome)==null?void 0:r.selectedOutcome){case d.ROUND_OUTCOME_TSUMO:return{...e,currentOutcome:{...e.currentOutcome,...t}};case d.ROUND_OUTCOME_RON:if(!n)throw new Error("No winner getter provided");const s=n();if(!s)throw new Error("No winner provided");return{...e,currentOutcome:{...e.currentOutcome,wins:{...e.currentOutcome.wins,[s]:{...e.currentOutcome.wins[s],...t}}}};default:throw new Error("Wrong outcome modifier used")}}function oc(e,t){var n;switch((n=e.currentOutcome)==null?void 0:n.selectedOutcome){case d.ROUND_OUTCOME_RON:case d.ROUND_OUTCOME_CHOMBO:return{...e,currentOutcome:{...e.currentOutcome,...t}};default:throw new Error("Wrong outcome modifier used")}}function lc(e,t,n,r=!1){var s;if(((s=e.currentOutcome)==null?void 0:s.selectedOutcome)!==d.ROUND_OUTCOME_RON)throw new Error("Wrong outcome modifier used");if(r){const o={...e.currentOutcome.wins};return delete o[t],{...e,currentOutcome:{...e.currentOutcome,multiRon:e.currentOutcome.wins[t]?e.currentOutcome.multiRon-1:e.currentOutcome.multiRon,wins:o}}}else return{...e,currentOutcome:{...e.currentOutcome,multiRon:e.currentOutcome.wins[t]?e.currentOutcome.multiRon:e.currentOutcome.multiRon+1,wins:{...e.currentOutcome.wins,[t]:{winner:t,winnerIsDealer:n,han:0,fu:0,possibleFu:[],yaku:"",dora:0,openHand:!1}}}}}function ie(e,t){var n;switch((n=e.currentOutcome)==null?void 0:n.selectedOutcome){case d.ROUND_OUTCOME_ABORT:case d.ROUND_OUTCOME_DRAW:case d.ROUND_OUTCOME_NAGASHI:return{...e,currentOutcome:{...e.currentOutcome,...t}};default:throw new Error("Wrong outcome modifier used")}}const us=[function(t,n,r){return t===d.ROUND_OUTCOME_TSUMO&&(r.includes(i.RIICHI)||r.includes(i.DOUBLERIICHI))&&!r.includes(i.MENZENTSUMO)&&r.push(i.MENZENTSUMO),r},function(t,n,r,s){if(t===d.ROUND_OUTCOME_TSUMO){if(s===i.MENZENTSUMO){const o=r.indexOf(i.__OPENHAND);o!==-1&&r.splice(o,1),r.includes(i.MENZENTSUMO)||r.push(i.__OPENHAND)}else if(s===i.__OPENHAND){const o=r.indexOf(i.MENZENTSUMO);o!==-1&&r.splice(o,1),r.includes(i.__OPENHAND)||r.push(i.MENZENTSUMO)}}return r}],ds=[function(t,n,r,s,o){return s===i.DOUBLERIICHI&&n.winner&&o.includes(n.winner)&&r.includes(i.DOUBLERIICHI)&&!r.includes(i.RIICHI)&&r.push(i.RIICHI),r}];function xi(e,t,n,r,s,o){if(!s)return;let l=ee(e.yaku);if(l.includes(n))return;hi.includes(n)&&(e={...e,dora:0}),l=ds.reduce((u,f)=>f(t,e,l,n,o),l),l=ca(s,n,l),l=us.reduce((u,f)=>f(t,e,l,n,o),l);const c=Pr(l);if(e.yaku!==c){let u=e.fu;const f=cs(l),_=Ti(l,t);(_.indexOf(e.fu)===-1||n===i.__OPENHAND)&&(u=_[0]),e={...e,yaku:c,han:f,fu:u,possibleFu:_}}return e}function Di(e,t,n,r){let s=ee(e.yaku);if(!s.includes(n))return;s=ds.reduce((c,u)=>u(t,e,s,n,r),s);const o=s.indexOf(n);o!==-1&&s.splice(o,1),s=us.reduce((c,u)=>u(t,e,s,n,r),s);const l=Pr(s);if(e.yaku!==l){let c=e.fu;const u=cs(s),f=Ti(s,t);f.includes(c)||(c=f[0]),e={...e,yaku:l,han:u,fu:c,possibleFu:f}}return e}function yt(e,t,n){return[...e.slice(0,t),n,...e.slice(t+1)]}function cc(e){let t=e.length,n,r;for(;t!==0;)r=Math.floor(Math.random()*t),t-=1,n=e[t],e[t]=e[r],e[r]=n;return e}const gi={currentOtherTableIndex:0,settings:{currentLang:"en",currentTheme:"day",singleDeviceMode:!1},timer:void 0,yakuList:void 0,currentScreen:"overview",currentSessionHash:void 0,currentOutcome:void 0,sessionState:{dealer:0,scores:[],finished:!1,penalties:[],roundIndex:1,riichiCount:0,honbaCount:0,lastHandStarted:!1},currentPlayerDisplayName:void 0,currentPlayerId:void 0,players:void 0,mapIdToPlayer:{},multironCurrentWinner:void 0,isLoggedIn:!1,gameConfig:void 0,tableIndex:void 0,otherTablesList:[],currentOtherTable:void 0,currentOtherTableHash:void 0,currentOtherTablePlayers:[],isIos:!1,showAdditionalTableInfo:!1,currentSelectHandTab:void 0,loading:{games:!1,overview:!1,otherTables:!1,otherTable:!1,login:!1,players:!1,addRound:!1,events:!1},eventsList:[],newGameSelectedUsers:[W,W,W,W],gameOverviewReady:!1,historyInitialized:!1};function uc(e,t){let n;switch(t){case d.ROUND_OUTCOME_RON:case d.ROUND_OUTCOME_MULTIRON:n={selectedOutcome:d.ROUND_OUTCOME_RON,roundIndex:e,loser:void 0,loserIsDealer:!1,multiRon:0,riichiBets:[],wins:{}};break;case d.ROUND_OUTCOME_TSUMO:n={selectedOutcome:d.ROUND_OUTCOME_TSUMO,roundIndex:e,winner:void 0,winnerIsDealer:!1,han:0,fu:30,possibleFu:Ti([],d.ROUND_OUTCOME_TSUMO),yaku:"",riichiBets:[],dora:0,openHand:!1};break;case d.ROUND_OUTCOME_DRAW:n={selectedOutcome:d.ROUND_OUTCOME_DRAW,roundIndex:e,riichiBets:[],tempai:[],deadhands:[]};break;case d.ROUND_OUTCOME_NAGASHI:n={selectedOutcome:d.ROUND_OUTCOME_NAGASHI,roundIndex:e,riichiBets:[],tempai:[],deadhands:[],nagashi:[]};break;case d.ROUND_OUTCOME_ABORT:n={selectedOutcome:d.ROUND_OUTCOME_ABORT,roundIndex:e,riichiBets:[],deadhands:[]};break;case d.ROUND_OUTCOME_CHOMBO:n={selectedOutcome:d.ROUND_OUTCOME_CHOMBO,roundIndex:e,loser:void 0,loserIsDealer:!1};break;default:throw new Error("Unspecified outcome")}return n}function dc(e,t){var r,s,o,l;let n;switch(t.type){case Ze:return{...e,loading:{...e.loading,login:!0},loginError:void 0};case cn:return{...e,loading:{...e.loading,login:!1},currentPlayerId:t.payload.personId||void 0,isLoggedIn:!0,currentScreen:"eventSelector",loginError:void 0};case $n:return{...e,loading:{...e.loading,login:!1},isLoggedIn:!1,currentScreen:"login",loginError:{details:t.payload,message:t.payload.message}};case qe:return{...e,currentScreen:"login",loginError:void 0};case nr:return{...e,loading:{...e.loading,players:!0}};case Qn:return{...e,currentPlayerId:t.payload.id,currentPlayerDisplayName:t.payload.title,loading:{...e.loading,players:!1}};case ir:return{...e,loading:{...e.loading,players:!1},getUserinfoError:{details:t.payload,message:t.payload.message}};case ue:return{...e,currentOtherTable:void 0,currentOtherTablePlayers:[],currentOtherTableHash:void 0,currentOtherTableIndex:0,loading:{...e.loading,games:!0}};case Jn:{t.payload.games[0]||(e={...e,currentScreen:["otherTablesList","otherTable","lastResults"].includes(e.currentScreen)?e.currentScreen:"overview"});const u={};let f;if(t.payload.games[0]){f=t.payload.games[0].players;for(const _ of f)u[_.id.toString()]=_}return{...e,gameConfig:t.payload.gameConfig,currentSessionHash:t.payload.games[0]&&t.payload.games[0].sessionHash,players:f,mapIdToPlayer:u,yakuList:la(t.payload.gameConfig.rulesetConfig.withMultiYakumans),timer:{...e.timer,secondsRemaining:t.payload.timerState.timeRemaining||0,lastUpdateSecondsRemaining:t.payload.timerState.timeRemaining||0,lastUpdateTimestamp:Math.round(new Date().getTime()/1e3),waiting:t.payload.timerState.waitingForTimer,autostartSecondsRemaining:0,autostartLastUpdateSecondsRemaining:0,autostartLastUpdateTimestamp:Math.round(new Date().getTime()/1e3)},loading:{...e.loading,games:!1}}}case Zn:return{...e,loading:{...e.loading,games:!1},updateCurrentGamesError:{details:t.payload,message:t.payload.message}};case Xe:return{...e,loading:{...e.loading,players:!0},allPlayers:void 0,allPlayersError:void 0};case un:return{...e,loading:{...e.loading,players:!1},allPlayers:t.payload,allPlayersError:void 0};case ai:return{...e,loading:{...e.loading,players:!1},allPlayers:void 0,allPlayersError:{details:t.payload,message:t.payload.message}};case It:return{...e,loading:{...e.loading,overview:!0}};case lr:return{...e,loading:{...e.loading,overview:!1},changesOverview:t.payload,changesOverviewError:void 0};case si:return{...e,loading:{...e.loading,overview:!1},changesOverview:void 0,changesOverviewError:{message:t.payload.message,details:t.payload}};case _t:return{...e,loading:{...e.loading,overview:!0},allRoundsOverview:void 0,allRoundsOverviewErrorCode:void 0};case sr:return t.payload?{...e,loading:{...e.loading,overview:!1},allRoundsOverview:t.payload,allRoundsOverviewErrorCode:void 0}:{...e,loading:{...e.loading,overview:!1},allRoundsOverview:void 0,allRoundsOverviewErrorCode:404};case ar:{let u=418;return t.payload?u=t.payload.code:u=404,{...e,loading:{...e.loading,overview:!1},allRoundsOverview:void 0,allRoundsOverviewErrorCode:u}}case We:return{...e,loading:{...e.loading,overview:!0},lastResults:void 0,lastResultsError:void 0};case cr:return{...e,loading:{...e.loading,overview:!1},lastResults:t.payload,lastResultsError:void 0};case ur:return{...e,loading:{...e.loading,overview:!1},lastResults:void 0,lastResultsError:{details:t.payload,message:t.payload.message}};case dn:return{...e,loading:{...e.loading,games:!0},newGameStartError:void 0};case dr:return{...e,loading:{...e.loading,games:!1},newGameStartError:void 0};case oi:return{...e,loading:{...e.loading,games:!1},newGameStartError:{details:t.payload,message:t.payload.message}};case Or:{const u=cc([].concat(e.newGameSelectedUsers??[]));return{...e,newGameSelectedUsers:u}}case _r:return{...e,newGameSelectedUsers:[W,W,W,W],newGameIdsToSet:void 0};case Ir:if(!e.newGameIdsToSet)return e;const c=e.newGameIdsToSet.map(u=>{var f;return((f=e.allPlayers)==null?void 0:f.find(_=>_.id===u))??W});return{...e,newGameSelectedUsers:c,newGameIdsToSet:void 0};case Nr:return n=((r=e.allPlayers)==null?void 0:r.find(u=>u.id===t.payload))??W,{...e,newGameSelectedUsers:yt(e.newGameSelectedUsers??[],0,n)};case Sr:return n=((s=e.allPlayers)==null?void 0:s.find(u=>u.id===t.payload))??W,{...e,newGameSelectedUsers:yt(e.newGameSelectedUsers??[],1,n)};case Tr:return n=((o=e.allPlayers)==null?void 0:o.find(u=>u.id===t.payload))??W,{...e,newGameSelectedUsers:yt(e.newGameSelectedUsers??[],2,n)};case gr:return n=((l=e.allPlayers)==null?void 0:l.find(u=>u.id===t.payload))??W,{...e,newGameSelectedUsers:yt(e.newGameSelectedUsers??[],3,n)};case mr:return{...e,overviewViewShift:((e.overviewViewShift??0)+1)%4};case yr:return{...e,overviewViewShift:((e.overviewViewShift??0)+3)%4};case he:return{...e,currentOtherTable:void 0,currentOtherTablePlayers:[],currentOtherTableHash:void 0,currentOtherTableIndex:0,gameOverviewReady:!1};case qn:return{...e,gameOverviewReady:!0,currentEventId:t.payload.eventId,tableIndex:t.payload.tableIndex,players:t.payload.players,sessionState:t.payload.state};case Xn:return{...e,currentScreen:"login"};case pt:return{...e,loading:{...e.loading,otherTables:!0},otherTablesListError:void 0};case ei:return{...e,loading:{...e.loading,otherTables:!1},otherTablesList:t.payload,currentScreen:"otherTablesList",otherTablesListError:void 0};case ti:return{...e,loading:{...e.loading,otherTables:!1},currentScreen:"otherTablesList",otherTablesListError:{message:t.payload.message,details:t.payload}};case Ot:return{...e,loading:{...e.loading,otherTable:!0},currentOtherTable:void 0,currentOtherTableHash:t.payload,currentOtherTableIndex:0,allRoundsOverview:void 0,currentOtherTablePlayers:[],otherTableError:void 0};case ii:return{...e,loading:{...e.loading,otherTable:!1},currentScreen:"otherTable",currentOtherTable:t.payload,currentOtherTableIndex:t.payload.tableIndex,currentOtherTablePlayers:t.payload.players,otherTableError:void 0};case ri:return{...e,loading:{...e.loading,otherTable:!1},currentScreen:"otherTable",currentOtherTable:void 0,currentOtherTableHash:void 0,currentOtherTableIndex:0,allRoundsOverview:void 0,currentOtherTablePlayers:[],otherTableError:{message:t.payload.message,details:t.payload}};case hn:return{...e,loading:{...e.loading,addRound:!0}};case li:return t.payload.isFinished?{...Fi(gi),eventsList:e.eventsList,currentEventId:e.currentEventId,currentScreen:"lastResults",gameConfig:e.gameConfig,currentPlayerDisplayName:e.currentPlayerDisplayName,currentPlayerId:e.currentPlayerId,isLoggedIn:e.isLoggedIn,isIos:e.isIos,yakuList:e.yakuList,settings:e.settings}:{...e,loading:{...e.loading,addRound:!1},currentOutcome:void 0,currentScreen:"currentGame"};case Hn:return{...e,loading:{...e.loading,addRound:!1},changesOverviewError:{details:t.payload,message:t.payload.message}};case ci:return{...e,eventsListError:void 0,loading:{...e.loading,events:!0}};case hr:return{...e,loading:{...e.loading,events:!1},currentOutcome:void 0,eventsList:t.payload};case fr:return{...e,loading:{...e.loading,events:!1},eventsListError:t.payload};case Qe:return{...e,currentEventId:t.payload,currentScreen:"overview"};case ui:return{...e,historyInitialized:!0};default:return e}}function Un(e,t){let n=[t[0],t[1],t[2],t[3]];for(let r=1;r<e.roundIndex;r++)n=[n.pop()].concat(n);return n[0].id}function yn(e,t,n){let r=e,s;return t.forEach(o=>{var l,c,u;switch((l=r.currentOutcome)==null?void 0:l.selectedOutcome){case d.ROUND_OUTCOME_TSUMO:if(s=xi(r.currentOutcome,r.currentOutcome.selectedOutcome,o,((c=r.gameConfig)==null?void 0:c.rulesetConfig.allowedYaku)??[],r.yakuList,r.currentOutcome.riichiBets),!s)return;break;case d.ROUND_OUTCOME_RON:if(!n||(s=xi(r.currentOutcome.wins[n],r.currentOutcome.selectedOutcome,o,((u=r.gameConfig)==null?void 0:u.rulesetConfig.allowedYaku)??[],r.yakuList,r.currentOutcome.riichiBets),!s))return;break;default:return}r=Ie(r,s,()=>n)}),r}function hc(e,t){var s,o,l,c,u,f,_,I;let n,r;switch(t.type){case pr:return{...e,currentOutcome:uc(((s=e.sessionState)==null?void 0:s.roundIndex)??0,t.payload)};case Vi:return Ie(e,{dora:t.payload.count},()=>t.payload.winner);case $i:return Ie(e,{fu:t.payload.count},()=>t.payload.winner);case ln:return yn(e,[t.payload.id].concat(Ut(e)),t.payload.winner);case Ji:switch((o=e.currentOutcome)==null?void 0:o.selectedOutcome){case d.ROUND_OUTCOME_TSUMO:return yn(e,Ut(e),e.multironCurrentWinner);case d.ROUND_OUTCOME_RON:let O=e;return Object.keys(e.currentOutcome.wins).forEach(N=>{O=yn(O,Ut(e,parseInt(N,10)),parseInt(N,10))}),O;default:return e}case Vn:if(Ut(e).includes(t.payload.id))return e;switch((l=e.currentOutcome)==null?void 0:l.selectedOutcome){case d.ROUND_OUTCOME_TSUMO:if(n=Di(e.currentOutcome,e.currentOutcome.selectedOutcome,t.payload.id,e.currentOutcome.riichiBets),!n)return e;break;case d.ROUND_OUTCOME_RON:if(n=Di(e.currentOutcome.wins[t.payload.winner],e.currentOutcome.selectedOutcome,t.payload.id,e.currentOutcome.riichiBets),!n)return e;break;default:return e}return Ie(e,n,()=>t.payload.winner);case Zi:const p=e.currentOutcome;if(r=t.payload,p&&p.selectedOutcome===d.ROUND_OUTCOME_CHOMBO)return e;const S=p!=null&&p.riichiBets.includes(r)?p==null?void 0:p.riichiBets.filter(O=>O!==r):[...(p==null?void 0:p.riichiBets)??[],r];if((p==null?void 0:p.selectedOutcome)===d.ROUND_OUTCOME_DRAW||(p==null?void 0:p.selectedOutcome)===d.ROUND_OUTCOME_NAGASHI){if(!p.tempai.includes(r)&&!p.deadhands.includes(r))return ie(e,{tempai:[...p.tempai,r],riichiBets:S});if(p.riichiBets.includes(r)&&p.deadhands.includes(r))return ie(e,{deadhands:p.deadhands.filter(O=>O!==r),riichiBets:p.riichiBets.filter(O=>O!==r)})}return(p==null?void 0:p.selectedOutcome)===d.ROUND_OUTCOME_RON||(p==null?void 0:p.selectedOutcome)===d.ROUND_OUTCOME_TSUMO?ac(e,{riichiBets:S}):(p==null?void 0:p.selectedOutcome)===d.ROUND_OUTCOME_DRAW||(p==null?void 0:p.selectedOutcome)===d.ROUND_OUTCOME_NAGASHI||(p==null?void 0:p.selectedOutcome)===d.ROUND_OUTCOME_ABORT?ie(e,{riichiBets:S}):e;case qi:switch((c=e.currentOutcome)==null?void 0:c.selectedOutcome){case d.ROUND_OUTCOME_TSUMO:return Ie(e,{winner:e.currentOutcome.winner===t.payload?void 0:t.payload,winnerIsDealer:e.currentOutcome.winner===void 0&&e.players!==void 0&&Un(e.currentOutcome,e.players)===t.payload});case d.ROUND_OUTCOME_DRAW:case d.ROUND_OUTCOME_NAGASHI:if(e.currentOutcome.riichiBets.includes(t.payload)){if(e.currentOutcome.tempai.includes(t.payload)&&!e.currentOutcome.deadhands.includes(t.payload))return ie(e,{deadhands:[...e.currentOutcome.deadhands,t.payload],tempai:e.currentOutcome.tempai.filter(O=>O!==t.payload)});throw Error("Tempai button cannot exist while deadhand button pressed")}else return e.currentOutcome.tempai.includes(t.payload)?ie(e,{tempai:e.currentOutcome.tempai.filter(O=>O!==t.payload)}):ie(e,{tempai:[...e.currentOutcome.tempai,t.payload]});case d.ROUND_OUTCOME_RON:return lc(e,t.payload,e.players!==void 0&&Un(e.currentOutcome,e.players)===t.payload,!!e.currentOutcome.wins[t.payload]);default:throw new Error("No winners exist on this outcome")}case Xi:switch((u=e.currentOutcome)==null?void 0:u.selectedOutcome){case d.ROUND_OUTCOME_RON:case d.ROUND_OUTCOME_CHOMBO:return oc(e,{loser:e.currentOutcome.loser===t.payload?void 0:t.payload,loserIsDealer:e.currentOutcome.loser===void 0&&e.players!==void 0&&Un(e.currentOutcome,e.players)===t.payload});default:throw new Error("No losers exist on this outcome")}case Qi:switch(r=t.payload,(f=e.currentOutcome)==null?void 0:f.selectedOutcome){case d.ROUND_OUTCOME_TSUMO:return Ie(e,{paoPlayerId:e.currentOutcome.paoPlayerId===r?void 0:r});case d.ROUND_OUTCOME_RON:return e.multironCurrentWinner?Ie(e,{paoPlayerId:e.currentOutcome.wins[e.multironCurrentWinner].paoPlayerId===r?void 0:r},()=>e.multironCurrentWinner):e;default:throw new Error("No pao exist on this outcome")}case er:switch((_=e.currentOutcome)==null?void 0:_.selectedOutcome){case d.ROUND_OUTCOME_DRAW:case d.ROUND_OUTCOME_NAGASHI:if(e.currentOutcome.riichiBets.includes(t.payload)){if(!e.currentOutcome.tempai.includes(t.payload)&&e.currentOutcome.deadhands.includes(t.payload))return ie(e,{deadhands:e.currentOutcome.deadhands.filter(O=>O!==t.payload),tempai:[...e.currentOutcome.tempai,t.payload]});throw Error("Deadhand button cannot exist while tempai button pressed")}else throw new Error("Deadhand button cannot exist without pressed riichi");default:throw new Error("No losers exist on this outcome")}case tr:switch((I=e.currentOutcome)==null?void 0:I.selectedOutcome){case d.ROUND_OUTCOME_NAGASHI:return e.currentOutcome.nagashi.includes(t.payload)?ie(e,{nagashi:e.currentOutcome.nagashi.filter(O=>O!==t.payload)}):ie(e,{nagashi:[...e.currentOutcome.nagashi,t.payload]});default:throw new Error("No nagashi exist on this outcome")}default:return e}}let Je="Unknown OS";navigator.appVersion.includes("Win")&&(Je="Windows");navigator.appVersion.includes("Mac")&&(Je="MacOS");navigator.appVersion.includes("X11")&&(Je="UNIX");navigator.appVersion.includes("Linux")&&(Je="Linux");const Pi=Ns();let Ln=!1;(function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(Ln=!0)})(navigator.userAgent||navigator.vendor||window.opera);let Bn=!1;(function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(Bn=!0)})(navigator.userAgent||navigator.vendor||window.opera);const an=class{constructor(){E(this,"_eventId",null);E(this,"_userId",null);E(this,"_statDomain",null);E(this,"_siteId",null);E(this,"_track",null);this._statDomain="https://stat.riichimahjong.org",this._siteId="Tyr",this._statDomain&&(this._track=Ss((t,n={},r)=>{this._trackEvent(t,{eventId:(r?r.toString():(this._eventId??"").toString())||an.NOT_INITIALIZED,userId:(this._userId??"").toString()||an.NOT_INITIALIZED,...n},window.location.hostname)}))}trackView(t){if(!this._statDomain)return;const n={s:this._siteId,si:Pi,h:window.location.hostname,o:Je,d:Ln?"tablet":Bn?"mobile":"desktop",sc:`${window.innerWidth}x${window.innerHeight}`,l:navigator.language,t:new Date,m:{t:window.document.title,u:t}};fetch(this._statDomain,{credentials:"omit",headers:{"User-Agent":navigator.userAgent,Accept:"*/*","Accept-Language":window.navigator.language,"Content-Type":"text/plain","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"cross-site","Cache-Control":"max-age=0"},referrer:window.location.toString().substring(0,window.location.toString().indexOf("/",9)),body:JSON.stringify(n),method:"POST",mode:"cors"})}_trackEvent(t,n,r){if(!this._statDomain)return;const s={s:this._siteId,si:Pi,h:window.location.hostname,o:Je,d:Ln?"tablet":Bn?"mobile":"desktop",sc:`${window.innerWidth}x${window.innerHeight}`,l:navigator.language,t:new Date,e:t,m:{u:r,...n}};fetch(this._statDomain,{credentials:"omit",headers:{"User-Agent":navigator.userAgent,Accept:"*/*","Accept-Language":window.navigator.language,"Content-Type":"text/plain","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"cross-site"},referrer:window.location.toString().substring(0,window.location.toString().indexOf("/",9)),body:JSON.stringify(s),method:"POST",mode:"cors"})}setUserId(t){this._statDomain&&(this._userId=t)}setEventId(t){this._statDomain&&(this._eventId=t)}track(t,n={},r){var s;this._track&&((s=this._track)==null||s.call(this,t,n,r))}};let m=an;E(m,"NOT_INITIALIZED","not_initialized"),E(m,"LOGOUT","logout"),E(m,"LANG_CHANGED","lang_changed"),E(m,"THEME_CHANGED","theme_changed"),E(m,"SINGLE_DEVICE_MODE_CHANGED","single_device_mode_changed"),E(m,"REMOTE_ERROR","remote_error"),E(m,"SCREEN_ENTER","screen_enter"),E(m,"CONFIG_RECEIVED","config_received"),E(m,"LOAD_STARTED","load_started"),E(m,"LOAD_SUCCESS","load_success"),E(m,"LOAD_ERROR","load_error");let mn=null;const fc=e=>t=>n=>r=>{switch(r.type){case As:e.track(r.payload[0],r.payload[1]);break;case Cs:e.track(m.SCREEN_ENTER,{screen:r.payload});break;case Ze:e.track(m.LOAD_STARTED,{type:"screen-login",request:"confirmRegistration"});break;case cn:e.track(m.LOAD_SUCCESS,{type:"screen-login",request:"confirmRegistration"});break;case $n:e.track(m.LOAD_ERROR,{type:"state-init-login",request:"confirmRegistration",message:r.payload.toString()});break;case Qn:e.setUserId(r.payload.id);break;case Jn:e.track(m.CONFIG_RECEIVED);break;case Zn:e.track(m.REMOTE_ERROR,{code:r.payload.code,message:r.payload.toString()});break;case he:e.track(m.LOAD_STARTED,{type:"game-overview"});break;case qn:e.track(m.LOAD_SUCCESS,{type:"game-overview"});break;case Xn:e.track(m.LOAD_ERROR,{type:"game-overview",code:r.payload.code,message:r.payload.message});break;case Se:e.track(m.LOGOUT,{screen:"screen-settings"});break;case Xe:e.track(m.SCREEN_ENTER,{screen:"screen-new-game"});break;case un:e.track(m.LOAD_SUCCESS,{type:"screen-new-game",request:"getAllPlayers"});break;case ai:e.track(m.LOAD_ERROR,{type:"screen-new-game",request:"getAllPlayers",message:r.payload.toString()});break;case si:e.track(m.LOAD_ERROR,{type:"screen-confirmation",code:r.payload.code,request:"getChangesOverview"});break;case oi:e.track(m.LOAD_ERROR,{type:"screen-new-game",request:"startGame",message:r.payload.toString()});break;case It:e.track(m.SCREEN_ENTER,{screen:"screen-confirmation"});break;case We:e.track(m.SCREEN_ENTER,{screen:"screen-last-results"});break;case _t:e.track(m.SCREEN_ENTER,{screen:"screen-log"});break;case Ot:e.track(m.SCREEN_ENTER,{screen:"screen-other-table"});break;case pt:e.track(m.SCREEN_ENTER,{screen:"screen-other-tables-list"});break;case Ve:e.track(m.LANG_CHANGED,{localeName:r.payload});break;case fn:e.track(m.THEME_CHANGED,{themeName:r.payload});break;case pn:e.track(m.SINGLE_DEVICE_MODE_CHANGED,{value:r.payload});break;default:mn!==t.getState().currentScreen&&(mn=t.getState().currentScreen,e.trackView("screen:"+mn))}return n(r)},pc=()=>e=>t=>n=>{switch(n.type){case ui:e.getState().historyInitialized||(window.history.pushState({},"","/"),window.onpopstate=()=>{e.dispatch({type:G}),window.history.pushState({},"")},t(n));break}return t(n)};function Oc(e,t){var n,r,s,o;switch(t.type){case _e:return{...e,timer:{...e.timer,waiting:t.payload.waiting,secondsRemaining:t.payload.secondsRemaining??0,autostartSecondsRemaining:t.payload.autostartSecondsRemaining??0,autostartLastUpdateSecondsRemaining:t.payload.autostartLastUpdateTimestamp?t.payload.autostartSecondsRemaining??0:((n=e.timer)==null?void 0:n.autostartLastUpdateSecondsRemaining)??0,autostartLastUpdateTimestamp:t.payload.autostartLastUpdateTimestamp??((r=e.timer)==null?void 0:r.autostartLastUpdateTimestamp)??0,lastUpdateTimestamp:t.payload.lastUpdateTimestamp??((s=e.timer)==null?void 0:s.lastUpdateTimestamp)??0,lastUpdateSecondsRemaining:t.payload.lastUpdateTimestamp?t.payload.secondsRemaining??0:((o=e.timer)==null?void 0:o.lastUpdateSecondsRemaining)??0}};default:return e}}const le=()=>Math.round(new Date().getTime()/1e3),_c=e=>t=>n=>r=>{switch(r.type){case or:r.payload.waiting?(e.timer&&e.clearInterval(e.timer),e.timer=void 0,e.autostartTimer&&e.clearInterval(e.autostartTimer),e.autostartTimer=e.setInterval(()=>{var c,u,f;if(!((c=t.getState().gameConfig)!=null&&c.useTimer)){e.autostartTimer&&e.clearInterval(e.autostartTimer);return}const o=le()-(((u=t.getState().timer)==null?void 0:u.autostartLastUpdateTimestamp)??0),l=(((f=t.getState().timer)==null?void 0:f.autostartLastUpdateSecondsRemaining)??0)-o;l<=0?(n({type:_e,payload:{...r.payload,autostartLastUpdateTimestamp:le(),autostartSecondsRemaining:0}}),e.autostartTimer&&e.clearInterval(e.autostartTimer),e.autostartTimer=void 0):n({type:_e,payload:{...r.payload,autostartLastUpdateTimestamp:le(),autostartSecondsRemaining:l}})},1e3),n({type:_e,payload:{...r.payload,autostartLastUpdateTimestamp:le()}})):(e.autostartTimer&&e.clearInterval(e.autostartTimer),e.timer&&e.clearInterval(e.timer),e.timer=e.setInterval(()=>{var u,f,_;const s=!t.getState().currentSessionHash,o=!((u=t.getState().gameConfig)!=null&&u.useTimer);if(s||o){e.timer&&e.clearInterval(e.timer);return}const l=le()-(((f=t.getState().timer)==null?void 0:f.lastUpdateTimestamp)??0),c=(((_=t.getState().timer)==null?void 0:_.lastUpdateSecondsRemaining)??0)-l;c<=0?(n({type:_e,payload:{...r.payload,lastUpdateTimestamp:le(),secondsRemaining:0}}),e.timer&&e.clearInterval(e.timer),e.timer=void 0):n({type:_e,payload:{...r.payload,lastUpdateTimestamp:le(),secondsRemaining:c}})},1e3),n({type:_e,payload:{...r.payload,lastUpdateTimestamp:le()}}));break}return n(r)};function Ic(e,t){switch(t.type){case Gn:return Fi(gi);case me:return{...e,currentPlayerId:t.payload.personId};case Ae:return{...e,multironCurrentWinner:t.payload.winner};case fn:return{...e,settings:{...e.settings,currentTheme:t.payload}};case Ve:return{...e,settings:{...e.settings,currentLang:t.payload}};case pn:return{...e,settings:{...e.settings,singleDeviceMode:t.payload}};case Cr:return{...e,settings:{...e.settings,currentLang:(t.payload??e.settings).currentLang,currentTheme:(t.payload??e.settings).currentTheme,singleDeviceMode:(t.payload??e.settings).singleDeviceMode}};case Ce:return{...e,currentSelectHandTab:t.payload};case Er:return{...e,overviewDiffBy:e.overviewDiffBy===t.payload?void 0:t.payload};case Ur:return{...e,showAdditionalTableInfo:!e.showAdditionalTableInfo};default:return e}}const Nc=e=>t=>n=>r=>{switch(r.type){case cn:e.setAuthToken(r.payload.authToken).setPersonId(r.payload.personId).deleteEventId(),t.dispatch({type:me,payload:{authToken:r.payload.authToken,personId:r.payload.personId}});break;case Ze:e.deleteAuthToken().deletePersonId(),t.dispatch({type:me,payload:{authToken:"",personId:0}});break;case Se:e.clear(),t.dispatch({type:me,payload:{authToken:"",personId:0}}),t.dispatch({type:$n,payload:r.payload??new rs("Not logged in","403")});break;case fn:e.setTheme(r.payload),n(r);break;case Qe:e.setEventId(r.payload),n(r);break;case Ve:e.setLang(r.payload),n(r);break;case pn:e.setSingleDeviceMode(r.payload),n(r);break;case Ar:const s={currentTheme:e.getTheme(),currentLang:e.getLang(),singleDeviceMode:e.getSingleDeviceMode()};t.dispatch({type:Cr,payload:s});break}return n(r)},Li=e=>t=>n=>r=>(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&(console.groupCollapsed(`${e}: ${r.type}`),console.log("Payload: ",r.payload),console.groupEnd()),n(r)),Sc=e=>t=>n=>r=>{switch(r.type){case ln:case Vn:if(r.payload.id===i.RIICHI){alert(e._t("If you want to select a riichi, return back and press riichi button for the winner"));return}if(r.payload.id===i.DOUBLERIICHI){const s=t.getState().currentOutcome;if(((s==null?void 0:s.selectedOutcome)===d.ROUND_OUTCOME_RON||(s==null?void 0:s.selectedOutcome)===d.ROUND_OUTCOME_TSUMO)&&r.payload.winner&&!s.riichiBets.includes(r.payload.winner)){alert(e._t("If you want to select a riichi, return back and press riichi button for the winner"));return}}n(r);break;default:n(r)}},Tc=()=>e=>t=>n=>{var o;let r,s;switch(n.type){case de:if(e.getState().currentScreen==="currentGame"){const c=e.getState().currentSessionHash;c&&e.dispatch({type:he,payload:c}),t(n);break}switch(t({type:de}),r=e.getState(),s=r.currentScreen,s){case"confirmation":e.dispatch({type:It,payload:r});break;case"handSelect":if(r.currentOutcome&&[d.ROUND_OUTCOME_RON,d.ROUND_OUTCOME_TSUMO].includes(r.currentOutcome.selectedOutcome)){const u=Y(r)[0].id;e.dispatch({type:Ce,payload:"yaku"}),e.dispatch({type:Ae,payload:{winner:u}}),e.dispatch({type:Ji}),((o=r.currentOutcome)==null?void 0:o.selectedOutcome)===d.ROUND_OUTCOME_TSUMO&&e.dispatch({type:ln,payload:{id:i.MENZENTSUMO,winner:u}})}break;case"paoSelect":const c=Ri(r);c&&e.dispatch({type:Ae,payload:{winner:c}});break}break;case G:switch(t(n),r=e.getState(),s=r.currentScreen,s){case"handSelect":e.dispatch({type:Ce,payload:"yaku"});break;case"paoSelect":const c=Ri(r);c&&e.dispatch({type:Ae,payload:{winner:c}});break}break;case on:t(n),e.dispatch({type:Xe});break;case Gn:t(n),e.dispatch({type:Ar});break;case li:t(n),r=e.getState(),r.currentScreen==="lastResults"&&e.dispatch({type:We});break;case Yn:t(n),e.dispatch({type:We});break;case un:t(n),e.dispatch({type:Ir});break;case zn:t(n),r=e.getState();const l=r.currentSessionHash??r.currentOtherTableHash;l&&e.dispatch({type:_t,payload:l});break;default:return t(n)}};async function gc(e,t){const n=await L("/common.Mimir/GetMyEvents",xc.encode(e),t);return At.decode(n)}async function Ec(e,t){const n=await L("/common.Mimir/GetGameConfig",ze.encode(e),t);return mt.decode(n)}async function Uc(e,t){const n=await L("/common.Mimir/GetCurrentSessions",Ct.encode(e),t);return wt.decode(n)}async function yc(e,t){const n=await L("/common.Mimir/GetAllRegisteredPlayers",Rt.encode(e),t);return bt.decode(n)}async function mc(e,t){const n=await L("/common.Mimir/GetTimerState",ze.encode(e),t);return kt.decode(n)}async function Ac(e,t){const n=await L("/common.Mimir/GetSessionOverview",Ht.encode(e),t);return Mt.decode(n)}async function Cc(e,t){const n=await L("/common.Mimir/AddRound",vt.encode(e),t);return xt.decode(n)}async function wc(e,t){const n=await L("/common.Mimir/PreviewRound",Dt.encode(e),t);return Pt.decode(n)}async function Rc(e,t){const n=await L("/common.Mimir/GetLastResults",Lt.encode(e),t);return Bt.decode(n)}async function bc(e,t){const n=await L("/common.Mimir/GetLastRound",Gt.encode(e),t);return jt.decode(n)}async function kc(e,t){const n=await L("/common.Mimir/GetAllRounds",Kt.encode(e),t);return Ft.decode(n)}async function Hc(e,t){const n=await L("/common.Mimir/GetLastRoundByHash",Yt.encode(e),t);return zt.decode(n)}async function Mc(e,t){const n=await L("/common.Mimir/GetTablesState",ze.encode(e),t);return Wt.decode(n)}async function vc(e,t){const n=await L("/common.Mimir/StartGame",Vt.encode(e),t);return $t.decode(n)}const xc={encode:function(e){return new Uint8Array},decode:function(e){return{}},initialize:function(){return{}},_writeMessage:function(e,t){return t},_readMessage:function(e,t){return e}},At={encode:function(e){return At._writeMessage(e,new T).getResultBuffer()},decode:function(e){return At._readMessage(At.initialize(),new g(e))},initialize:function(){return{events:[]}},_writeMessage:function(e,t){var n;return(n=e.events)!=null&&n.length&&t.writeRepeatedMessage(1,e.events,Re._writeMessage),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{const r=Re.initialize();t.readMessage(r,Re._readMessage),e.events.push(r);break}default:{t.skipField();break}}return e}},Ct={encode:function(e){return Ct._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Ct._readMessage(Ct.initialize(),new g(e))},initialize:function(){return{playerId:0,eventId:0}},_writeMessage:function(e,t){return e.playerId&&t.writeInt32(1,e.playerId),e.eventId&&t.writeInt32(2,e.eventId),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.playerId=t.readInt32();break}case 2:{e.eventId=t.readInt32();break}default:{t.skipField();break}}return e}},wt={encode:function(e){return wt._writeMessage(e,new T).getResultBuffer()},decode:function(e){return wt._readMessage(wt.initialize(),new g(e))},initialize:function(){return{sessions:[]}},_writeMessage:function(e,t){var n;return(n=e.sessions)!=null&&n.length&&t.writeRepeatedMessage(1,e.sessions,Le._writeMessage),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{const r=Le.initialize();t.readMessage(r,Le._readMessage),e.sessions.push(r);break}default:{t.skipField();break}}return e}},Rt={encode:function(e){return Rt._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Rt._readMessage(Rt.initialize(),new g(e))},initialize:function(){return{eventIds:[]}},_writeMessage:function(e,t){var n;return(n=e.eventIds)!=null&&n.length&&t.writePackedInt32(1,e.eventIds),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{t.isDelimited()?e.eventIds.push(...t.readPackedInt32()):e.eventIds.push(t.readInt32());break}default:{t.skipField();break}}return e}},bt={encode:function(e){return bt._writeMessage(e,new T).getResultBuffer()},decode:function(e){return bt._readMessage(bt.initialize(),new g(e))},initialize:function(){return{players:[]}},_writeMessage:function(e,t){var n;return(n=e.players)!=null&&n.length&&t.writeRepeatedMessage(1,e.players,oe._writeMessage),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{const r=oe.initialize();t.readMessage(r,oe._readMessage),e.players.push(r);break}default:{t.skipField();break}}return e}},kt={encode:function(e){return kt._writeMessage(e,new T).getResultBuffer()},decode:function(e){return kt._readMessage(kt.initialize(),new g(e))},initialize:function(){return{started:!1,finished:!1,timeRemaining:0,waitingForTimer:!1,haveAutostart:!1,autostartTimer:!1,hideSeatingAfter:0}},_writeMessage:function(e,t){return e.started&&t.writeBool(1,e.started),e.finished&&t.writeBool(2,e.finished),e.timeRemaining&&t.writeInt32(3,e.timeRemaining),e.waitingForTimer&&t.writeBool(4,e.waitingForTimer),e.haveAutostart&&t.writeBool(5,e.haveAutostart),e.autostartTimer&&t.writeBool(6,e.autostartTimer),e.hideSeatingAfter&&t.writeInt32(8,e.hideSeatingAfter),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.started=t.readBool();break}case 2:{e.finished=t.readBool();break}case 3:{e.timeRemaining=t.readInt32();break}case 4:{e.waitingForTimer=t.readBool();break}case 5:{e.haveAutostart=t.readBool();break}case 6:{e.autostartTimer=t.readBool();break}case 8:{e.hideSeatingAfter=t.readInt32();break}default:{t.skipField();break}}return e}},Ht={encode:function(e){return Ht._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Ht._readMessage(Ht.initialize(),new g(e))},initialize:function(){return{sessionHash:""}},_writeMessage:function(e,t){return e.sessionHash&&t.writeString(1,e.sessionHash),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.sessionHash=t.readString();break}default:{t.skipField();break}}return e}},Mt={encode:function(e){return Mt._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Mt._readMessage(Mt.initialize(),new g(e))},initialize:function(){return{id:0,eventId:0,tableIndex:void 0,players:[],state:Ke.initialize()}},_writeMessage:function(e,t){var n;return e.id&&t.writeInt32(1,e.id),e.eventId&&t.writeInt32(2,e.eventId),e.tableIndex!=null&&t.writeInt32(3,e.tableIndex),(n=e.players)!=null&&n.length&&t.writeRepeatedMessage(4,e.players,ae._writeMessage),e.state&&t.writeMessage(5,e.state,Ke._writeMessage),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.id=t.readInt32();break}case 2:{e.eventId=t.readInt32();break}case 3:{e.tableIndex=t.readInt32();break}case 4:{const r=ae.initialize();t.readMessage(r,ae._readMessage),e.players.push(r);break}case 5:{t.readMessage(e.state,Ke._readMessage);break}default:{t.skipField();break}}return e}},vt={encode:function(e){return vt._writeMessage(e,new T).getResultBuffer()},decode:function(e){return vt._readMessage(vt.initialize(),new g(e))},initialize:function(){return{sessionHash:"",roundData:K.initialize()}},_writeMessage:function(e,t){return e.sessionHash&&t.writeString(1,e.sessionHash),e.roundData&&t.writeMessage(2,e.roundData,K._writeMessage),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.sessionHash=t.readString();break}case 2:{t.readMessage(e.roundData,K._readMessage);break}default:{t.skipField();break}}return e}},xt={encode:function(e){return xt._writeMessage(e,new T).getResultBuffer()},decode:function(e){return xt._readMessage(xt.initialize(),new g(e))},initialize:function(){return{scores:[],extraPenaltyLogs:[],round:0,honba:0,riichiBets:0,prematurelyFinished:!1,roundJustChanged:!1,isFinished:!1,lastHandStarted:!1,lastOutcome:void 0}},_writeMessage:function(e,t){var n,r;return(n=e.scores)!=null&&n.length&&t.writeRepeatedMessage(1,e.scores,x._writeMessage),(r=e.extraPenaltyLogs)!=null&&r.length&&t.writeRepeatedMessage(2,e.extraPenaltyLogs,Q._writeMessage),e.round&&t.writeInt32(3,e.round),e.honba&&t.writeInt32(4,e.honba),e.riichiBets&&t.writeInt32(5,e.riichiBets),e.prematurelyFinished&&t.writeBool(6,e.prematurelyFinished),e.roundJustChanged&&t.writeBool(7,e.roundJustChanged),e.isFinished&&t.writeBool(8,e.isFinished),e.lastHandStarted&&t.writeBool(9,e.lastHandStarted),e.lastOutcome!=null&&t.writeEnum(10,d._toInt(e.lastOutcome)),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{const r=x.initialize();t.readMessage(r,x._readMessage),e.scores.push(r);break}case 2:{const r=Q.initialize();t.readMessage(r,Q._readMessage),e.extraPenaltyLogs.push(r);break}case 3:{e.round=t.readInt32();break}case 4:{e.honba=t.readInt32();break}case 5:{e.riichiBets=t.readInt32();break}case 6:{e.prematurelyFinished=t.readBool();break}case 7:{e.roundJustChanged=t.readBool();break}case 8:{e.isFinished=t.readBool();break}case 9:{e.lastHandStarted=t.readBool();break}case 10:{e.lastOutcome=d._fromInt(t.readEnum());break}default:{t.skipField();break}}return e}},Dt={encode:function(e){return Dt._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Dt._readMessage(Dt.initialize(),new g(e))},initialize:function(){return{sessionHash:"",roundData:K.initialize()}},_writeMessage:function(e,t){return e.sessionHash&&t.writeString(1,e.sessionHash),e.roundData&&t.writeMessage(2,e.roundData,K._writeMessage),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.sessionHash=t.readString();break}case 2:{t.readMessage(e.roundData,K._readMessage);break}default:{t.skipField();break}}return e}},Pt={encode:function(e){return Pt._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Pt._readMessage(Pt.initialize(),new g(e))},initialize:function(){return{state:F.initialize()}},_writeMessage:function(e,t){return e.state&&t.writeMessage(1,e.state,F._writeMessage),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{t.readMessage(e.state,F._readMessage);break}default:{t.skipField();break}}return e}},Lt={encode:function(e){return Lt._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Lt._readMessage(Lt.initialize(),new g(e))},initialize:function(){return{playerId:0,eventId:0}},_writeMessage:function(e,t){return e.playerId&&t.writeInt32(1,e.playerId),e.eventId&&t.writeInt32(2,e.eventId),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.playerId=t.readInt32();break}case 2:{e.eventId=t.readInt32();break}default:{t.skipField();break}}return e}},Bt={encode:function(e){return Bt._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Bt._readMessage(Bt.initialize(),new g(e))},initialize:function(){return{results:[]}},_writeMessage:function(e,t){var n;return(n=e.results)!=null&&n.length&&t.writeRepeatedMessage(1,e.results,Be._writeMessage),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{const r=Be.initialize();t.readMessage(r,Be._readMessage),e.results.push(r);break}default:{t.skipField();break}}return e}},Gt={encode:function(e){return Gt._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Gt._readMessage(Gt.initialize(),new g(e))},initialize:function(){return{playerId:0,eventId:0}},_writeMessage:function(e,t){return e.playerId&&t.writeInt32(1,e.playerId),e.eventId&&t.writeInt32(2,e.eventId),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.playerId=t.readInt32();break}case 2:{e.eventId=t.readInt32();break}default:{t.skipField();break}}return e}},jt={encode:function(e){return jt._writeMessage(e,new T).getResultBuffer()},decode:function(e){return jt._readMessage(jt.initialize(),new g(e))},initialize:function(){return{round:F.initialize()}},_writeMessage:function(e,t){return e.round&&t.writeMessage(1,e.round,F._writeMessage),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{t.readMessage(e.round,F._readMessage);break}default:{t.skipField();break}}return e}},Kt={encode:function(e){return Kt._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Kt._readMessage(Kt.initialize(),new g(e))},initialize:function(){return{sessionHash:""}},_writeMessage:function(e,t){return e.sessionHash&&t.writeString(1,e.sessionHash),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.sessionHash=t.readString();break}default:{t.skipField();break}}return e}},Ft={encode:function(e){return Ft._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Ft._readMessage(Ft.initialize(),new g(e))},initialize:function(){return{rounds:[]}},_writeMessage:function(e,t){var n;return(n=e.rounds)!=null&&n.length&&t.writeRepeatedMessage(1,e.rounds,F._writeMessage),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{const r=F.initialize();t.readMessage(r,F._readMessage),e.rounds.push(r);break}default:{t.skipField();break}}return e}},Yt={encode:function(e){return Yt._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Yt._readMessage(Yt.initialize(),new g(e))},initialize:function(){return{sessionHash:""}},_writeMessage:function(e,t){return e.sessionHash&&t.writeString(1,e.sessionHash),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.sessionHash=t.readString();break}default:{t.skipField();break}}return e}},zt={encode:function(e){return zt._writeMessage(e,new T).getResultBuffer()},decode:function(e){return zt._readMessage(zt.initialize(),new g(e))},initialize:function(){return{round:F.initialize()}},_writeMessage:function(e,t){return e.round&&t.writeMessage(1,e.round,F._writeMessage),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{t.readMessage(e.round,F._readMessage);break}default:{t.skipField();break}}return e}},Wt={encode:function(e){return Wt._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Wt._readMessage(Wt.initialize(),new g(e))},initialize:function(){return{tables:[]}},_writeMessage:function(e,t){var n;return(n=e.tables)!=null&&n.length&&t.writeRepeatedMessage(1,e.tables,je._writeMessage),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{const r=je.initialize();t.readMessage(r,je._readMessage),e.tables.push(r);break}default:{t.skipField();break}}return e}},Vt={encode:function(e){return Vt._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Vt._readMessage(Vt.initialize(),new g(e))},initialize:function(){return{eventId:0,players:[]}},_writeMessage:function(e,t){var n;return e.eventId&&t.writeInt32(1,e.eventId),(n=e.players)!=null&&n.length&&t.writePackedInt32(2,e.players),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.eventId=t.readInt32();break}case 2:{t.isDelimited()?e.players.push(...t.readPackedInt32()):e.players.push(t.readInt32());break}default:{t.skipField();break}}return e}},$t={encode:function(e){return $t._writeMessage(e,new T).getResultBuffer()},decode:function(e){return $t._readMessage($t.initialize(),new g(e))},initialize:function(){return{sessionHash:""}},_writeMessage:function(e,t){return e.sessionHash&&t.writeString(1,e.sessionHash),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.sessionHash=t.readString();break}default:{t.skipField();break}}return e}};async function Dc(e,t){const n=await L("/common.Frey/Authorize",Jt.encode(e),t);return Zt.decode(n)}async function Pc(e,t){const n=await L("/common.Frey/QuickAuthorize",qt.encode(e),t);return Xt.decode(n)}async function Lc(e,t){const n=await L("/common.Frey/GetPersonalInfo",Qt.encode(e),t);return en.decode(n)}const Jt={encode:function(e){return Jt._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Jt._readMessage(Jt.initialize(),new g(e))},initialize:function(){return{email:"",password:""}},_writeMessage:function(e,t){return e.email&&t.writeString(1,e.email),e.password&&t.writeString(2,e.password),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.email=t.readString();break}case 2:{e.password=t.readString();break}default:{t.skipField();break}}return e}},Zt={encode:function(e){return Zt._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Zt._readMessage(Zt.initialize(),new g(e))},initialize:function(){return{personId:0,authToken:""}},_writeMessage:function(e,t){return e.personId&&t.writeInt32(1,e.personId),e.authToken&&t.writeString(2,e.authToken),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.personId=t.readInt32();break}case 2:{e.authToken=t.readString();break}default:{t.skipField();break}}return e}},qt={encode:function(e){return qt._writeMessage(e,new T).getResultBuffer()},decode:function(e){return qt._readMessage(qt.initialize(),new g(e))},initialize:function(){return{personId:0,authToken:""}},_writeMessage:function(e,t){return e.personId&&t.writeInt32(1,e.personId),e.authToken&&t.writeString(2,e.authToken),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.personId=t.readInt32();break}case 2:{e.authToken=t.readString();break}default:{t.skipField();break}}return e}},Xt={encode:function(e){return Xt._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Xt._readMessage(Xt.initialize(),new g(e))},initialize:function(){return{authSuccess:!1}},_writeMessage:function(e,t){return e.authSuccess&&t.writeBool(1,e.authSuccess),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{e.authSuccess=t.readBool();break}default:{t.skipField();break}}return e}},Qt={encode:function(e){return Qt._writeMessage(e,new T).getResultBuffer()},decode:function(e){return Qt._readMessage(Qt.initialize(),new g(e))},initialize:function(){return{ids:[]}},_writeMessage:function(e,t){var n;return(n=e.ids)!=null&&n.length&&t.writePackedInt32(1,e.ids),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{t.isDelimited()?e.ids.push(...t.readPackedInt32()):e.ids.push(t.readInt32());break}default:{t.skipField();break}}return e}},en={encode:function(e){return en._writeMessage(e,new T).getResultBuffer()},decode:function(e){return en._readMessage(en.initialize(),new g(e))},initialize:function(){return{people:[]}},_writeMessage:function(e,t){var n;return(n=e.people)!=null&&n.length&&t.writeRepeatedMessage(1,e.people,we._writeMessage),t},_readMessage:function(e,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{const r=we.initialize();t.readMessage(r,we._readMessage),e.people.push(r);break}default:{t.skipField();break}}return e}};function Bi(e){var t,n,r,s,o,l,c,u,f,_,I,p,S,O,N;switch((t=e.currentOutcome)==null?void 0:t.selectedOutcome){case d.ROUND_OUTCOME_RON:const U=Object.keys(e.currentOutcome.wins).map(y=>{const w=e.currentOutcome.wins[y],v=ee(w.yaku);return{winnerId:w.winner,paoPlayerId:w.paoPlayerId,han:w.han+w.dora,fu:vn(e,w.winner),dora:w.dora,uradora:0,kandora:0,kanuradora:0,yaku:v.filter(V=>V>0),openHand:v.includes(i.__OPENHAND)}});return U.length>1?{multiron:{roundIndex:(n=e.sessionState)==null?void 0:n.roundIndex,honba:(r=e.sessionState)==null?void 0:r.honbaCount,loserId:te(e)[0].id,multiRon:U.length,wins:U,riichiBets:ce(e).map(y=>y.id)}}:{ron:{roundIndex:(s=e.sessionState)==null?void 0:s.roundIndex,honba:(o=e.sessionState)==null?void 0:o.honbaCount,riichiBets:ce(e).map(y=>y.id),loserId:te(e)[0].id,multiRon:null,...U[0]}};case d.ROUND_OUTCOME_TSUMO:return{tsumo:{roundIndex:(l=e.sessionState)==null?void 0:l.roundIndex,honba:(c=e.sessionState)==null?void 0:c.honbaCount,riichiBets:ce(e).map(y=>y.id),winnerId:Y(e)[0].id,paoPlayerId:(Lr(e)[0]||{id:null}).id,han:fi(e)+xn(e),fu:vn(e),dora:xn(e),uradora:0,kandora:0,kanuradora:0,yaku:nn(e).filter(y=>y>0),openHand:nn(e).includes(i.__OPENHAND)}};case d.ROUND_OUTCOME_DRAW:return{draw:{roundIndex:(u=e.sessionState)==null?void 0:u.roundIndex,honba:(f=e.sessionState)==null?void 0:f.honbaCount,riichiBets:ce(e).map(y=>y.id),tempai:Y(e).map(y=>y.id)}};case d.ROUND_OUTCOME_NAGASHI:return{nagashi:{roundIndex:(_=e.sessionState)==null?void 0:_.roundIndex,honba:(I=e.sessionState)==null?void 0:I.honbaCount,riichiBets:ce(e).map(y=>y.id),tempai:Y(e).map(y=>y.id),nagashi:tn(e).map(y=>y.id)}};case d.ROUND_OUTCOME_ABORT:return{abort:{roundIndex:(p=e.sessionState)==null?void 0:p.roundIndex,honba:(S=e.sessionState)==null?void 0:S.honbaCount,riichiBets:ce(e).map(y=>y.id)}};case d.ROUND_OUTCOME_CHOMBO:return{chombo:{roundIndex:(O=e.sessionState)==null?void 0:O.roundIndex,honba:(N=e.sessionState)==null?void 0:N.honbaCount,loserId:te(e)[0].id}};default:return}}function Bc(e){const t=e.headers.get("X-Release"),n=window.localStorage.getItem("__releaseTag");return t&&!n&&window.localStorage.setItem("__releaseTag",t),t&&n&&t!==n&&(window.localStorage.setItem("__releaseTag",t),window.location.reload()),e}class Gc{constructor(){E(this,"_authToken",null);E(this,"_personId",null);E(this,"_clientConfMimir",{prefix:"/v2"});E(this,"_clientConfFrey",{prefix:"/v2"})}setCredentials(t,n){this._authToken=n,this._personId=(t||0).toString();const r=new Headers;r.append("X-Auth-Token",this._authToken??""),r.append("X-Twirp","true"),r.append("X-Current-Person-Id",this._personId??""),this._clientConfMimir.baseURL="https://gameapi.riichimahjong.org",this._clientConfFrey.baseURL="https://userapi.riichimahjong.org",this._clientConfFrey.rpcTransport=this._clientConfMimir.rpcTransport=(s,o)=>(Object.keys(o.headers??{}).forEach(l=>r.set(l,o.headers[l])),fetch(s+"",{...o,headers:r}).then(Bc).then(l=>l.ok?l:l.json().then(c=>{if(c.code&&c.code==="internal"&&c.meta&&c.meta.cause)throw fetch("https://stat.riichimahjong.org",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source:"Tyr [twirp]",error:`From: ${typeof window<"u"&&window.location.href} | To: ${s} | Details: ${c.meta.cause}`})}),new Error(c.meta.cause);return l})))}startGame(t,n){return vc({eventId:t,players:n},this._clientConfMimir).then(r=>r.sessionHash)}getMyEvents(){return gc({},this._clientConfMimir).then(t=>t.events)}getGameConfig(t){return Ec({eventId:t},this._clientConfMimir)}getTimerState(t){return mc({eventId:t},this._clientConfMimir).then(n=>({...n,autostartTimer:!1}))}getLastResults(t,n){return Rc({playerId:t,eventId:n},this._clientConfMimir).then(r=>r.results)}getAllPlayers(t){return yc({eventIds:[t]},this._clientConfMimir).then(n=>n.players)}getGameOverview(t){return Ac({sessionHash:t},this._clientConfMimir)}getCurrentGames(t,n){return Uc({playerId:t,eventId:n},this._clientConfMimir).then(r=>r.sessions)}getUserInfo(t){return Lc({ids:t},this._clientConfFrey).then(n=>n.people)}confirmRegistration(t){return Promise.resolve(t)}getChangesOverview(t){const n=Bi(t);return!t.currentSessionHash||!n?Promise.reject():wc({sessionHash:t.currentSessionHash,roundData:n},this._clientConfMimir).then(r=>r.state)}getLastRoundByHash(t){return Hc({sessionHash:t},this._clientConfMimir).then(n=>n.round)}getLastRound(t,n){return bc({playerId:t,eventId:n},this._clientConfMimir).then(r=>r.round)}getAllRounds(t){return kc({sessionHash:t},this._clientConfMimir).then(n=>n.rounds)}addRound(t){const n=t.currentSessionHash??"",r=Bi(t);return!n||!r?Promise.reject():Cc({sessionHash:n,roundData:r},this._clientConfMimir)}getTablesState(t){return Mc({eventId:t},this._clientConfMimir).then(n=>n.tables.filter(r=>r.status===dt.SESSION_STATUS_INPROGRESS))}quickAuthorize(){return!this._personId||!this._authToken?Promise.reject():Pc({personId:parseInt(this._personId,10),authToken:this._authToken},this._clientConfFrey).then(t=>t.authSuccess)}authorize(t,n){return Dc({email:t,password:n},this._clientConfFrey)}}class jc{constructor(t,n){E(this,"onUpdate");E(this,"store");E(this,"timerSt");this.timerSt={timer:void 0,autostartTimer:void 0,setInterval:(u,f)=>window.setInterval(u,f),clearInterval:u=>window.clearInterval(u)};const r=Ka(gi,[Ic,Yl,hc,dc,Oc]),s=new m,o=new Gc,l=Ts(Li("⇨ [middlewares]"),zl(o),fc(s),pc(),_c(this.timerSt),Nc(n),Sc(t),Li("⇨ [reducers]"),Tc()),c=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace:!0,traceLimit:25})||gs;this.store=Es(r,c(l))}subscribe(t){this.onUpdate=t,this.store.subscribe(()=>this.onUpdate&&this.onUpdate(this.store.getState()))}get dispatch(){return this.store.dispatch.bind(this.store)}get redux(){return this.store}}function Gi(e){return`${e}px`}function ji(){const e=document.documentElement.style;e.setProperty("--screenWidth",Gi(window.screen.width)),e.setProperty("--screenHeight",Gi(window.screen.height))}function Kc(){ji(),window.addEventListener("resize",ji)}function Ki(e,t,n,r,s){fetch("https://stat.riichimahjong.org",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source:"Tyr [common]",error:`From: ${t} | Details: ${(e==null?void 0:e.toString())??(s==null?void 0:s.message)}`})})}function Fc(){if(!window.__errHandlerRegistered){if(window.onerror){const e=window.onerror;window.onerror=function(t,n,r,s,o){e(t,n,r,s,o),Ki(t,n,r,s,o)}}else window.onerror=Ki;window.__errHandlerRegistered=!0}}const An="auth",Cn="pid",wn="eid",Rn="lng",bn="thm",kn="sdm";class Yc{constructor(){E(this,"strategy")}setStrategy(t){this.strategy=t}getAuthToken(){return this.get(An,"string")}getPersonId(){return this.get(Cn,"int")}getEventId(){return this.get(wn,"int")}getLang(){return this.get(Rn,"string")}getTheme(){return this.get(bn,"string")}getSingleDeviceMode(){return!!this.get(kn,"int")}setAuthToken(t){return this.set(An,"string",t),this}setPersonId(t){return this.set(Cn,"int",t),this}setEventId(t){return this.set(wn,"int",t),this}setLang(t){return this.set(Rn,"string",t),this}setTheme(t){return this.set(bn,"string",t),this}setSingleDeviceMode(t){return t?this.set(kn,"int",1):this.deleteSingleDeviceMode(),this}deleteAuthToken(){return this.delete(An),this}deletePersonId(){return this.delete(Cn),this}deleteEventId(){return this.delete(wn),this}deleteLang(){return this.delete(Rn),this}deleteTheme(){return this.delete(bn),this}deleteSingleDeviceMode(){return this.delete(kn),this}get(t,n){var r;return(r=this.strategy)==null?void 0:r.get(t,n)}set(t,n,r){var s;(s=this.strategy)==null||s.set(t,n,r)}delete(t){var n;(n=this.strategy)==null||n.delete(t)}clear(){var t;(t=this.strategy)==null||t.clear()}}const zc=(e,t)=>e.indexOf(t,e.length-t.length)!==-1;class Wc{constructor(t){this.cookieDomain=t,this.cookieDomain&&!zc(window.location.hostname,this.cookieDomain)&&console.error("Cookie domain does not match current location - saving cookies is not possible. Please check your environment settings.")}get(t,n){const r=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(document.cookie);try{return r?n==="int"?parseInt(r[1],10):r[1].toString():null}catch{return null}}set(t,n,r){const s=new Date;s.setTime(s.getTime()+365*24*60*60*1e3);const o=";expires="+s.toUTCString(),l=this.cookieDomain?";domain="+this.cookieDomain:"";document.cookie=`${t}=${r}${o}${l}; path=/`}delete(t){const n=new Date;n.setTime(n.getTime()+-1*24*60*60*1e3);const r=";expires="+n.toUTCString(),s=this.cookieDomain?";domain="+this.cookieDomain:"";document.cookie=t+"="+r+s+"; path=/"}clear(){const t=document.cookie.split("; ");for(const n of t)[window.location.hostname,"."+window.location.hostname.split(".").slice(1).join(".")].forEach(r=>{document.cookie=encodeURIComponent(n.split(";")[0].split("=")[0])+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; domain="+r+" ;path=/"})}}const Vc=new Wc(".riichimahjong.org"),St=new Yc;St.setStrategy(Vc);window.location.search.startsWith("?clear")&&(St.clear(),window.location.replace(window.location.protocol+"//"+window.location.host));Kc();Fc();const hs=new js(St),Ei=new jc(hs,St),$c=Us(document.getElementById("tyr-root")),fs=e=>{window.__debugInfo={sh:e.currentSessionHash,p:e.currentPlayerId},$c.render(a.jsx(Fl,{state:e,dispatch:Ei.dispatch,storage:St,i18nService:hs}))};Ei.subscribe(fs);fs(Ei.redux.getState());
