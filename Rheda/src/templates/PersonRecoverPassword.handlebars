{{!*  Rheda: visualizer and control panel
*  Copyright (C) 2016  o.klimenko aka ctizen
*
*  This program is free software: you can redistribute it and/or modify
*  it under the terms of the GNU General Public License as published by
*  the Free Software Foundation, either version 3 of the License, or
*  (at your option) any later version.
*
*  This program is distributed in the hope that it will be useful,
*  but WITHOUT ANY WARRANTY; without even the implied warranty of
*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
*  GNU General Public License for more details.
*
*  You should have received a copy of the GNU General Public License
*  along with this program.  If not, see <http://www.gnu.org/licenses/>.
*}}
<div class="row">
    <div class="col-12">
        <h3>{{_t 'Recover your password'}}</h3>
        {{#error}}
            <div class="alert alert-danger" role="alert">{{error}}</div>
        {{/error}}
    </div>
</div>
<hr />

{{#recoverRequest}}
    {{#success}}
        <div class="alert alert-success" role="alert">{{_t 'Confirmation e-mail was sent. Please check you inbox.'}}</div>
        {{debugMessage}}
    {{/success}}
    {{^success}}
        <div class="row">
            <div class="col-12">
                {{_t "Please enter the e-mail address you've registered with. We will send you confirmation email to reset your password."}}
                <form action="" method="post" class="well"
                      autocomplete="off">
                    <input type="hidden" name="uniqid" value="{{uniqid}}">
                    <hr/>
                    <div class="form-group">
                        <label for="email">{{_t 'Your e-mail address'}}</label>
                        <input type="text" class="form-control"
                               id="email" name="email"
                               autocomplete="off"
                               value="{{email}}">
                    </div>
                    <div class="row mobile-flex-max-width">
                        <div class="col-4" style="text-align: center">
                            <img src="{{captcha}}" alt="captcha" />
                        </div>
                        <div class="col-8">
                            <div class="form-group">
                                <label for="captcha">{{_t 'Please enter symbols to make sure you\'re not a robot:'}}</label>
                                <input id="captcha"
                                       autocomplete="off"
                                       class="form-control"
                                       type="text" name="captcha" value="">
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary form-control" id="reg_button">{{_t 'Send confirmation e-mail'}}</button>
                </form>
            </div>
        </div>
    {{/success}}
{{/recoverRequest}}

{{^recoverRequest}}
    {{#success}}
        <div class="alert alert-success" role="alert">{{_t 'Your password was successfully updated. Please log in now.'}}</div>
    {{/success}}
    {{^success}}
        <div class="row">
            <div class="col-12">
                <form action="" method="post" class="well"
                      autocomplete="off">
                    <input type="hidden" name="email" value="{{email}}">
                    <input type="hidden" name="old_password" value="{{newTmpPassword}}">
                    <hr/>
                    <div class="form-group">
                        <label for="new_password">{{_t 'Please enter new password for your account.'}}</label>
                        <input type="password" class="form-control"
                               id="new_password"
                               autocomplete="new-password"
                               name="new_password">
                    </div>
                    <button type="submit" class="btn btn-primary" id="reg_button">{{_t 'Change password'}}</button>
                </form>
                <hr/>
            </div>
        </div>
    {{/success}}
{{/recoverRequest}}
