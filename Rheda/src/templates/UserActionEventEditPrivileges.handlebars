{{!*  Rheda: visualizer and control panel
*  Copyright (C) 2016  o.klimenko aka ctizen
*
*  This program is free software: you can redistribute it and/or modify
*  it under the terms of the GNU General Public License as published by
*  the Free Software Foundation, either version 3 of the License, or
*  (at your option) any later version.
*
*  This program is distributed in the hope that it will be useful,
*  but WITHOUT ANY WARRANTY; without even the implied warranty of
*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
*  GNU General Public License for more details.
*
*  You should have received a copy of the GNU General Public License
*  along with this program.  If not, see <http://www.gnu.org/licenses/>.
*}}
<h3>{{_p 'Manage events privileges: %s' event.title}}</h3>

<script type="text/javascript">
  function confirmRevoke(title) {
    return confirm(
      "{{_p "Revoke privilege #title?"}}"
        .replace('#title', title)
    );
  }
</script>

<div class="container">
  <h4>Personal privileges</h4>
  <hr>
  <table class="table table-striped table-condensed">
    <tr>
      <th>{{_t 'Title'}}</th>
      <th>{{_t 'Privilege'}}</th>
      <th>{{_t 'Value'}}</th>
      <th>{{_t 'Controls'}}</th>
    </tr>
    {{#person}}
      <tr>
        <td>{{ownerTitle}}{{#isGlobal}} [{{_t 'global'}}]{{/isGlobal}}</td>
        <td>{{name}}</td>
        <td>{{value}}</td>
        <td>
          {{^isGlobal}}
            <a href="/cp/revoke/{{id}}" class="btn btn-info"
               onclick="return confirmRevoke('{{title}}')">{{_t 'Revoke'}}</a>
          {{/isGlobal}}
        </td>
      </tr>
    {{/person}}
  </table>

  <h4>Group privileges</h4>
    <hr>
    <table class="table table-striped table-condensed">
      <tr>
        <th>{{_t 'Title'}}</th>
        <th>{{_t 'Privilege'}}</th>
        <th>{{_t 'Value'}}</th>
        <th>{{_t 'Controls'}}</th>
      </tr>
      {{#group}}
        <tr>
          <td>{{ownerTitle}}{{#isGlobal}} [{{_t 'global'}}]{{/isGlobal}}</td>
          <td>{{name}}</td>
          <td>{{value}}</td>
          <td>
            {{^isGlobal}}
              <a href="/cp/revoke/{{id}}" class="btn btn-info"
                 onclick="return confirmRevoke('{{title}}')">{{_t 'Revoke'}}</a>
            {{/isGlobal}}
          </td>
        </tr>
      {{/group}}
    </table>
</div>
